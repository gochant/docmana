{"version":3,"sources":["date.format.js","jquery.autosize.input.js","jquery.fileDownload.js","jquery.hotkeys.js","pdfobject.js","docmana.js","core.js","utils.js","templates.js","app.js","clipboard.js","history.js","mime.js","resource.js","store.js","template.js","plugins.js","docmana.min.js","back.js","copy.js","cut.js","download.js","duplicate.js","forward.js","full.js","layout.js","mkdir.js","mkfile.js","open.js","paste.js","refresh.js","rename.js","rm.js","search.js","sort.js","upload.js","navigation.js","notify.js","statusbar.js","toolbar.js","uploader.js","viewer.js","workzone.js","en.js","zh-CN.js"],"names":["root","factory","define","amd","exports","module","require","docmana","jQuery","_","Backbone","undefined","this","$","dateFormat","token","timezone","timezoneClip","pad","val","len","String","length","date","mask","utc","dF","arguments","Object","prototype","toString","call","test","Date","isNaN","SyntaxError","masks","slice","d","D","m","y","H","M","s","L","o","getTimezoneOffset","flags","dd","ddd","i18n","dayNames","dddd","mm","mmm","monthNames","mmmm","yy","yyyy","h","hh","HH","MM","ss","l","Math","round","t","tt","T","TT","Z","match","pop","replace","floor","abs","S","$0","default","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","isoDate","isoTime","isoDateTime","isoUtcDateTime","format","Plugins","AutosizeInputOptions","space","AutosizeInput","input","options","_this","_input","_options","extend","getDefaultOptions","_mirror","each","i","style","css","append","on","e","update","getOptions","value","text","newWidth","width","_defaultOptions","getInstanceKey","pluginDataAttributeName","validTypes","fn","autosizeInput","tagName","inArray","type","$this","data","window","htmlSpecialCharsRegEx","htmlSpecialCharsPlaceHolders","<",">","&","\r","\n","\"","'","fileDownload","fileUrl","checkFileDownloadComplete","cookieValue","settings","toLowerCase","lowerCaseCookie","cookieName","document","cookie","indexOf","internalCallbacks","onSuccess","cookieData","cookiePath","toUTCString","cookieDomain","cleanUp","downloadWindow","$iframe","formDoc","getiframeDocument","body","innerHTML","isFailure","$form","$contents","contents","first","number","setTimeout","onFail","err","checkInterval","iframeDoc","contentWindow","contentDocument","isAndroid","close","isIos","focus","htmlSpecialCharsEntityEncode","str","isOtherMobileBrowser","preparingMessageHtml","failMessageHtml","androidPostUnsupportedMessageHtml","dialogOptions","modal","prepareCallback","url","successCallback","failCallback","responseHtml","error","httpMethod","popupWindowTitle","encodeHTMLEntities","deferred","Deferred","userAgent","navigator","vendor","opera","substr","httpMethodUpper","toUpperCase","dialog","html","alert","reject","$preparingDialog","onPrepare","resolve","param","qsStart","substring","open","title","location","hide","prop","appendTo","formInnerHtml","split","kvp","k","shift","v","join","key","decodeURIComponent","write","find","submit","promise","abort","remove","keyHandler","handleObj","keys","origHandler","handler","event","target","hotkeys","filterInputAcceptingElements","textInputTypes","nodeName","filterContentEditable","attr","filterTextInputs","textAcceptingInputTypes","special","specialKeys","which","character","fromCharCode","modif","possible","index","specialKey","metaKey","ctrlKey","shiftNums","apply","version","8","9","10","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","45","46","59","61","96","97","98","99","100","101","102","103","104","105","106","107","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","144","145","173","186","187","188","189","190","191","192","219","220","221","222","`","1","2","3","4","5","6","7","0","-","=",";",",",".","/","\\","add","supportsPDFs","createAXO","isIE","supportsPdfActiveX","buildFragmentString","log","embedError","embed","getTargetElement","generatePDFJSiframe","generateEmbedElement","pdfobjectversion","supportsPdfMimeType","mimeTypes","isIOS","ax","ActiveXObject","pdfParams","string","hasOwnProperty","encodeURIComponent","msg","console","targetSelector","targetNode","querySelector","get","nodeType","pdfOpenFragment","PDFJS_URL","id","fullURL","scrollfix","iframe","className","position","overflow","getElementsByTagName","height","page","pdfOpenParams","fallbackLink","forcePDFJS","fallbackHTML","fallbackHTML_default","PDFObject","a","b","c","VERSION","lang","DEFAULTS","store","requestData","folder","subFolder","commands","workzone","layout","ui","kernel","ComponentBase","initProps","listen","init","create","Temp","Error","TypeError","result","item","splice","orderBy","collection","iteratees","orders","iterate","sortBy","reverse","upperFirst","charAt","trim","protoProps","staticProps","child","parent","has","constructor","__super__","baseMethods","main","props","clipboard","history","toolbar","statusbar","getState","defaults","tpl","name","template","$element","$el","render","trigger","Events","CommandBase","setState","canExec","enable","disable","removeClass","removeAttr","addClass","enabledWhen","selected","select","exec","listenUI","listenTo","shortcutExec","params","icon","shortcuts","templateName","output","ViewBase","View","initialize","autoAction","events","click [data-action]","click [data-command]","delegateEvents","autoRender","_commandHandler","$target","currentTarget","command","_actionHandler","context","preventDefault","closest","actionName","action","CommandContainer","_getCommandOptions","myCommands","filter","config","groupName","isString","_getCommandGroups","that","forEach","pair","cmds","compact","map","_getCommandGroupDom","$group","cmd","_getCommandAppendTo","to","_renderCommands","cmdGroups","utils","formatString","reg","RegExp","formatFileSize","bytes","onlyKb","si","thresh","units","u","fixed","toFixed","fileNameExtension","filename","unixTimestamp","getTime","selectSelectableElement","selectableContainer","elementsToSelect","not","selectable","_mouseStop","setInputSelection","start","end","setSelectionRange","selectionStart","selectionEnd","createTextRange","selRange","collapse","moveStart","moveEnd","setInputSelectionWithoutExtension","$input","endIdx","lastIndexOf","inlineEdit","callback","mode","isForce","$editor","originVal","keyCode","blur","outerWidth","outerHeight","after","show","ieVersion","ua","msie","parseInt","templates","Plugin","option","el","App","_initKernel","_initCommands","panelClassName","commandOptions","_initUI","startup","relayout","resp","notify","$panel","hasClass","top","bottom","margin-left","flatten","isArray","instance","args","toArray","Constructor","Clipboard","_data","isCut","empty","cut","copy","paste","isEmpty","targets","getIds","destDir","cwd","hash","srcDir","getSrcDir","moveTo","done","copyTo","phash","History","idx","findIndex","byId","getPath","push","forward","canForward","triggerOpen","getCurrHash","back","canBack","storeHistory","restoreHistory","unknown","directory","symlink","symlink-broken","application/x-empty","application/postscript","application/vnd.ms-office","application/msword","application/vnd.ms-word","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-word.document.macroEnabled.12","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.template.macroEnabled.12","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.template.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12","application/vnd.ms-excel.addin.macroEnabled.12","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.slideshow.macroEnabled.12","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.ms-powerpoint.template.macroEnabled.12","application/vnd.ms-powerpoint.addin.macroEnabled.12","application/vnd.openxmlformats-officedocument.presentationml.slide","application/vnd.ms-powerpoint.slide.macroEnabled.12","application/pdf","application/xml","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.text-web","application/vnd.oasis.opendocument.text-master","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.graphics-template","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.presentation-template","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.chart","application/vnd.oasis.opendocument.formula","application/vnd.oasis.opendocument.database","application/vnd.oasis.opendocument.image","application/vnd.openofficeorg.extension","application/x-shockwave-flash","application/flash-video","application/x-bittorrent","application/javascript","application/rtf","application/rtfd","application/x-font-ttf","application/x-font-otf","application/x-rpm","application/x-web-config","application/xhtml+xml","application/docbook+xml","application/x-awk","application/x-gzip","application/x-bzip2","application/x-xz","application/zip","application/x-zip","application/x-rar","application/x-tar","application/x-7z-compressed","application/x-jar","text/plain","text/x-php","text/html","text/javascript","text/css","text/rtf","text/rtfd","text/x-c","text/x-csrc","text/x-chdr","text/x-c++","text/x-c++src","text/x-c++hdr","text/x-shellscript","application/x-csh","text/x-python","text/x-java","text/x-java-source","text/x-ruby","text/x-perl","text/x-sql","text/xml","text/x-comma-separated-values","text/x-markdown","image/x-ms-bmp","image/jpeg","image/gif","image/png","image/tiff","image/x-targa","image/vnd.adobe.photoshop","image/xbm","image/pxm","audio/mpeg","audio/midi","audio/ogg","audio/mp4","audio/x-m4a","audio/wav","audio/x-mp3-playlist","video/x-dv","video/mp4","video/mpeg","video/x-msvideo","video/quicktime","video/x-ms-wmv","video/x-flv","video/x-matroska","video/ogg","resources","resource","r","unshift","Store","_sortBy","field","order","_cwd","cwdData","parentHash","f","byName","byIds","ids","request","added","concat","removed","n","files","cleanData","isNew","folderFirst","groups","groupBy","mime","_baseSortBy","eventData","list","mkdir","post","rename","isInit","fetch","search","q","download","content","getJSON","duplicate","dst","src","upload","ajaxSubmit","dataType","uploadParams","success","_getRequestParams","getFileExt","rm","method","sync","ajax","fail","xhr","x","xx","always","templateHelper","formatDate","unixTs","_mime2ClassDep","prefix","name2IconClass","parts","locked","mime2Class","mime2Type","fileMetadata","strs","size","ts","templateSettings","imports","docmanaTemplateHelper","docmanaResource","_cache","load","tplStore","compile","variable","element","_defaults","_name","pluginName","clearClass","focusAfterClear","linkText","$parent","divClass","$btn","clear","toggleBtn","hasText","left","change","Cmd","commandName","_filteredIds","filtered","every","viewLayout","_setDisplay","_getReverse","curr","toggle","vl","changeLayout","currLayout","button","counter","debounce","bind","_generateName","_generateUsableName","exist","_exec","$items","info","viewer","callout","editItemName","confirm","clearIt","$file","uploader","fileupload","build","Navigation","breadcrumbTemplateName","_renderBreadcrumb","click .docmana-breadcrumb li > a","$breadcrumb","pathData","_initBreadcrumbInteractive","droppable","accept","hoverClass","drop","draggable","dest","_linkHandler","navigation","_core","noop","warn","noty","sb","cb","dismissQueue","force","theme","closeWith","maxVisible","animation","easing","speed","timeout","killer","successCb","cancelCb","buttons","onClick","$noty","Statusbar","updateStatus","getStatus","selectedIds","selectedSize","reduce","NaN","sum","count","selectedCount","Toolbar","Uploader","parentDialog","click .cancel","$trigger","inputInstance","$body","updateBadge","$badge","updateDialogDisplay","$fileInput","tplFile","isFunction","formData","uploadUrl","fileInput","isDefaultPrevented","process","_trigger","autoUpload","progress","loaded","total","children","errorThrown","file","_cancelHandler","Viewer","fileType","viewCurrent","is","selectIds","ext","view","_previousHandler","selectTo","_nextHandler","_downloadHandler","WorkZone","_buffer","_selected","_timer","_moving","_renderListThrottle","throttle","_renderList","_triggerSelectDebounce","originX","originY","clientX","clientY","_initHotKeys","_initSelectableInteractive","scroll","dblclick .file-list-item","mousedown .file-list-item .filename","click","bottomThreshold","itemCountPerScreen","_updateSelectedCache","source","items","_restoreSelectUI","$select","isListLayout","dom","$view","elements","newName","willSelect","_renderItem","tplName","isAppend","_setItemInteractive","_getShiftSelected","$fistSelected","$lastSelected","last","firstIdx","lastIdx","min","max","_isNormalMouseEvent","shiftKey","merge","delay","_clearTimer","unselected","stop","helper","cursorAt","$selected","ddmanager","current","$thumbs","clone","_unselectAll","_selectAll","clearTimeout","_scrollHandler","_clickHandler","_$focusEl","_isSingleSelected","_editNameHandler","timer","_isSelecting","_isInput","_itemDblClickHandler","_getSingleSelect","$item","$filename","pos","Workzone","cmdBack","cmdForward","cmdOpen","cmdUpload","cmdDownload","cmdCut","cmdCopy","cmdPaste","cmdSort","cmdMkdir","cmdDuplicate","cmdRename","cmdRm","sortByName","sortBySize","sortByType","sortByDate","sortAscending","sortDescending","fileName","fileDateModified","fileSize","statusbarItems","statusbarSelectedItem","layoutList","layoutLargeIcons","textSearch","textPreviousItem","textNextItem","textFileUpload","textClose","textOk","textCancel","textConfirmOperate","labelLanguage","labelTheme","kindUnknown","kindFolder","kindAlias","kindAliasBroken","kindApp","kindPostscript","kindMsOffice","kindMsWord","kindMsExcel","kindMsPP","kindOO","kindAppFlash","kindPDF","kindTorrent","kind7z","kindTAR","kindGZIP","kindBZIP","kindXZ","kindZIP","kindRAR","kindJAR","kindTTF","kindOTF","kindRPM","kindText","kindTextPlain","kindPHP","kindCSS","kindHTML","kindJS","kindRTF","kindC","kindCHeader","kindCPP","kindCPPHeader","kindShell","kindPython","kindJava","kindRuby","kindPerl","kindSQL","kindXML","kindAWK","kindCSV","kindDOCBOOK","kindMarkdown","kindImage","kindBMP","kindJPEG","kindGIF","kindPNG","kindTIFF","kindTGA","kindPSD","kindXBITMAP","kindPXM","kindAudio","kindAudioMPEG","kindAudioMPEG4","kindAudioMIDI","kindAudioOGG","kindAudioWAV","AudioPlaylist","kindVideo","kindVideoDV","kindVideoMPEG","kindVideoMPEG4","kindVideoAVI","kindVideoMOV","kindVideoWM","kindVideoFlash","kindVideoMKV","kindVideoOGG"],"mappings":"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","file":"docmana.min.js","sourcesContent":["/*\n * Date Format 1.2.3\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\n * MIT license\n *\n * Includes enhancements by Scott Trenda <scott.trenda.net>\n * and Kris Kowal <cixar.com/~kris.kowal/>\n *\n * Accepts a date, a mask, or a date and a mask.\n * Returns a formatted version of the given date.\n * The date defaults to the current date/time.\n * The mask defaults to dateFormat.masks.default.\n */\n\nvar dateFormat = function () {\n\tvar\ttoken = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZ]|\"[^\"]*\"|'[^']*'/g,\n\t\ttimezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g,\n\t\ttimezoneClip = /[^-+\\dA-Z]/g,\n\t\tpad = function (val, len) {\n\t\t\tval = String(val);\n\t\t\tlen = len || 2;\n\t\t\twhile (val.length < len) val = \"0\" + val;\n\t\t\treturn val;\n\t\t};\n\n\t// Regexes and supporting functions are cached through closure\n\treturn function (date, mask, utc) {\n\t\tvar dF = dateFormat;\n\n\t\t// You can't provide utc if you skip other args (use the \"UTC:\" mask prefix)\n\t\tif (arguments.length == 1 && Object.prototype.toString.call(date) == \"[object String]\" && !/\\d/.test(date)) {\n\t\t\tmask = date;\n\t\t\tdate = undefined;\n\t\t}\n\n\t\t// Passing date through Date applies Date.parse, if necessary\n\t\tdate = date ? new Date(date) : new Date;\n\t\tif (isNaN(date)) throw SyntaxError(\"invalid date\");\n\n\t\tmask = String(dF.masks[mask] || mask || dF.masks[\"default\"]);\n\n\t\t// Allow setting the utc argument via the mask\n\t\tif (mask.slice(0, 4) == \"UTC:\") {\n\t\t\tmask = mask.slice(4);\n\t\t\tutc = true;\n\t\t}\n\n\t\tvar\t_ = utc ? \"getUTC\" : \"get\",\n\t\t\td = date[_ + \"Date\"](),\n\t\t\tD = date[_ + \"Day\"](),\n\t\t\tm = date[_ + \"Month\"](),\n\t\t\ty = date[_ + \"FullYear\"](),\n\t\t\tH = date[_ + \"Hours\"](),\n\t\t\tM = date[_ + \"Minutes\"](),\n\t\t\ts = date[_ + \"Seconds\"](),\n\t\t\tL = date[_ + \"Milliseconds\"](),\n\t\t\to = utc ? 0 : date.getTimezoneOffset(),\n\t\t\tflags = {\n\t\t\t\td:    d,\n\t\t\t\tdd:   pad(d),\n\t\t\t\tddd:  dF.i18n.dayNames[D],\n\t\t\t\tdddd: dF.i18n.dayNames[D + 7],\n\t\t\t\tm:    m + 1,\n\t\t\t\tmm:   pad(m + 1),\n\t\t\t\tmmm:  dF.i18n.monthNames[m],\n\t\t\t\tmmmm: dF.i18n.monthNames[m + 12],\n\t\t\t\tyy:   String(y).slice(2),\n\t\t\t\tyyyy: y,\n\t\t\t\th:    H % 12 || 12,\n\t\t\t\thh:   pad(H % 12 || 12),\n\t\t\t\tH:    H,\n\t\t\t\tHH:   pad(H),\n\t\t\t\tM:    M,\n\t\t\t\tMM:   pad(M),\n\t\t\t\ts:    s,\n\t\t\t\tss:   pad(s),\n\t\t\t\tl:    pad(L, 3),\n\t\t\t\tL:    pad(L > 99 ? Math.round(L / 10) : L),\n\t\t\t\tt:    H < 12 ? \"a\"  : \"p\",\n\t\t\t\ttt:   H < 12 ? \"am\" : \"pm\",\n\t\t\t\tT:    H < 12 ? \"A\"  : \"P\",\n\t\t\t\tTT:   H < 12 ? \"AM\" : \"PM\",\n\t\t\t\tZ:    utc ? \"UTC\" : (String(date).match(timezone) || [\"\"]).pop().replace(timezoneClip, \"\"),\n\t\t\t\to:    (o > 0 ? \"-\" : \"+\") + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n\t\t\t\tS:    [\"th\", \"st\", \"nd\", \"rd\"][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10]\n\t\t\t};\n\n\t\treturn mask.replace(token, function ($0) {\n\t\t\treturn $0 in flags ? flags[$0] : $0.slice(1, $0.length - 1);\n\t\t});\n\t};\n}();\n\n// Some common format strings\ndateFormat.masks = {\n\t\"default\":      \"ddd mmm dd yyyy HH:MM:ss\",\n\tshortDate:      \"m/d/yy\",\n\tmediumDate:     \"mmm d, yyyy\",\n\tlongDate:       \"mmmm d, yyyy\",\n\tfullDate:       \"dddd, mmmm d, yyyy\",\n\tshortTime:      \"h:MM TT\",\n\tmediumTime:     \"h:MM:ss TT\",\n\tlongTime:       \"h:MM:ss TT Z\",\n\tisoDate:        \"yyyy-mm-dd\",\n\tisoTime:        \"HH:MM:ss\",\n\tisoDateTime:    \"yyyy-mm-dd'T'HH:MM:ss\",\n\tisoUtcDateTime: \"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'\"\n};\n\n// Internationalization strings\ndateFormat.i18n = {\n\tdayNames: [\n\t\t\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\",\n\t\t\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"\n\t],\n\tmonthNames: [\n\t\t\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\",\n\t\t\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n\t]\n};\n\n// For convenience...\nDate.prototype.format = function (mask, utc) {\n\treturn dateFormat(this, mask, utc);\n};\n\n","var Plugins;\n(function (Plugins) {\n    var AutosizeInputOptions = (function () {\n        function AutosizeInputOptions(space) {\n            if (typeof space === \"undefined\") { space = 30; }\n            this.space = space;\n        }\n        return AutosizeInputOptions;\n    })();\n    Plugins.AutosizeInputOptions = AutosizeInputOptions;\n\n    var AutosizeInput = (function () {\n        function AutosizeInput(input, options) {\n            var _this = this;\n            this._input = $(input);\n            this._options = $.extend({}, AutosizeInput.getDefaultOptions(), options);\n\n            // Init mirror\n            this._mirror = $('<span style=\"position:absolute; top:-999px; left:0; white-space:pre;\"/>');\n\n            // Copy to mirror\n            $.each(['fontFamily', 'fontSize', 'fontWeight', 'fontStyle', 'letterSpacing', 'textTransform', 'wordSpacing', 'textIndent'], function (i, val) {\n                _this._mirror[0].style[val] = _this._input.css(val);\n            });\n            $(\"body\").append(this._mirror);\n\n            // Bind events - change update paste click mousedown mouseup focus blur\n            // IE 9 need keydown to keep updating while deleting (keeping backspace in - else it will first update when backspace is released)\n            // IE 9 need keyup incase text is selected and backspace/deleted is hit - keydown is to early\n            // How to fix problem with hitting the delete \"X\" in the box - but not updating!? mouseup is apparently to early\n            // Could bind separatly and set timer\n            // Add so it automatically updates if value of input is changed http://stackoverflow.com/a/1848414/58524\n            this._input.on(\"keydown keyup input propertychange change\", function (e) {\n                _this.update();\n            });\n\n            // Update\n            (function () {\n                _this.update();\n            })();\n        }\n        AutosizeInput.prototype.getOptions = function () {\n            return this._options;\n        };\n\n        AutosizeInput.prototype.update = function () {\n            var value = this._input.val() || \"\";\n\n            if (value === this._mirror.text()) {\n                // Nothing have changed - skip\n                return;\n            }\n\n            // Update mirror\n            this._mirror.text(value);\n\n            // Calculate the width\n            var newWidth = this._mirror.width() + this._options.space;\n\n            // Update the width\n            this._input.width(newWidth);\n        };\n\n        AutosizeInput.getDefaultOptions = function () {\n            return this._defaultOptions;\n        };\n\n        AutosizeInput.getInstanceKey = function () {\n            // Use camelcase because .data()['autosize-input-instance'] will not work\n            return \"autosizeInputInstance\";\n        };\n        AutosizeInput._defaultOptions = new AutosizeInputOptions();\n        return AutosizeInput;\n    })();\n    Plugins.AutosizeInput = AutosizeInput;\n\n    // jQuery Plugin\n    (function ($) {\n        var pluginDataAttributeName = \"autosize-input\";\n        var validTypes = [\"text\", \"password\", \"search\", \"url\", \"tel\", \"email\", \"number\"];\n\n        // jQuery Plugin\n        $.fn.autosizeInput = function (options) {\n            return this.each(function () {\n                // Make sure it is only applied to input elements of valid type\n                // Or let it be the responsibility of the programmer to only select and apply to valid elements?\n                if (!(this.tagName == \"INPUT\" && $.inArray(this.type, validTypes) > -1)) {\n                    // Skip - if not input and of valid type\n                    return;\n                }\n\n                var $this = $(this);\n\n                if (!$this.data(Plugins.AutosizeInput.getInstanceKey())) {\n                    // If instance not already created and attached\n                    if (options == undefined) {\n                        // Try get options from attribute\n                        options = $this.data(pluginDataAttributeName);\n                    }\n\n                    // Create and attach instance\n                    $this.data(Plugins.AutosizeInput.getInstanceKey(), new Plugins.AutosizeInput(this, options));\n                }\n            });\n        };\n\n        // On Document Ready\n        $(function () {\n            // Instantiate for all with data-provide=autosize-input attribute\n            $(\"input[data-\" + pluginDataAttributeName + \"]\").autosizeInput();\n        });\n        // Alternative to use On Document Ready and creating the instance immediately\n        //$(document).on('focus.autosize-input', 'input[data-autosize-input]', function (e)\n        //{\n        //\t$(this).autosizeInput();\n        //});\n    })(jQuery);\n})(Plugins || (Plugins = {}));\n","/*\n* jQuery File Download Plugin v1.4.4\n*\n* http://www.johnculviner.com\n*\n* Copyright (c) 2013 - John Culviner\n*\n* Licensed under the MIT license:\n*   http://www.opensource.org/licenses/mit-license.php\n*\n* !!!!NOTE!!!!\n* You must also write a cookie in conjunction with using this plugin as mentioned in the orignal post:\n* http://johnculviner.com/jquery-file-download-plugin-for-ajax-like-feature-rich-file-downloads/\n* !!!!NOTE!!!!\n*/\n\n(function($, window){\n\t// i'll just put them here to get evaluated on script load\n\tvar htmlSpecialCharsRegEx = /[<>&\\r\\n\"']/gm;\n\tvar htmlSpecialCharsPlaceHolders = {\n\t\t\t\t'<': 'lt;',\n\t\t\t\t'>': 'gt;',\n\t\t\t\t'&': 'amp;',\n\t\t\t\t'\\r': \"#13;\",\n\t\t\t\t'\\n': \"#10;\",\n\t\t\t\t'\"': 'quot;',\n\t\t\t\t\"'\": '#39;' /*single quotes just to be safe, IE8 doesn't support &apos;, so use &#39; instead */\n\t};\n\n$.extend({\n    //\n    //$.fileDownload('/path/to/url/', options)\n    //  see directly below for possible 'options'\n    fileDownload: function (fileUrl, options) {\n\n        //provide some reasonable defaults to any unspecified options below\n        var settings = $.extend({\n\n            //\n            //Requires jQuery UI: provide a message to display to the user when the file download is being prepared before the browser's dialog appears\n            //\n            preparingMessageHtml: null,\n\n            //\n            //Requires jQuery UI: provide a message to display to the user when a file download fails\n            //\n            failMessageHtml: null,\n\n            //\n            //the stock android browser straight up doesn't support file downloads initiated by a non GET: http://code.google.com/p/android/issues/detail?id=1780\n            //specify a message here to display if a user tries with an android browser\n            //if jQuery UI is installed this will be a dialog, otherwise it will be an alert\n            //Set to null to disable the message and attempt to download anyway\n            //\n            androidPostUnsupportedMessageHtml: \"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.\",\n\n            //\n            //Requires jQuery UI: options to pass into jQuery UI Dialog\n            //\n            dialogOptions: { modal: true },\n\n            //\n            //a function to call while the dowload is being prepared before the browser's dialog appears\n            //Args:\n            //  url - the original url attempted\n            //\n            prepareCallback: function (url) { },\n\n            //\n            //a function to call after a file download dialog/ribbon has appeared\n            //Args:\n            //  url - the original url attempted\n            //\n            successCallback: function (url) { },\n\n            //\n            //a function to call after a file download dialog/ribbon has appeared\n            //Args:\n            //  responseHtml    - the html that came back in response to the file download. this won't necessarily come back depending on the browser.\n            //                      in less than IE9 a cross domain error occurs because 500+ errors cause a cross domain issue due to IE subbing out the\n            //                      server's error message with a \"helpful\" IE built in message\n            //  url             - the original url attempted\n            //  error           - original error cautch from exception\n            //\n            failCallback: function (responseHtml, url, error) { },\n\n            //\n            // the HTTP method to use. Defaults to \"GET\".\n            //\n            httpMethod: \"GET\",\n\n            //\n            // if specified will perform a \"httpMethod\" request to the specified 'fileUrl' using the specified data.\n            // data must be an object (which will be $.param serialized) or already a key=value param string\n            //\n            data: null,\n\n            //\n            //a period in milliseconds to poll to determine if a successful file download has occured or not\n            //\n            checkInterval: 100,\n\n            //\n            //the cookie name to indicate if a file download has occured\n            //\n            cookieName: \"fileDownload\",\n\n            //\n            //the cookie value for the above name to indicate that a file download has occured\n            //\n            cookieValue: \"true\",\n\n            //\n            //the cookie path for above name value pair\n            //\n            cookiePath: \"/\",\n\n            //\n            //if specified it will be used when attempting to clear the above name value pair\n            //useful for when downloads are being served on a subdomain (e.g. downloads.example.com)\n            //\n            cookieDomain: null,\n\n            //\n            //the title for the popup second window as a download is processing in the case of a mobile browser\n            //\n            popupWindowTitle: \"Initiating file download...\",\n\n            //\n            //Functionality to encode HTML entities for a POST, need this if data is an object with properties whose values contains strings with quotation marks.\n            //HTML entity encoding is done by replacing all &,<,>,',\",\\r,\\n characters.\n            //Note that some browsers will POST the string htmlentity-encoded whilst others will decode it before POSTing.\n            //It is recommended that on the server, htmlentity decoding is done irrespective.\n            //\n            encodeHTMLEntities: true\n\n        }, options);\n\n        var deferred = new $.Deferred();\n\n        //Setup mobile browser detection: Partial credit: http://detectmobilebrowser.com/\n        var userAgent = (navigator.userAgent || navigator.vendor || window.opera).toLowerCase();\n\n        var isIos;                  //has full support of features in iOS 4.0+, uses a new window to accomplish this.\n        var isAndroid;              //has full support of GET features in 4.0+ by using a new window. Non-GET is completely unsupported by the browser. See above for specifying a message.\n        var isOtherMobileBrowser;   //there is no way to reliably guess here so all other mobile devices will GET and POST to the current window.\n\n        if (/ip(ad|hone|od)/.test(userAgent)) {\n\n            isIos = true;\n\n        } else if (userAgent.indexOf('android') !== -1) {\n\n            isAndroid = true;\n\n        } else {\n\n            isOtherMobileBrowser = /avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(userAgent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|e\\-|e\\/|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\\-|2|g)|yas\\-|your|zeto|zte\\-/i.test(userAgent.substr(0, 4));\n\n        }\n\n        var httpMethodUpper = settings.httpMethod.toUpperCase();\n\n        if (isAndroid && httpMethodUpper !== \"GET\" && settings.androidPostUnsupportedMessageHtml) {\n            //the stock android browser straight up doesn't support file downloads initiated by non GET requests: http://code.google.com/p/android/issues/detail?id=1780\n\n            if ($().dialog) {\n                $(\"<div>\").html(settings.androidPostUnsupportedMessageHtml).dialog(settings.dialogOptions);\n            } else {\n                alert(settings.androidPostUnsupportedMessageHtml);\n            }\n\n            return deferred.reject();\n        }\n\n        var $preparingDialog = null;\n\n        var internalCallbacks = {\n\n            onPrepare: function (url) {\n\n                //wire up a jquery dialog to display the preparing message if specified\n                if (settings.preparingMessageHtml) {\n\n                    $preparingDialog = $(\"<div>\").html(settings.preparingMessageHtml).dialog(settings.dialogOptions);\n\n                } else if (settings.prepareCallback) {\n\n                    settings.prepareCallback(url);\n\n                }\n\n            },\n\n            onSuccess: function (url) {\n\n                //remove the perparing message if it was specified\n                if ($preparingDialog) {\n                    $preparingDialog.dialog('close');\n                }\n\n                settings.successCallback(url);\n\n                deferred.resolve(url);\n            },\n\n            onFail: function (responseHtml, url, error) {\n\n                //remove the perparing message if it was specified\n                if ($preparingDialog) {\n                    $preparingDialog.dialog('close');\n                }\n\n                //wire up a jquery dialog to display the fail message if specified\n                if (settings.failMessageHtml) {\n                    $(\"<div>\").html(settings.failMessageHtml).dialog(settings.dialogOptions);\n                }\n\n                settings.failCallback(responseHtml, url, error);\n\n                deferred.reject(responseHtml, url);\n            }\n        };\n\n        internalCallbacks.onPrepare(fileUrl);\n\n        //make settings.data a param string if it exists and isn't already\n        if (settings.data !== null && typeof settings.data !== \"string\") {\n            settings.data = $.param(settings.data);\n        }\n\n\n        var $iframe,\n            downloadWindow,\n            formDoc,\n            $form;\n\n        if (httpMethodUpper === \"GET\") {\n\n            if (settings.data !== null) {\n                //need to merge any fileUrl params with the data object\n\n                var qsStart = fileUrl.indexOf('?');\n\n                if (qsStart !== -1) {\n                    //we have a querystring in the url\n\n                    if (fileUrl.substring(fileUrl.length - 1) !== \"&\") {\n                        fileUrl = fileUrl + \"&\";\n                    }\n                } else {\n\n                    fileUrl = fileUrl + \"?\";\n                }\n\n                fileUrl = fileUrl + settings.data;\n            }\n\n            if (isIos || isAndroid) {\n\n                downloadWindow = window.open(fileUrl);\n                downloadWindow.document.title = settings.popupWindowTitle;\n                window.focus();\n\n            } else if (isOtherMobileBrowser) {\n\n                window.location(fileUrl);\n\n            } else {\n\n                //create a temporary iframe that is used to request the fileUrl as a GET request\n                $iframe = $(\"<iframe>\")\n                    .hide()\n                    .prop(\"src\", fileUrl)\n                    .appendTo(\"body\");\n            }\n\n        } else {\n\n            var formInnerHtml = \"\";\n\n            if (settings.data !== null) {\n\n                $.each(settings.data.replace(/\\+/g, ' ').split(\"&\"), function () {\n\n                    var kvp = this.split(\"=\");\n\n                    //Issue: When value contains sign '=' then the kvp array does have more than 2 items. We have to join value back\n                    var k = kvp[0];\n                    kvp.shift();\n                    var v = kvp.join(\"=\");\n                    kvp = [k, v];\n\n                    var key = settings.encodeHTMLEntities ? htmlSpecialCharsEntityEncode(decodeURIComponent(kvp[0])) : decodeURIComponent(kvp[0]);\n                    if (key) {\n                        var value = settings.encodeHTMLEntities ? htmlSpecialCharsEntityEncode(decodeURIComponent(kvp[1])) : decodeURIComponent(kvp[1]);\n                    formInnerHtml += '<input type=\"hidden\" name=\"' + key + '\" value=\"' + value + '\" />';\n                    }\n                });\n            }\n\n            if (isOtherMobileBrowser) {\n\n                $form = $(\"<form>\").appendTo(\"body\");\n                $form.hide()\n                    .prop('method', settings.httpMethod)\n                    .prop('action', fileUrl)\n                    .html(formInnerHtml);\n\n            } else {\n\n                if (isIos) {\n\n                    downloadWindow = window.open(\"about:blank\");\n                    downloadWindow.document.title = settings.popupWindowTitle;\n                    formDoc = downloadWindow.document;\n                    window.focus();\n\n                } else {\n\n                    $iframe = $(\"<iframe style='display: none' src='about:blank'></iframe>\").appendTo(\"body\");\n                    formDoc = getiframeDocument($iframe);\n                }\n\n                formDoc.write(\"<html><head></head><body><form method='\" + settings.httpMethod + \"' action='\" + fileUrl + \"'>\" + formInnerHtml + \"</form>\" + settings.popupWindowTitle + \"</body></html>\");\n                $form = $(formDoc).find('form');\n            }\n\n            $form.submit();\n        }\n\n\n        //check if the file download has completed every checkInterval ms\n        setTimeout(checkFileDownloadComplete, settings.checkInterval);\n\n\n        function checkFileDownloadComplete() {\n            //has the cookie been written due to a file download occuring?\n\n            var cookieValue = settings.cookieValue;\n            if(typeof cookieValue == 'string') {\n                cookieValue = cookieValue.toLowerCase();\n            }\n\n            var lowerCaseCookie = settings.cookieName.toLowerCase() + \"=\" + cookieValue;\n\n            if (document.cookie.toLowerCase().indexOf(lowerCaseCookie) > -1) {\n\n                //execute specified callback\n                internalCallbacks.onSuccess(fileUrl);\n\n                //remove cookie\n                var cookieData = settings.cookieName + \"=; path=\" + settings.cookiePath + \"; expires=\" + new Date(0).toUTCString() + \";\";\n                if (settings.cookieDomain) cookieData += \" domain=\" + settings.cookieDomain + \";\";\n                document.cookie = cookieData;\n\n                //remove iframe\n                cleanUp(false);\n\n                return;\n            }\n\n            //has an error occured?\n            //if neither containers exist below then the file download is occuring on the current window\n            if (downloadWindow || $iframe) {\n\n                //has an error occured?\n                try {\n\n                    var formDoc = downloadWindow ? downloadWindow.document : getiframeDocument($iframe);\n\n                    if (formDoc && formDoc.body !== null && formDoc.body.innerHTML.length) {\n\n                        var isFailure = true;\n\n                        if ($form && $form.length) {\n                            var $contents = $(formDoc.body).contents().first();\n\n                            try {\n                                if ($contents.length && $contents[0] === $form[0]) {\n                                    isFailure = false;\n                                }\n                            } catch (e) {\n                                if (e && e.number == -2146828218) {\n                                    // IE 8-10 throw a permission denied after the form reloads on the \"$contents[0] === $form[0]\" comparison\n                                    isFailure = true;\n                                } else {\n                                    throw e;\n                                }\n                            }\n                        }\n\n                        if (isFailure) {\n                            // IE 8-10 don't always have the full content available right away, they need a litle bit to finish\n                            setTimeout(function () {\n                                internalCallbacks.onFail(formDoc.body.innerHTML, fileUrl);\n                                cleanUp(true);\n                            }, 100);\n\n                            return;\n                        }\n                    }\n                }\n                catch (err) {\n\n                    //500 error less than IE9\n                    internalCallbacks.onFail('', fileUrl, err);\n\n                    cleanUp(true);\n\n                    return;\n                }\n            }\n\n\n            //keep checking...\n            setTimeout(checkFileDownloadComplete, settings.checkInterval);\n        }\n\n        //gets an iframes document in a cross browser compatible manner\n        function getiframeDocument($iframe) {\n            var iframeDoc = $iframe[0].contentWindow || $iframe[0].contentDocument;\n            if (iframeDoc.document) {\n                iframeDoc = iframeDoc.document;\n            }\n            return iframeDoc;\n        }\n\n        function cleanUp(isFailure) {\n\n            setTimeout(function() {\n\n                if (downloadWindow) {\n\n                    if (isAndroid) {\n                        downloadWindow.close();\n                    }\n\n                    if (isIos) {\n                        if (downloadWindow.focus) {\n                            downloadWindow.focus(); //ios safari bug doesn't allow a window to be closed unless it is focused\n                            if (isFailure) {\n                                downloadWindow.close();\n                            }\n                        }\n                    }\n                }\n\n                //iframe cleanup appears to randomly cause the download to fail\n                //not doing it seems better than failure...\n                //if ($iframe) {\n                //    $iframe.remove();\n                //}\n\n            }, 0);\n        }\n\n\n        function htmlSpecialCharsEntityEncode(str) {\n            return str.replace(htmlSpecialCharsRegEx, function(match) {\n                return '&' + htmlSpecialCharsPlaceHolders[match];\n        \t});\n        }\n        var promise = deferred.promise();\n        promise.abort = function() {\n            cleanUp();\n            $iframe.remove();\n        };\n        return promise;\n    }\n});\n\n})(jQuery, this);\n","/*jslint browser: true*/\r\n/*jslint jquery: true*/\r\n\r\n/*\r\n * jQuery Hotkeys Plugin\r\n * Copyright 2010, John Resig\r\n * Dual licensed under the MIT or GPL Version 2 licenses.\r\n *\r\n * Based upon the plugin by Tzury Bar Yochay:\r\n * https://github.com/tzuryby/jquery.hotkeys\r\n *\r\n * Original idea by:\r\n * Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/\r\n */\r\n\r\n/*\r\n * One small change is: now keys are passed by object { keys: '...' }\r\n * Might be useful, when you want to pass some other data to your handler\r\n */\r\n\r\n(function(jQuery) {\r\n\r\n  jQuery.hotkeys = {\r\n    version: \"0.2.0\",\r\n\r\n    specialKeys: {\r\n      8: \"backspace\",\r\n      9: \"tab\",\r\n      10: \"return\",\r\n      13: \"return\",\r\n      16: \"shift\",\r\n      17: \"ctrl\",\r\n      18: \"alt\",\r\n      19: \"pause\",\r\n      20: \"capslock\",\r\n      27: \"esc\",\r\n      32: \"space\",\r\n      33: \"pageup\",\r\n      34: \"pagedown\",\r\n      35: \"end\",\r\n      36: \"home\",\r\n      37: \"left\",\r\n      38: \"up\",\r\n      39: \"right\",\r\n      40: \"down\",\r\n      45: \"insert\",\r\n      46: \"del\",\r\n      59: \";\",\r\n      61: \"=\",\r\n      96: \"0\",\r\n      97: \"1\",\r\n      98: \"2\",\r\n      99: \"3\",\r\n      100: \"4\",\r\n      101: \"5\",\r\n      102: \"6\",\r\n      103: \"7\",\r\n      104: \"8\",\r\n      105: \"9\",\r\n      106: \"*\",\r\n      107: \"+\",\r\n      109: \"-\",\r\n      110: \".\",\r\n      111: \"/\",\r\n      112: \"f1\",\r\n      113: \"f2\",\r\n      114: \"f3\",\r\n      115: \"f4\",\r\n      116: \"f5\",\r\n      117: \"f6\",\r\n      118: \"f7\",\r\n      119: \"f8\",\r\n      120: \"f9\",\r\n      121: \"f10\",\r\n      122: \"f11\",\r\n      123: \"f12\",\r\n      144: \"numlock\",\r\n      145: \"scroll\",\r\n      173: \"-\",\r\n      186: \";\",\r\n      187: \"=\",\r\n      188: \",\",\r\n      189: \"-\",\r\n      190: \".\",\r\n      191: \"/\",\r\n      192: \"`\",\r\n      219: \"[\",\r\n      220: \"\\\\\",\r\n      221: \"]\",\r\n      222: \"'\"\r\n    },\r\n\r\n    shiftNums: {\r\n      \"`\": \"~\",\r\n      \"1\": \"!\",\r\n      \"2\": \"@\",\r\n      \"3\": \"#\",\r\n      \"4\": \"$\",\r\n      \"5\": \"%\",\r\n      \"6\": \"^\",\r\n      \"7\": \"&\",\r\n      \"8\": \"*\",\r\n      \"9\": \"(\",\r\n      \"0\": \")\",\r\n      \"-\": \"_\",\r\n      \"=\": \"+\",\r\n      \";\": \": \",\r\n      \"'\": \"\\\"\",\r\n      \",\": \"<\",\r\n      \".\": \">\",\r\n      \"/\": \"?\",\r\n      \"\\\\\": \"|\"\r\n    },\r\n\r\n    // excludes: button, checkbox, file, hidden, image, password, radio, reset, search, submit, url\r\n    textAcceptingInputTypes: [\r\n      \"text\", \"password\", \"number\", \"email\", \"url\", \"range\", \"date\", \"month\", \"week\", \"time\", \"datetime\",\r\n      \"datetime-local\", \"search\", \"color\", \"tel\"],\r\n\r\n    // default input types not to bind to unless bound directly\r\n    textInputTypes: /textarea|input|select/i,\r\n\r\n    options: {\r\n      filterInputAcceptingElements: true,\r\n      filterTextInputs: true,\r\n      filterContentEditable: true\r\n    }\r\n  };\r\n\r\n  function keyHandler(handleObj) {\r\n    if (typeof handleObj.data === \"string\") {\r\n      handleObj.data = {\r\n        keys: handleObj.data\r\n      };\r\n    }\r\n\r\n    // Only care when a possible input has been specified\r\n    if (!handleObj.data || !handleObj.data.keys || typeof handleObj.data.keys !== \"string\") {\r\n      return;\r\n    }\r\n\r\n    var origHandler = handleObj.handler,\r\n      keys = handleObj.data.keys.toLowerCase().split(\" \");\r\n\r\n    handleObj.handler = function(event) {\r\n      //      Don't fire in text-accepting inputs that we didn't directly bind to\r\n      if (this !== event.target &&\r\n        (jQuery.hotkeys.options.filterInputAcceptingElements &&\r\n          jQuery.hotkeys.textInputTypes.test(event.target.nodeName) ||\r\n          (jQuery.hotkeys.options.filterContentEditable && jQuery(event.target).attr('contenteditable')) ||\r\n          (jQuery.hotkeys.options.filterTextInputs &&\r\n            jQuery.inArray(event.target.type, jQuery.hotkeys.textAcceptingInputTypes) > -1))) {\r\n        return;\r\n      }\r\n\r\n      var special = event.type !== \"keypress\" && jQuery.hotkeys.specialKeys[event.which],\r\n        character = String.fromCharCode(event.which).toLowerCase(),\r\n        modif = \"\",\r\n        possible = {};\r\n\r\n      jQuery.each([\"alt\", \"ctrl\", \"shift\"], function(index, specialKey) {\r\n\r\n        if (event[specialKey + 'Key'] && special !== specialKey) {\r\n          modif += specialKey + '+';\r\n        }\r\n      });\r\n\r\n      // metaKey is triggered off ctrlKey erronously\r\n      if (event.metaKey && !event.ctrlKey && special !== \"meta\") {\r\n        modif += \"meta+\";\r\n      }\r\n\r\n      if (event.metaKey && special !== \"meta\" && modif.indexOf(\"alt+ctrl+shift+\") > -1) {\r\n        modif = modif.replace(\"alt+ctrl+shift+\", \"hyper+\");\r\n      }\r\n\r\n      if (special) {\r\n        possible[modif + special] = true;\r\n      }\r\n      else {\r\n        possible[modif + character] = true;\r\n        possible[modif + jQuery.hotkeys.shiftNums[character]] = true;\r\n\r\n        // \"$\" can be triggered as \"Shift+4\" or \"Shift+$\" or just \"$\"\r\n        if (modif === \"shift+\") {\r\n          possible[jQuery.hotkeys.shiftNums[character]] = true;\r\n        }\r\n      }\r\n\r\n      for (var i = 0, l = keys.length; i < l; i++) {\r\n        if (possible[keys[i]]) {\r\n          return origHandler.apply(this, arguments);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  jQuery.each([\"keydown\", \"keyup\", \"keypress\"], function() {\r\n    jQuery.event.special[this] = {\r\n      add: keyHandler\r\n    };\r\n  });\r\n\r\n})(jQuery || this.jQuery || window.jQuery);\r\n","/*global ActiveXObject, window, console, define, module, jQuery */\r\n//jshint unused:false, strict: false\r\n\r\n/*\r\n    PDFObject v2.0.201604172\r\n    https://github.com/pipwerks/PDFObject\r\n    Copyright (c) 2008-2016 Philip Hutchison\r\n    MIT-style license: http://pipwerks.mit-license.org/\r\n    UMD module pattern from https://github.com/umdjs/umd/blob/master/templates/returnExports.js\r\n*/\r\n\r\n(function () {\r\n\r\n    \"use strict\";\r\n    //jshint unused:true\r\n\r\n    //PDFObject is designed for client-side (browsers), not server-side (node)\r\n    //Will choke on undefined navigator and window vars when run on server\r\n    //Return boolean false and exit function when running server-side\r\n\r\n    if (typeof window === \"undefined\" || typeof navigator === \"undefined\") { return false; }\r\n\r\n    var pdfobjectversion = \"2.0.201604172\",\r\n        supportsPDFs,\r\n\r\n        //declare functions\r\n        createAXO,\r\n        isIE,\r\n        supportsPdfMimeType = (typeof navigator.mimeTypes['application/pdf'] !== \"undefined\"),\r\n        supportsPdfActiveX,\r\n        buildFragmentString,\r\n        log,\r\n        embedError,\r\n        embed,\r\n        getTargetElement,\r\n        generatePDFJSiframe,\r\n        isIOS = (function () { return (/iphone|ipad|ipod/i.test(navigator.userAgent.toLowerCase())); })(),\r\n        generateEmbedElement;\r\n\r\n\r\n    /* ----------------------------------------------------\r\n       Supporting functions\r\n       ---------------------------------------------------- */\r\n\r\n    createAXO = function (type) {\r\n        var ax;\r\n        try {\r\n            ax = new ActiveXObject(type);\r\n        } catch (e) {\r\n            ax = null; //ensure ax remains null\r\n        }\r\n        return ax;\r\n    };\r\n\r\n    //IE11 still uses ActiveX for Adobe Reader, but IE 11 doesn't expose\r\n    //window.ActiveXObject the same way previous versions of IE did\r\n    //window.ActiveXObject will evaluate to false in IE 11, but \"ActiveXObject\" in window evaluates to true\r\n    //so check the first one for older IE, and the second for IE11\r\n    //FWIW, MS Edge (replacing IE11) does not support ActiveX at all, both will evaluate false\r\n    //Constructed as a method (not a prop) to avoid unneccesarry overhead -- will only be evaluated if needed\r\n    isIE = function () { return !!(window.ActiveXObject || \"ActiveXObject\" in window); };\r\n\r\n    //If either ActiveX support for \"AcroPDF.PDF\" or \"PDF.PdfCtrl\" are found, return true\r\n    //Constructed as a method (not a prop) to avoid unneccesarry overhead -- will only be evaluated if needed\r\n    supportsPdfActiveX = function () { return !!(createAXO(\"AcroPDF.PDF\") || createAXO(\"PDF.PdfCtrl\")); };\r\n\r\n    //Determines whether PDF support is available\r\n    supportsPDFs = (supportsPdfMimeType || (isIE() && supportsPdfActiveX()));\r\n\r\n    //Create a fragment identifier for using PDF Open parameters when embedding PDF\r\n    buildFragmentString = function (pdfParams) {\r\n\r\n        var string = \"\",\r\n            prop;\r\n\r\n        if (pdfParams) {\r\n\r\n            for (prop in pdfParams) {\r\n                if (pdfParams.hasOwnProperty(prop)) {\r\n                    string += encodeURIComponent(prop) + \"=\" + encodeURIComponent(pdfParams[prop]) + \"&\";\r\n                }\r\n            }\r\n\r\n            //The string will be empty if no PDF Params found\r\n            if (string) {\r\n\r\n                string = \"#\" + string;\r\n\r\n                //Remove last ampersand\r\n                string = string.slice(0, string.length - 1);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return string;\r\n\r\n    };\r\n\r\n    log = function (msg) {\r\n        if (typeof console !== \"undefined\" && console.log) {\r\n            console.log(\"[PDFObject] \" + msg);\r\n        }\r\n    };\r\n\r\n    embedError = function (msg) {\r\n        log(msg);\r\n        return false;\r\n    };\r\n\r\n    getTargetElement = function (targetSelector) {\r\n\r\n        //Default to body for full-browser PDF\r\n        var targetNode = document.body;\r\n\r\n        //If a targetSelector is specified, check to see whether\r\n        //it's passing a selector, jQuery object, or an HTML element\r\n\r\n        if (typeof targetSelector === \"string\") {\r\n\r\n            //Is CSS selector\r\n            targetNode = document.querySelector(targetSelector);\r\n\r\n        } else if (typeof jQuery !== \"undefined\" && targetSelector instanceof jQuery && targetSelector.length) {\r\n\r\n            //Is jQuery element. Extract HTML node\r\n            targetNode = targetSelector.get(0);\r\n\r\n        } else if (typeof targetSelector.nodeType !== \"undefined\" && targetSelector.nodeType === 1) {\r\n\r\n            //Is HTML element\r\n            targetNode = targetSelector;\r\n\r\n        }\r\n\r\n        return targetNode;\r\n\r\n    };\r\n\r\n    generatePDFJSiframe = function (targetNode, url, pdfOpenFragment, PDFJS_URL, id) {\r\n\r\n        var fullURL = PDFJS_URL + \"?file=\" + encodeURIComponent(url) + pdfOpenFragment;\r\n        var scrollfix = (isIOS) ? \"-webkit-overflow-scrolling: touch; overflow-y: scroll; \" : \"overflow: hidden; \";\r\n        var iframe = \"<div style='\" + scrollfix + \"position: absolute; top: 0; right: 0; bottom: 0; left: 0;'><iframe  \" + id + \" src='\" + fullURL + \"' style='border: none; width: 100%; height: 100%;' frameborder='0'></iframe></div>\";\r\n        targetNode.className += \" pdfobject-container\";\r\n        targetNode.style.position = \"relative\";\r\n        targetNode.style.overflow = \"auto\";\r\n        targetNode.innerHTML = iframe;\r\n        return targetNode.getElementsByTagName(\"iframe\")[0];\r\n\r\n    };\r\n\r\n    generateEmbedElement = function (targetNode, targetSelector, url, pdfOpenFragment, width, height, id) {\r\n\r\n        var style = \"\";\r\n\r\n        if (targetSelector && targetSelector !== document.body) {\r\n            style = \"width: \" + width + \"; height: \" + height + \";\";\r\n        } else {\r\n            style = \"position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100%;\";\r\n        }\r\n\r\n        targetNode.className += \" pdfobject-container\";\r\n        targetNode.innerHTML = \"<embed \" + id + \" class='pdfobject' src='\" + url + pdfOpenFragment + \"' type='application/pdf' style='overflow: auto; \" + style + \"'/>\";\r\n\r\n        return targetNode.getElementsByTagName(\"embed\")[0];\r\n\r\n    };\r\n\r\n    embed = function (url, targetSelector, options) {\r\n\r\n        //Ensure URL is available. If not, exit now.\r\n        if (typeof url !== \"string\") { return embedError(\"URL is not valid\"); }\r\n\r\n        //If targetSelector is not defined, convert to boolean\r\n        targetSelector = (typeof targetSelector !== \"undefined\") ? targetSelector : false;\r\n\r\n        //Ensure options object is not undefined -- enables easier error checking below\r\n        options = (typeof options !== \"undefined\") ? options : {};\r\n\r\n        //Get passed options, or set reasonable defaults\r\n        var id = (options.id && typeof options.id === \"string\") ? \"id='\" + options.id + \"'\" : \"\",\r\n            page = (options.page) ? options.page : false,\r\n            pdfOpenParams = (options.pdfOpenParams) ? options.pdfOpenParams : {},\r\n            fallbackLink = (typeof options.fallbackLink !== \"undefined\") ? options.fallbackLink : true,\r\n            width = (options.width) ? options.width : \"100%\",\r\n            height = (options.height) ? options.height : \"100%\",\r\n            forcePDFJS = (typeof options.forcePDFJS === \"boolean\") ? options.forcePDFJS : false,\r\n            PDFJS_URL = (options.PDFJS_URL) ? options.PDFJS_URL : false,\r\n            targetNode = getTargetElement(targetSelector),\r\n            fallbackHTML = \"\",\r\n            pdfOpenFragment = \"\",\r\n            fallbackHTML_default = \"<p>This browser does not support inline PDFs. Please download the PDF to view it: <a href='[url]'>Download PDF</a></p>\";\r\n\r\n        //If target element is specified but is not valid, exit without doing anything\r\n        if (!targetNode) { return embedError(\"Target element cannot be determined\"); }\r\n\r\n\r\n        //page option overrides pdfOpenParams, if found\r\n        if (page) {\r\n            pdfOpenParams.page = page;\r\n        }\r\n\r\n        //Stringify optional Adobe params for opening document (as fragment identifier)\r\n        pdfOpenFragment = buildFragmentString(pdfOpenParams);\r\n\r\n        //Do the dance\r\n        if (forcePDFJS && PDFJS_URL) {\r\n\r\n            return generatePDFJSiframe(targetNode, url, pdfOpenFragment, PDFJS_URL, id);\r\n\r\n        } else if (supportsPDFs) {\r\n\r\n            return generateEmbedElement(targetNode, targetSelector, url, pdfOpenFragment, width, height, id);\r\n\r\n        } else {\r\n\r\n            if (PDFJS_URL) {\r\n\r\n                return generatePDFJSiframe(targetNode, url, pdfOpenFragment, PDFJS_URL, id);\r\n\r\n            } else if (fallbackLink) {\r\n\r\n                fallbackHTML = (typeof fallbackLink === \"string\") ? fallbackLink : fallbackHTML_default;\r\n                targetNode.innerHTML = fallbackHTML.replace(/\\[url\\]/g, url);\r\n\r\n            }\r\n\r\n            return embedError(\"This browser does not support embedded PDFs\");\r\n\r\n        }\r\n\r\n    };\r\n\r\n    window.PDFObject = {\r\n        embed: function (a, b, c) { return embed(a, b, c); },\r\n        pdfobjectversion: (function () { return pdfobjectversion; })(),\r\n        supportsPDFs: (function () { return supportsPDFs; })()\r\n    };\r\n})();","(function () {\r\n    \"use strict\";\r\n\r\n    window.docmana = {};\r\n\r\n    docmana.VERSION = '0.1.0';\r\n    docmana.lang = 'zh-CN';\r\n\r\n    docmana.DEFAULTS = {\r\n        store: {\r\n            url: null,\r\n            requestData: {\r\n                folder: null,\r\n                subFolder: null\r\n            }\r\n        },\r\n        // navigation, new, open, clipboard, organize, view, select\r\n        commands: [\r\n            ['navigation', ['back', 'forward']],\r\n            ['new', ['mkdir', 'upload']],\r\n            ['open', ['open', 'download']],\r\n            ['clipboard', ['cut', 'copy', 'paste']],\r\n            ['organize', ['duplicate', 'rename', 'rm']],\r\n            ['layout', ['layout']],\r\n            ['view', ['sort']],\r\n            ['search', ['search']],\r\n            ['util', ['full']]\r\n            //,\r\n            //['refresh', ['refresh']]\r\n        ],\r\n        workzone:{\r\n            layout: 'list'\r\n        },\r\n        ui: ['workzone', 'toolbar', 'navigation', 'statusbar', 'viewer', 'uploader'],\r\n        kernel: ['store', 'history', 'clipboard']\r\n    }\r\n\r\n    docmana.commands = {};\r\n    docmana.ui = {};\r\n})();\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    // polyfill\r\n    if (typeof Object.create != 'function') {\r\n        Object.create = (function () {\r\n            var Temp = function () { };\r\n            return function (prototype) {\r\n                if (arguments.length > 1) {\r\n                    throw Error('Second argument not supported');\r\n                }\r\n                if (prototype !== Object(prototype) && prototype !== null) {\r\n                    throw TypeError('Argument must be an object or null');\r\n                }\r\n                if (prototype === null) {\r\n                    return {};\r\n                }\r\n                Temp.prototype = prototype;\r\n                var result = new Temp();\r\n                Temp.prototype = null;\r\n                return result;\r\n            };\r\n        })();\r\n    }\r\n\r\n    // underscore polyfill\r\n    if (!_.remove) {\r\n        _.remove = function (data, fn) {\r\n            for (var i = data.length - 1; i > -1; i--) {\r\n                var item = data[i];\r\n                if (fn(item)) {\r\n                    data.splice(i, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    if (!_.orderBy) {\r\n        _.orderBy = function (collection, iteratees, orders) {\r\n            _.each(iteratees, function (iterate, i) {\r\n                collection = _.sortBy(collection, function (item) {\r\n                    return item[iterate];\r\n                });\r\n                if (orders[i] === 'desc') {\r\n                    collection = collection.reverse();\r\n                }\r\n            });\r\n            return collection;\r\n        }\r\n    }\r\n    if (!_.upperFirst) {\r\n        _.upperFirst = function (string) {\r\n            return string.charAt(0).toUpperCase() + string.slice(1);\r\n        }\r\n    }\r\n    if (!_.trim) {\r\n        _.trim = function (str) {\r\n            if (String.prototype.trim) {\r\n                return str.trim();\r\n            }\r\n            return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\r\n        };\r\n    }\r\n\r\n    var extend = function (protoProps, staticProps) {\r\n        var parent = this;\r\n        var child;\r\n\r\n        if (protoProps && _.has(protoProps, 'constructor')) {\r\n            child = protoProps.constructor;\r\n        } else {\r\n            child = function () { return parent.apply(this, arguments); };\r\n        }\r\n\r\n        _.extend(child, parent, staticProps);\r\n\r\n        child.prototype = _.create(parent.prototype, protoProps);\r\n        child.prototype.constructor = child;\r\n\r\n        child.__super__ = parent.prototype;\r\n\r\n        return child;\r\n    };\r\n\r\n    var baseMethods = _.extend({\r\n        main: function () {\r\n            return this.props.parent ? this.props.parent.main : this.props.main;\r\n        },\r\n        store: function () {\r\n            return this.main().store;\r\n        },\r\n        clipboard: function () {\r\n            return this.main().clipboard;\r\n        },\r\n        history: function () {\r\n            return this.main().history;\r\n        },\r\n        toolbar: function () {\r\n            return this.main().ui.toolbar;\r\n        },\r\n        statusbar: function () {\r\n            return this.main().ui.statusbar;\r\n        },\r\n        workzone: function () {\r\n            return this.main().ui.workzone;\r\n        },\r\n        initProps: function (options) {\r\n            this.props = _.extend({}, _.result(this, 'defaults'), options);\r\n        },\r\n        getState: function () {\r\n            return {};\r\n        },\r\n        defaults: {},\r\n        tpl: function (name) {\r\n            return docmana.template.get(name);\r\n        },\r\n        $element: function () {\r\n            return this.$el;\r\n        },\r\n        init: function () { },\r\n        listen: function () { return this; },\r\n        render: function () {\r\n            var tpl = this.tpl(_.result(this, 'templateName'));\r\n            if (tpl) {\r\n                this.$el.html(tpl(this.getState()));\r\n            }\r\n            this.trigger('rendered');\r\n\r\n        }\r\n    });\r\n\r\n    // ComponentBase\r\n    function ComponentBase(options) {\r\n        this.initProps(options);\r\n        this.listen();\r\n        this.init.apply(this, arguments);\r\n    }\r\n\r\n    ComponentBase.prototype = _.extend({\r\n        constructor: ComponentBase\r\n    }, baseMethods, Backbone.Events);\r\n\r\n    ComponentBase.extend = extend;\r\n\r\n    docmana.ComponentBase = ComponentBase;\r\n\r\n    // CommandBase\r\n    docmana.CommandBase = ComponentBase.extend({\r\n        setState: function ($el) {\r\n            $el = $el || this.$element();\r\n            if ($el) {\r\n                if (this.canExec()) {\r\n                    this.enable();\r\n                } else {\r\n                    this.disable();\r\n                }\r\n            }\r\n        },\r\n        enable: function () {\r\n            this.$element().removeClass('disabled').removeAttr('disabled');\r\n        },\r\n        disable: function () {\r\n            this.$element().addClass('disabled').attr('disabled', 'disabeld');\r\n        },\r\n        canExec: function () {\r\n            var result = true;\r\n\r\n            if (this.enabledWhen) {\r\n                var selected = this.workzone().select();\r\n                if (this.enabledWhen === 'selected' && selected.length <= 0) {\r\n                    result = false;\r\n                } else {\r\n                    if (this.enabledWhen === 'single' && selected.length !== 1) {\r\n                        result = false;\r\n                    } else {\r\n                        if (this.enabledWhen === 'multiple' && selected.length < 1) {\r\n                            result = false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (result && this.props.canExec) {\r\n                result = this.props.canExec.call(this);\r\n            }\r\n         \r\n            return result;\r\n        },\r\n\r\n        exec: function () { },\r\n        listenUI: function () {\r\n            if (this.enabledWhen) {\r\n                this.listenTo(this.workzone(), 'selected refresh', function () {\r\n                    this.setState();\r\n                });\r\n            }\r\n        },\r\n        shortcutExec: function () {\r\n            if (this.canExec()) {\r\n                this.exec();\r\n            }\r\n        },\r\n        render: function () {\r\n            var params = {\r\n                name: this.name,\r\n                icon: this.icon || 'docmana-icon docmana-icon-' + this.name,\r\n                shortcuts: this.shortcuts == null ? \"\" : '(' + this.shortcuts + ')'\r\n            };\r\n            var tpl = this.tpl(this.templateName);\r\n            var output = tpl(params);\r\n            this.$el = $(output);\r\n            this.trigger('rendered');\r\n            this.listenUI();\r\n            this.setState();\r\n            return this.$el;\r\n        }\r\n\r\n    });\r\n\r\n\r\n    docmana.ViewBase = Backbone.View.extend(_.extend({\r\n        initialize: function (options) {\r\n            this.initProps(options);\r\n            this.listen();\r\n            if (this.props.autoAction) {\r\n                this.events || (this.events = {});\r\n                _.extend(this.events, {\r\n                    'click [data-action]': '_actionHandler',\r\n                    'click [data-command]': '_commandHandler'\r\n                });\r\n                this.delegateEvents();\r\n            }\r\n\r\n            this.init.apply(this, arguments);\r\n\r\n            this.props.autoRender && this.render();\r\n        },\r\n        _commandHandler: function (e) {\r\n            var $target = $(e.currentTarget);\r\n            var name = $target.attr('data-command');\r\n            var command = this.main().command(name);\r\n            if (command && command.canExec()) {\r\n                command.exec($target.data());\r\n            }\r\n        },\r\n        _actionHandler: function (e, context) {\r\n            e.preventDefault();\r\n            //e.stopImmediatePropagation();\r\n\r\n            context || (context = this);\r\n            var $el = $(e.currentTarget);\r\n            if ($el.closest('script').length > 0) return;\r\n\r\n            var actionName = '_' + $el.data().action;\r\n            if (actionName.indexOf('Handler') < 0) {\r\n                actionName = actionName + 'Handler';\r\n            }\r\n\r\n            context[actionName] && context[actionName](e);\r\n        }\r\n    }, baseMethods));\r\n\r\n    docmana.CommandContainer = docmana.ViewBase.extend({\r\n        _getCommandOptions: function () {\r\n            var myCommands = this.props.commands || [];\r\n            return _.filter(this.main().props.commands, function (config) {\r\n                var groupName = config[0];\r\n                return (_.find(myCommands, function (c) {\r\n                    var name = _.isString(c) ? c : c.name;\r\n                    return name === groupName;\r\n                })) != null;\r\n            });\r\n        },\r\n        _getCommandGroups: function () {\r\n            var that = this;\r\n            var result = {};\r\n            _.forEach(this._getCommandOptions(), function (pair) {\r\n                var name = pair[0];\r\n                var cmds = pair[1];\r\n                result[name] = _.compact(_.map(cmds, function (name) {\r\n                    var command = that.main().command(name);\r\n                    return command;\r\n                }));\r\n            });\r\n            return result;\r\n        },\r\n        _getCommandGroupDom: function (cmds, name) {\r\n            if (cmds.length > 0) {\r\n                var $group = $(this.tpl('toolbarBtnGroup')({\r\n                    name: name\r\n                }));\r\n\r\n                _.forEach(cmds, function (cmd) {\r\n                    $group.append(cmd.render());\r\n                });\r\n\r\n                return $group;\r\n            }\r\n            return '';\r\n        },\r\n        _getCommandAppendTo: function (name) {\r\n            var cmd = _.find(this.props.commands, function (cmd) {\r\n                return cmd.name === name;\r\n            });\r\n            return cmd == null ? this.$el : this.$(cmd.to);\r\n        },\r\n        _renderCommands: function () {\r\n            var cmdGroups = this._getCommandGroups();\r\n            var that = this;\r\n            _.forEach(cmdGroups, function (cmds, name) {\r\n                that._getCommandAppendTo(name).append(that._getCommandGroupDom(cmds, name));\r\n            });\r\n        }\r\n    });\r\n\r\n})();\r\n\r\n","(function () {\r\n    \"use strict\";\r\n\r\n    docmana.utils = {\r\n        // 格式化字符串，类似 C# string.format\r\n        formatString: function () {\r\n            var s = arguments[0];\r\n            for (var i = 0; i < arguments.length - 1; i++) {\r\n                var reg = new RegExp(\"\\\\{\" + i + \"\\\\}\", \"gm\");\r\n                s = s.replace(reg, arguments[i + 1]);\r\n            }\r\n            return s;\r\n        },\r\n        formatFileSize: function (bytes, onlyKb, si) {\r\n            if (si == null) si = true;\r\n            if (onlyKb == null) onlyKb = false;\r\n            var thresh = si ? 1000 : 1024;\r\n            var units = si ? ['KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'] : ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\r\n            var u = -1;\r\n            var fixed = 1;\r\n            if (onlyKb) {\r\n                bytes /= thresh;\r\n                u = 0;\r\n                fixed = 0;\r\n                if (bytes < 1 && bytes > 0) {\r\n                    bytes = 1;\r\n                }\r\n            } else {\r\n                if (Math.abs(bytes) < thresh) {\r\n\r\n                    return bytes + ' B';\r\n                }\r\n\r\n                do {\r\n                    bytes /= thresh;\r\n                    ++u;\r\n                } while (Math.abs(bytes) >= thresh && u < units.length - 1);\r\n            }\r\n\r\n\r\n            return bytes.toFixed(fixed) + ' ' + units[u];\r\n        },\r\n\r\n        fileNameExtension: function (filename) {\r\n            return '.' + filename.split('.').pop();\r\n        },\r\n        unixTimestamp: function () {\r\n            return Math.round(new Date().getTime() / 1000);\r\n        },\r\n        selectSelectableElement: function (selectableContainer, elementsToSelect) {\r\n            $(\".ui-selected\", selectableContainer)\r\n                .not(elementsToSelect).removeClass(\"ui-selected ui-selectee\").addClass(\"ui-unselecting\");\r\n\r\n            $(elementsToSelect).addClass(\"ui-selecting ui-selectee\");\r\n\r\n            var selectable = selectableContainer.data(\"ui-selectable\");\r\n            selectable._mouseStop(null);\r\n        },\r\n\r\n        setInputSelection: function (input, start, end) {\r\n            input.focus();\r\n            if (input.setSelectionRange) {\r\n                input.setSelectionRange(start, end);\r\n            } else if (typeof input.selectionStart != 'undefined') {\r\n                input.selectionStart = start;\r\n                input.selectionEnd = end;\r\n            } else if (input.createTextRange) {\r\n                var selRange = input.createTextRange();\r\n                selRange.collapse(true);\r\n                selRange.moveStart('character', start);\r\n                selRange.moveEnd('character', end - start);\r\n                selRange.select();\r\n            }\r\n        },\r\n        setInputSelectionWithoutExtension: function ($input) {\r\n            var val = $input.val();\r\n            var endIdx = val.lastIndexOf('.');\r\n            endIdx = endIdx > 0 ? endIdx : val.length;\r\n\r\n            docmana.utils.setInputSelection($input[0], 0, endIdx);\r\n\r\n        },\r\n        inlineEdit: function ($el, callback, mode, isForce) {  // mode: 0: 横向，1： 纵向\r\n            if (mode == null) mode = 0;\r\n            if (isForce == null) isForce = false;\r\n            var originVal = _.trim($el.text());\r\n            var $editor;\r\n\r\n            if (mode === 0) {\r\n                $editor = $('<input name=\"temp\" type=\"text\" class=\"inline-edit\" />').autosizeInput();\r\n            } else {\r\n                $editor = $('<textarea name=\"temp\" class=\"inline-edit\" tabindex=\"2\"></textarea>');\r\n            }\r\n            $editor\r\n                .val(originVal)\r\n\r\n                //.on('change keyup keydown paste cut', function () {\r\n                //    if (mode === 0) {\r\n                //        debugger;\r\n                //        $(this).width($(this).val().length * 13 + 20);\r\n                //    } else {\r\n                //        $(this).height(this.scrollHeight);\r\n                //    }\r\n                //})\r\n                .on('keydown', function (e) {\r\n                    if (e.keyCode === 13) {\r\n                        e.preventDefault();\r\n                        $(this).blur();\r\n                    }\r\n                });\r\n\r\n            // 初始化高度\r\n            if (mode === 0) {\r\n                $editor.width($el.outerWidth() + 30);\r\n            } else {\r\n                $editor.height($el.outerHeight());\r\n            }\r\n\r\n\r\n            $el.hide();\r\n            $el.after($editor);\r\n            // $editor.show();\r\n            $editor.focus();\r\n\r\n            $editor.on('blur', function () {\r\n                var val = $(this).val();\r\n                if (isForce || (val !== \"\" && originVal !== val)) {\r\n                    $el.text(val);\r\n                    callback(val);\r\n                }\r\n\r\n                $(this).remove();\r\n                $el.show();\r\n            });\r\n\r\n            docmana.utils.setInputSelectionWithoutExtension($editor);\r\n\r\n        },\r\n        ieVersion: function () {\r\n            var ua = window.navigator.userAgent;\r\n            var msie = ua.indexOf(\"MSIE \");\r\n\r\n            if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\\:11\\./))  // If Internet Explorer, return version number\r\n            {\r\n                return parseInt(ua.substring(msie + 5, ua.indexOf(\".\", msie)));\r\n            }\r\n            else  // If another browser, return false\r\n            {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n})();\r\n\r\n\r\n","'use strict';\nwindow.docmana.templates = Object.create(null);\nwindow.docmana.templates['breadcrumb.html'] = '<% _.forEach(data, function(item, i){ %>\\n    <% if(i === data.length - 1){ %>\\n    <li class=\"active\">\\n        <span>\\n            <%- item.name %>\\n        </span>\\n    </li>\\n    <% }else{ %>\\n    <li>\\n        <a href=\"#\" data-hash=\"<%- item.hash %>\">\\n            <%- item.name %>\\n        </a>\\n    </li>\\n    <% } %>\\n<% }); %>';\nwindow.docmana.templates['fileInfo.html'] = '<div class=\"docmana-file-info\">\\n    <div class=\"media center-block\">\\n        <div class=\"media-left file-type-large\">\\n            <span class=\"filetype <%- T.name2IconClass(data.name, data.mime) %>\"></span>\\n        </div>\\n        <div class=\"media-body\">\\n            <h4 class=\"media-heading\">\\n                <%- data.name%>\\n            </h4>\\n            <p>\\n            <p>\\n                <%- L(\\'fileType\\') %>:\\n                <%- L(\\'kind\\' + T.mime2Type(data.mime)) %>\\n            </p>\\n            <p>\\n                <%- L(\\'fileDateModified\\') %>:\\n                <%- T.formatDate(data.ts) %>\\n            </p>\\n            <p>\\n                <%- L(\\'fileSize\\') %>:\\n                <%- T.formatFileSize(data.size) %>\\n            </p>\\n            </p>\\n        </div>\\n    </div>\\n</div>\\n';\nwindow.docmana.templates['main.html'] = '<div class=\"docmana-panel\">\\n    <div class=\"docmana-heading panel-heading\">\\n        <div class=\"docmana-toolbar btn-toolbar\"></div>\\n    </div>\\n    <div class=\"docmana-body panel-body no-padding\">\\n        <div class=\"docmana-navigation clearfix\"></div>\\n        <div class=\"docmana-workzone\"></div>\\n    </div>\\n    <div class=\"docmana-footer panel-footer\">\\n        <div class=\"docmana-statusbar clearfix\"></div>\\n    </div>\\n</div>\\n\\n<div class=\"modal fade\" id=\"modal-file\" tabindex=\"-1\" role=\"dialog\">\\n    <div class=\"modal-dialog modal-lg static\" role=\"document\">\\n        <div class=\"modal-content docmana-viewer\"></div>\\n    </div>\\n</div>\\n<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\\n    <div class=\"modal-dialog\" role=\"document\">\\n        <div class=\"modal-content docmana-uploader\"></div>\\n    </div>\\n</div>';\nwindow.docmana.templates['navigation.html'] = '<div class=\"nav-group\"></div>\\n<div class=\"breadcrumb-group form-control input-sm\">\\n    <ul class=\"docmana-breadcrumb breadcrumb no-margin\"></ul>\\n</div>\\n<div class=\"search-group btn-toolbar\"></div>\\n<div class=\"refresh-group\"></div>\\n\\n';\nwindow.docmana.templates['statusbar.html'] = '<div class=\"status-text pull-left btn-sm\"></div>\\n<div class=\"pull-right btn-toolbar\">\\n    <div class=\"uploader btn-group\"></div>\\n    <div class=\"layout btn-group\"></div>\\n</div>';\nwindow.docmana.templates['statusbarText.html'] = '<span class=\"text-total\">\\n    <%- data.count %>\\n    <%- L(\\'statusbarItems\\') %>\\n</span>\\n<span class=\"text-selected\">\\n    <% if(data.selectedCount > 0){ %>\\n    <%- L(\\'statusbarSelectedItem\\', data.selectedCount) %>\\n\\n    <span class=\"size\">\\n        <%- data.selectedSize %>\\n    </span>\\n    <% } %>\\n</span>';\nwindow.docmana.templates['toolbar.html'] = '<div class=\"right pull-right btn-toolbar\">\\n    \\n</div>';\nwindow.docmana.templates['toolbarBtn.html'] = '<button type=\"button\" class=\"btn btn-default <%- data.name %>\"\\n        data-command=\"<%- data.name %>\"\\n        title=\"<%- L(\\'cmd\\' + _.upperFirst(data.name)) %> <%- data.shortcuts %>\">\\n    <i class=\"<%- data.icon %>\"></i>\\n</button>\\n';\nwindow.docmana.templates['toolbarBtnGroup.html'] = '<div class=\"btn-group btn-group-sm docmana-group-<%- data.name %>\" role=\"group\"></div>';\nwindow.docmana.templates['toolbarBtnLayout.html'] = '<div class=\"btn-group btn-group-sm\" data-toggle=\"buttons\">\\n    <label class=\"btn btn-default\" title=\"<%- L(\\'layoutList\\') %>\">\\n        <input type=\"radio\" name=\"layout\" autocomplete=\"off\" data-layout=\"list\">\\n        <i class=\"docmana-icon docmana-icon-listview\"></i>\\n    </label>\\n    <label class=\"btn btn-default\" title=\"<%- L(\\'layoutLargeIcons\\') %>\">\\n        <input type=\"radio\" name=\"layout\" autocomplete=\"off\" data-layout=\"icons\">\\n        <i class=\"docmana-icon docmana-icon-iconsview\"></i>\\n    </label>\\n</div>\\n';\nwindow.docmana.templates['toolbarBtnSort.html'] = '<div class=\"btn-group btn-group-sm <%- data.name %>\">\\n    <button type=\"button\" class=\"btn btn-default dropdown-toggle\"\\n            data-toggle=\"dropdown\" aria-haspopup=\"true\"\\n            aria-expanded=\"false\"\\n             title=\"<%- L(\\'cmdSort\\') %>\">\\n        <i class=\"<%- data.icon %>\"></i>\\n        <span class=\"caret\"></span>\\n    </button>\\n    <ul class=\"dropdown-menu\">\\n        <li>\\n            <a href=\"#\" data-command=\"sort\" data-field=\"name\">\\n                <i class=\"\"></i>\\n                <%- L(\\'sortByName\\') %>\\n            </a>\\n        </li>\\n        <li>\\n            <a href=\"#\" data-command=\"sort\" data-field=\"size\">\\n                <%- L(\\'sortBySize\\') %>\\n            </a>\\n        </li>\\n        <li>\\n            <a href=\"#\" data-command=\"sort\" data-field=\"mime\">\\n                <%- L(\\'sortByType\\') %>\\n            </a>\\n        </li>\\n        <li>\\n            <a href=\"#\" data-command=\"sort\" data-field=\"ts\">\\n                <%- L(\\'sortByDate\\') %>\\n            </a>\\n        </li>\\n        <li role=\"separator\" class=\"divider\"></li>\\n        <li>\\n            <a href=\"#\" data-command=\"sort\" data-order=\"asc\">\\n                <%- L(\\'sortAscending\\') %>\\n            </a>\\n        </li>\\n        <li>\\n            <a href=\"#\" data-command=\"sort\" data-order=\"desc\">\\n                <%- L(\\'sortDescending\\') %>\\n            </a>\\n        </li>\\n    </ul>\\n</div>\\n';\nwindow.docmana.templates['toolbarBtnUpload.html'] = '<a class=\"btn btn-default <%- data.name %>\" data-command=\"<%- data.name %>\"\\n    title=\"<%- L(\\'cmd\\' + _.upperFirst(data.name)) %>\">\\n    <i class=\"<%- data.icon %>\"></i>\\n    <form enctype=\"multipart/form-data\" method=\"POST\">\\n        <input type=\"file\" name=\"upload[]\" multiple value=\"\" />\\n    </form>\\n</a>';\nwindow.docmana.templates['toolbarSearch.html'] = '<div class=\"form-inline\">\\n    <div class=\"form-group has-feedback\">\\n        <input type=\"text\" class=\"form-control input-sm\" \\n               placeholder=\"<%- L(\\'textSearch\\') %>\">\\n        <span class=\"form-control-feedback\" aria-hidden=\"true\">\\n            <i class=\"fa fa-search\"></i>\\n        </span>\\n    </div>\\n</div>';\nwindow.docmana.templates['uploader.html'] = '<div class=\"modal-header\">\\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\\n        <span aria-hidden=\"true\">&times;</span>\\n    </button>\\n    <h4 class=\"modal-title\"><%- L(\\'textFileUpload\\') %></h4>\\n</div>\\n<div class=\"modal-body no-padding\">\\n    <div class=\"files list-group\"></div>\\n</div>\\n<div class=\"modal-footer clearfix\">\\n    <button type=\"button\" class=\"btn btn-default btn-sm\" data-dismiss=\"modal\">\\n        <%- L(\\'textClose\\') %>\\n    </button>\\n</div>';\nwindow.docmana.templates['uploaderFiles.html'] = '        <% for (var i=0, file; file= data.files[i]; i++) { %>\\n<div class=\"file-upload file\">\\n    <span class=\"list-group-item holder\">.</span>\\n    <div class=\"progress\">\\n        <div class=\"progress-bar progress-bar-info\" style=\"width: 0\"></div>\\n    </div>\\n    <div class=\"info list-group-item clearfix\">\\n        <div class=\"table-row\">\\n            <div class=\"name table-column\">\\n                <%- file.name %>\\n            </div>\\n            <div class=\"size table-column\">\\n                Processing...\\n            </div>\\n            <!--<div class=\"folder pull-left\">\\n        我的文件\\n    </div>-->\\n            <div class=\"status table-column\">\\n                <!--<i class=\"fa fa-check-circle text-success\"></i>-->\\n                <span class=\"percent\"></span>\\n                <span class=\"error\"></span>\\n            </div>\\n            <div class=\"operator table-column\">\\n                <% if (!i && !data.options.autoUpload) { %>\\n                <button class=\"btn btn-primary btn-sm start\" disabled>\\n                    <i class=\"fa fa-upload\"></i>\\n                </button>\\n                <% } %>\\n                <% if (!i) { %>\\n                <button class=\"btn btn-link btn-warning btn-xs cancel\">\\n                    <i class=\"fa fa-ban\"></i>\\n                </button>\\n                <% } %>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n        <% } %>\\n';\nwindow.docmana.templates['uploaderTrigger.html'] = '<div class=\"btn-uploader btn-group-sm\" style=\"position:relative;\"  title=\"<%- L(\\'textFileUpload\\') %>\">\\n    <button class=\"btn btn-default btn-sm\">\\n        <i class=\"fa fa-tasks\"></i>\\n    </button>\\n    <span class=\"badge badge-notify\"></span>\\n</div>';\nwindow.docmana.templates['viewer.html'] = '<div class=\"modal-header\">\\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\\n        <span aria-hidden=\"true\">&times;</span>\\n    </button>\\n    <h4 class=\"modal-title\">�ļ�</h4>\\n</div>\\n<div class=\"modal-body no-padding docmana-viewer-body\">\\n\\n</div>\\n<div class=\"modal-footer clearfix\">\\n    <button type=\"button\" class=\"btn btn-default\"\\n            title=\"<%- L(\\'cmdDownload\\') %>\"\\n            data-action=\"download\">\\n        <i class=\"docmana-icon docmana-icon-download\"></i>\\n    </button>\\n    <button type=\"button\" class=\"btn btn-default\"\\n            title=\"<%- L(\\'textPreviousItem\\') %>\"\\n            data-action=\"previous\">\\n        <i class=\"docmana-icon docmana-icon-back\"></i>\\n    </button>\\n    <button type=\"button\"\\n            class=\"btn btn-default\"\\n            data-action=\"next\"\\n            title=\"<%- L(\\'textNextItem\\') %>\">\\n        <i class=\"docmana-icon docmana-icon-forward\"></i>\\n    </button>\\n</div>';\nwindow.docmana.templates['workzoneIconsView.html'] = '<div class=\"icons-view docmana-workzone-view clearfix\">\\n</div>\\n';\nwindow.docmana.templates['workzoneIconsViewItem.html'] = '<div id=\"<%- data.hash %>\"\\n     title=\"<%= T.fileMetadata(data) %>\"\\n     class=\"drag-block file-list-item <%- T.mime2Class(data.mime) %>\"\\n     data-name=\"<%- data.name %>\">\\n    <div class=\"filetype <%- T.name2IconClass(data.name, data.mime, data)%> drag-block\"></div>\\n    <div class=\"filename drag-block\" title=\"<%- data.name %>\">\\n        <%- data.name %>\\n    </div>\\n</div>\\n';\nwindow.docmana.templates['workzoneListView.html'] = '<div class=\"list-view\">\\n    <div class=\"datatable-header panel panel-default\">\\n        <table class=\"table table-bordered table-condensed no-margin\">\\n            <colgroup>\\n                <col />\\n                <col style=\"width:135px;\" />\\n                <col style=\"width:135px;\" />\\n                <col style=\"width:90px;\" />\\n            </colgroup>\\n            <thead>\\n                <tr>\\n                    <th><%- L(\\'fileName\\') %></th>\\n                    <th><%- L(\\'fileDateModified\\') %></th>\\n                    <th><%- L(\\'fileType\\') %></th>\\n                    <th><%- L(\\'fileSize\\') %></th>\\n                </tr>\\n            </thead>\\n        </table>\\n    </div>\\n    <div class=\"datatable-content\">\\n        <table class=\"table table-condensed no-margin\">\\n            <colgroup>\\n                <col />\\n                <col style=\"width:135px;\" />\\n                <col style=\"width:135px;\" />\\n                <col style=\"width:90px;\" />\\n            </colgroup>\\n            <tbody class=\"docmana-workzone-view\"></tbody>\\n        </table>\\n    </div>\\n</div>\\n';\nwindow.docmana.templates['workzoneListViewItem.html'] = '<tr id=\"<%- data.hash %>\"\\n    class=\"file-list-item <%- T.mime2Class(data.mime) %>\"\\n    data-name=\"<%- data.name %>\">\\n    <td class=\"name\">\\n        <span title=\"<%= T.fileMetadata(data) %>\">\\n            <span class=\"filetype <%- T.name2IconClass(data.name, data.mime, data) %> drag-block\"></span>\\n            <span class=\"filename drag-block\">\\n                <%- data.name %>\\n            </span>\\n        </span>\\n\\n    </td>\\n    <td class=\"metadata date text-muted\">\\n        <span class=\"drag-block\">\\n            <%- T.formatDate(data.ts) %>\\n        </span>\\n    </td>\\n    <td class=\"metadata type text-muted\">\\n        <span class=\"drag-block\">\\n            <%- L(\\'kind\\' + T.mime2Type(data.mime)) %>\\n        </span>\\n    </td>\\n    <td class=\"metadata size text-muted\">\\n        <span class=\"drag-block\">\\n            <%- data.mime === \\'directory\\' ? \\'\\' : T.formatFileSize(data.size, true) %>\\n        </span>\\n    </td>\\n</tr>\\n';\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    docmana.App = docmana.ViewBase.extend({\r\n        init: function () {\r\n            this.ui = {};\r\n            this.commands = {};\r\n\r\n            this._initKernel();\r\n            this._initCommands();\r\n        },\r\n        templateName: 'main',\r\n        defaults: {\r\n            autoRender: true,\r\n            className: 'static',\r\n            panelClassName: 'panel no-margin panel-default',\r\n            commandOptions: {}\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this, 'rendered', function () {\r\n                this.$el.attr('tabindex', 1)\r\n                    .addClass('docmana')\r\n                    .addClass(this.props.className)\r\n                    .find('.docmana-panel')\r\n                    .addClass(this.props.panelClassName);\r\n                this._initUI();\r\n                this.startup();\r\n                var that = this;\r\n\r\n                setTimeout(function () {\r\n                    that.relayout();\r\n                }, 1);\r\n            });\r\n            this.listenTo(this, 'started', function () {\r\n                this.listenTo(this.store, 'syncFail', function (resp) {\r\n                    docmana.ui.notify.error(resp);\r\n                });\r\n            });\r\n        },\r\n        $panel: function () {\r\n            return this.$('.docmana-panel');\r\n        },\r\n        relayout: function () {\r\n            var ieVersion = docmana.utils.ieVersion();\r\n            if (ieVersion && ieVersion <= 9) {\r\n                if (this.$el.hasClass('static') || this.$el.hasClass('fixed')) {\r\n                    this.$('.docmana-body').css({\r\n                        top: this.$('.docmana-heading').outerHeight(),\r\n                        bottom: this.$('.docmana-footer').outerHeight()\r\n                    });\r\n                    this.$('.docmana-workzone').css({\r\n                        top: this.$('.docmana-navigation').outerHeight()\r\n                    });\r\n                    this.$('.docmana-navigation .breadcrumb-group').css({\r\n                        'margin-left': '5px',\r\n                        'width': this.$('.docmana-navigation').width()\r\n                            - this.$('.docmana-navigation .nav-group').outerWidth()\r\n                            - this.$('.docmana-navigation .search-group').outerWidth() - 10\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        _initKernel: function () {\r\n            var that = this;\r\n            _.forEach(this.props.kernel, function (name) {\r\n                that[name] = docmana[name](_.extend({\r\n                    main: that\r\n                }, that.props[name]));\r\n            });\r\n        },\r\n        _initUI: function () {\r\n            var that = this;\r\n            _.forEach(this.props.ui, function (name) {\r\n                that.ui[name] = docmana.ui[name](_.extend({\r\n                    el: that.$('.docmana-' + name),\r\n                    main: that\r\n                }, that.props[name]));\r\n            });\r\n\r\n            this.$el.on('focus', function () {\r\n                //  that.ui.workzone && that.ui.workzone.$el.focus();\r\n            });\r\n        },\r\n        _initCommands: function () {\r\n            var that = this;\r\n            _.forEach(_.flatten(this.props.commands, true), function (cmds) {\r\n\r\n                if (_.isArray(cmds)) {\r\n\r\n                    _.forEach(cmds, function (cmd) {\r\n                        var instance = docmana.commands[cmd](_.extend({\r\n                            main: that\r\n                        }, that.props.commandOptions[cmd]));\r\n\r\n                        that.commands[cmd] = instance;\r\n                    });\r\n                }\r\n\r\n            });\r\n        },\r\n        command: function (name) {\r\n            return this.commands[name];\r\n        },\r\n        exec: function () {\r\n            var args = _.toArray(arguments);\r\n            var name = args.shift();\r\n            var isForce = args.shift();\r\n            var cmd = this.command(name);\r\n\r\n            if (isForce || (cmd && cmd.canExec())) {               \r\n                cmd.exec.apply(cmd, args);\r\n            }\r\n        },\r\n        focus: function () {\r\n            this.$el.focus();\r\n        },\r\n        startup: function () {\r\n            //var a = this.$el[0].outerWidth;\r\n            this.trigger('started');\r\n            this.store.open(null, 1);\r\n        }\r\n    });\r\n\r\n    // 插件化\r\n    function Plugin(option) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            var data = $this.data('docmana');\r\n            var options = $.extend({\r\n                el: this\r\n            }, docmana.DEFAULTS, $this.data(), typeof option == 'object' && option);\r\n\r\n            if (!data) $this.data('docmana', (data = new docmana.App(options)));\r\n            if (typeof option == 'string') data[option]();\r\n        });\r\n    }\r\n\r\n    $.fn.docmana = Plugin;\r\n    $.fn.docmana.Constructor = docmana;\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var Clipboard = docmana.ComponentBase.extend({\r\n        init: function (options) {\r\n            this._data = [];\r\n            this.isCut = 0;\r\n        },\r\n        listen: function () {\r\n           // this.listenTo()\r\n        },\r\n        data: function (data, empty) {\r\n            if (data != null && (empty || data.length > 0)) {\r\n                this._data = data;\r\n                this.trigger('change', this._data);\r\n            }\r\n            return this._data;\r\n        },\r\n        cut: function (data) {\r\n            this.isCut = 1;\r\n            this.data(data);\r\n        },\r\n        copy: function (data) {\r\n            this.isCut = 0;\r\n            this.data(data);\r\n        },\r\n        paste: function () {\r\n            if (this.isEmpty()) return;\r\n\r\n            var that = this;\r\n            var targets = this.getIds();\r\n            var destDir = this.store().cwd().hash;\r\n            var srcDir = this.getSrcDir();\r\n\r\n            // 复制可无限粘贴，剪切则不能\r\n            // TODO: 当出现同名文件时，弹出对话框让用户选择，使用 deferred\r\n            if (this.isCut) {\r\n                this.store().moveTo(destDir, targets, srcDir).done(function () {\r\n                    that.empty();\r\n                });\r\n            } else {\r\n                this.store().copyTo(srcDir, destDir, targets);\r\n            }\r\n        },\r\n        empty: function () {\r\n            this.data([], true);\r\n        },\r\n        getSrcDir: function () {\r\n            return this._data[0].phash;\r\n        },\r\n        getIds: function () {\r\n            return _.map(this.data(), function (item) {\r\n                return item.hash;\r\n            });\r\n        },\r\n        isEmpty: function () {\r\n            return this.data().length === 0;\r\n        }\r\n\r\n    });\r\n\r\n    docmana.clipboard = function (options) {\r\n        return new Clipboard(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var History = docmana.ComponentBase.extend({\r\n        init: function (options) {\r\n            this.position = null;\r\n            this._data = [];\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this.main().store, 'cwdChange', function () {\r\n                var cwd = this.main().store.cwd();\r\n                var idx = _.findIndex(this._data, function (item) {\r\n                    return item.hash === cwd.hash;\r\n                });\r\n                if (idx < 0) {\r\n                    this.add(cwd);\r\n                    this.position = this._data.length - 1;\r\n                } else {\r\n                    this.position = idx;\r\n                }\r\n\r\n                this.trigger('change', this._data);\r\n            });\r\n        },\r\n        byId: function (id) {\r\n            return _.find(this._data, function(item) {\r\n                return item.hash === id;\r\n            });\r\n        },\r\n        getPath: function () {\r\n            return this._data.slice(0, this.position + 1);\r\n        },\r\n        add: function (item) {\r\n\r\n            if (this.position < this._data.length - 1) {\r\n                this._data.splice(this.position + 1, this._data.length - 1 - this.position);\r\n            }\r\n            this._data.push(item);\r\n        },\r\n        forward: function () {\r\n            if (this.canForward()) {\r\n                this.position = this.position + 1;\r\n                this.triggerOpen();\r\n            }\r\n        },\r\n        getCurrHash: function () {\r\n            var data = this._data[this.position];\r\n            return data != null ? data.hash : data;\r\n        },\r\n        back: function () {\r\n            if (this.canBack()) {\r\n                this.position = this.position - 1;\r\n                this.triggerOpen();\r\n            }\r\n        },\r\n        triggerOpen: function () {\r\n            this.main().store.open(this.getCurrHash());\r\n        },\r\n        canForward: function () {\r\n            return this.position + 1 < this._data.length;\r\n        },\r\n        canBack: function () {\r\n            return this._data.length >= 2 && this.position !== 0;\r\n        },\r\n\r\n        // TODO: 存储到 localstorage\r\n        storeHistory: function () {\r\n\r\n        },\r\n        restoreHistory: function () {\r\n\r\n        }\r\n\r\n    });\r\n\r\n    docmana.history = function (options) {\r\n        return new History(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    docmana.mimeTypes = {\r\n        'unknown': 'Unknown',\r\n        'directory': 'Folder',\r\n        'symlink': 'Alias',\r\n        'symlink-broken': 'AliasBroken',\r\n        'application/x-empty': 'TextPlain',\r\n        'application/postscript': 'Postscript',\r\n        'application/vnd.ms-office': 'MsOffice',\r\n        'application/msword': 'MsWord',\r\n        'application/vnd.ms-word': 'MsWord',\r\n        'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'MsWord',\r\n        'application/vnd.ms-word.document.macroEnabled.12': 'MsWord',\r\n        'application/vnd.openxmlformats-officedocument.wordprocessingml.template': 'MsWord',\r\n        'application/vnd.ms-word.template.macroEnabled.12': 'MsWord',\r\n        'application/vnd.ms-excel': 'MsExcel',\r\n        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'MsExcel',\r\n        'application/vnd.ms-excel.sheet.macroEnabled.12': 'MsExcel',\r\n        'application/vnd.openxmlformats-officedocument.spreadsheetml.template': 'MsExcel',\r\n        'application/vnd.ms-excel.template.macroEnabled.12': 'MsExcel',\r\n        'application/vnd.ms-excel.sheet.binary.macroEnabled.12': 'MsExcel',\r\n        'application/vnd.ms-excel.addin.macroEnabled.12': 'MsExcel',\r\n        'application/vnd.ms-powerpoint': 'MsPP',\r\n        'application/vnd.openxmlformats-officedocument.presentationml.presentation': 'MsPP',\r\n        'application/vnd.ms-powerpoint.presentation.macroEnabled.12': 'MsPP',\r\n        'application/vnd.openxmlformats-officedocument.presentationml.slideshow': 'MsPP',\r\n        'application/vnd.ms-powerpoint.slideshow.macroEnabled.12': 'MsPP',\r\n        'application/vnd.openxmlformats-officedocument.presentationml.template': 'MsPP',\r\n        'application/vnd.ms-powerpoint.template.macroEnabled.12': 'MsPP',\r\n        'application/vnd.ms-powerpoint.addin.macroEnabled.12': 'MsPP',\r\n        'application/vnd.openxmlformats-officedocument.presentationml.slide': 'MsPP',\r\n        'application/vnd.ms-powerpoint.slide.macroEnabled.12': 'MsPP',\r\n        'application/pdf': 'PDF',\r\n        'application/xml': 'XML',\r\n        'application/vnd.oasis.opendocument.text': 'OO',\r\n        'application/vnd.oasis.opendocument.text-template': 'OO',\r\n        'application/vnd.oasis.opendocument.text-web': 'OO',\r\n        'application/vnd.oasis.opendocument.text-master': 'OO',\r\n        'application/vnd.oasis.opendocument.graphics': 'OO',\r\n        'application/vnd.oasis.opendocument.graphics-template': 'OO',\r\n        'application/vnd.oasis.opendocument.presentation': 'OO',\r\n        'application/vnd.oasis.opendocument.presentation-template': 'OO',\r\n        'application/vnd.oasis.opendocument.spreadsheet': 'OO',\r\n        'application/vnd.oasis.opendocument.spreadsheet-template': 'OO',\r\n        'application/vnd.oasis.opendocument.chart': 'OO',\r\n        'application/vnd.oasis.opendocument.formula': 'OO',\r\n        'application/vnd.oasis.opendocument.database': 'OO',\r\n        'application/vnd.oasis.opendocument.image': 'OO',\r\n        'application/vnd.openofficeorg.extension': 'OO',\r\n        'application/x-shockwave-flash': 'AppFlash',\r\n        'application/flash-video': 'Flash video',\r\n        'application/x-bittorrent': 'Torrent',\r\n        'application/javascript': 'JS',\r\n        'application/rtf': 'RTF',\r\n        'application/rtfd': 'RTF',\r\n        'application/x-font-ttf': 'TTF',\r\n        'application/x-font-otf': 'OTF',\r\n        'application/x-rpm': 'RPM',\r\n        'application/x-web-config': 'TextPlain',\r\n        'application/xhtml+xml': 'HTML',\r\n        'application/docbook+xml': 'DOCBOOK',\r\n        'application/x-awk': 'AWK',\r\n        'application/x-gzip': 'GZIP',\r\n        'application/x-bzip2': 'BZIP',\r\n        'application/x-xz': 'XZ',\r\n        'application/zip': 'ZIP',\r\n        'application/x-zip': 'ZIP',\r\n        'application/x-rar': 'RAR',\r\n        'application/x-tar': 'TAR',\r\n        'application/x-7z-compressed': '7z',\r\n        'application/x-jar': 'JAR',\r\n        'text/plain': 'TextPlain',\r\n        'text/x-php': 'PHP',\r\n        'text/html': 'HTML',\r\n        'text/javascript': 'JS',\r\n        'text/css': 'CSS',\r\n        'text/rtf': 'RTF',\r\n        'text/rtfd': 'RTF',\r\n        'text/x-c': 'C',\r\n        'text/x-csrc': 'C',\r\n        'text/x-chdr': 'CHeader',\r\n        'text/x-c++': 'CPP',\r\n        'text/x-c++src': 'CPP',\r\n        'text/x-c++hdr': 'CPPHeader',\r\n        'text/x-shellscript': 'Shell',\r\n        'application/x-csh': 'Shell',\r\n        'text/x-python': 'Python',\r\n        'text/x-java': 'Java',\r\n        'text/x-java-source': 'Java',\r\n        'text/x-ruby': 'Ruby',\r\n        'text/x-perl': 'Perl',\r\n        'text/x-sql': 'SQL',\r\n        'text/xml': 'XML',\r\n        'text/x-comma-separated-values': 'CSV',\r\n        'text/x-markdown': 'Markdown',\r\n        'image/x-ms-bmp': 'BMP',\r\n        'image/jpeg': 'JPEG',\r\n        'image/gif': 'GIF',\r\n        'image/png': 'PNG',\r\n        'image/tiff': 'TIFF',\r\n        'image/x-targa': 'TGA',\r\n        'image/vnd.adobe.photoshop': 'PSD',\r\n        'image/xbm': 'XBITMAP',\r\n        'image/pxm': 'PXM',\r\n        'audio/mpeg': 'AudioMPEG',\r\n        'audio/midi': 'AudioMIDI',\r\n        'audio/ogg': 'AudioOGG',\r\n        'audio/mp4': 'AudioMPEG4',\r\n        'audio/x-m4a': 'AudioMPEG4',\r\n        'audio/wav': 'AudioWAV',\r\n        'audio/x-mp3-playlist': 'AudioPlaylist',\r\n        'video/x-dv': 'VideoDV',\r\n        'video/mp4': 'VideoMPEG4',\r\n        'video/mpeg': 'VideoMPEG',\r\n        'video/x-msvideo': 'VideoAVI',\r\n        'video/quicktime': 'VideoMOV',\r\n        'video/x-ms-wmv': 'VideoWM',\r\n        'video/x-flv': 'VideoFlash',\r\n        'video/x-matroska': 'VideoMKV',\r\n        'video/ogg': 'VideoOGG'\r\n    };\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    docmana.resources = {};\r\n\r\n    docmana.resource = function () {\r\n        var resource = docmana.resources[docmana.lang];\r\n        var args = _.toArray(arguments);\r\n        var name = args.shift();\r\n        var r = resource[name];\r\n        if (r == null) {\r\n            return name;\r\n        }\r\n        args.unshift(r);\r\n        return docmana.utils.formatString.apply(docmana.utils, args);\r\n    }\r\n\r\n})();","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var Store = docmana.ComponentBase.extend({\r\n        init: function (options) {\r\n            this._data = [];\r\n            this._sortBy = {\r\n                field: 'name',\r\n                order: 'asc'\r\n            };\r\n            this._cwd = null;\r\n        },\r\n        data: function (data) {\r\n            if (data != null) {\r\n                this._data = data;\r\n            }\r\n            return this._data;\r\n        },\r\n        cwdData: function () {\r\n            var parentHash = this.cwd().hash;\r\n\r\n            return _.filter(this._data, function (f) {\r\n                return f.phash === parentHash;\r\n            });\r\n        },\r\n        url: function (name) {\r\n            return this.props.url;\r\n        },\r\n        cwd: function () {\r\n            return this._cwd;\r\n        },\r\n        byId: function (id) {\r\n            return _.find(this._data, function (item) {\r\n                return item.hash === id;\r\n            });\r\n        },\r\n        byName: function (name) {\r\n            return _.find(this._data, function (item) {\r\n                return item.name === name;\r\n            });\r\n        },\r\n        byIds: function (ids) {\r\n            var that = this;\r\n            return _.compact(_.map(ids, function (id) {\r\n                return that.byId(id);\r\n            }));\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this, 'sync', function (resp, request) {\r\n                if (resp.added) {\r\n                    this._data = this._data.concat(resp.added);\r\n                }\r\n                if (resp.removed) {\r\n                    _.remove(this._data, function (n) {\r\n                        return (_.findIndex(resp.removed, function (r) {\r\n                            return n.hash === r;\r\n                        }) >= 0);\r\n                    });\r\n                }\r\n                if (resp.files) {\r\n                    this._data = resp.files;\r\n                }\r\n                if (resp.cwd) {\r\n                    if (this._cwd == null || this._cwd.hash !== resp.cwd.hash) {\r\n                        this._cwd = resp.cwd;\r\n                        this.trigger('cwdChange', this.cwd());\r\n                    }\r\n                }\r\n\r\n                this.cleanData();\r\n\r\n                //TODO: 在更新界面前必须要进行排序\r\n                this.sortBy();\r\n                this.update(request);\r\n            });\r\n\r\n            this.listenTo(this, 'uploaded', function (data) {\r\n                this.trigger('sync', data);\r\n            });\r\n        },\r\n        cleanData: function () {\r\n            // 移除未保存的数据\r\n            _.remove(this._data, function (d) {\r\n                return d.isNew;\r\n            });\r\n        },\r\n        // 排序\r\n        sortBy: function (field, order, folderFirst) {\r\n            if (field != null) {\r\n                this._sortBy.field = field;\r\n            }\r\n            if (order != null) {\r\n                this._sortBy.order = order;\r\n            }\r\n            if (folderFirst == null) { folderFirst = true; }\r\n\r\n            if (folderFirst) {\r\n                var groups = _.groupBy(this._data, function (item) {\r\n                    return item.mime === 'directory';\r\n                });\r\n                groups['true'] = this._baseSortBy(groups['true']);\r\n                groups['false'] = this._baseSortBy(groups['false']);\r\n\r\n                this._data = groups['true'].concat(groups['false']);\r\n            } else {\r\n                this._data = this._baseSortBy(this._data);\r\n            }\r\n\r\n            this.trigger('sort', this._sortBy);\r\n            return this;\r\n        },\r\n        update: function (eventData) {\r\n            eventData || (eventData = {});\r\n            this.trigger('update', this._data, eventData);\r\n        },\r\n        _baseSortBy: function (list) {\r\n            var field = this._sortBy.field;\r\n            var order = this._sortBy.order;\r\n\r\n            if (field === 'name') {\r\n                field = function (item) {\r\n                    return item.name.toLowerCase();\r\n                };\r\n            }\r\n            return _.orderBy(list, [field], [order]);\r\n        },\r\n        mkdir: function (name, target) {\r\n            return this.post({\r\n                cmd: 'mkdir',\r\n                target: target,\r\n                name: name\r\n            });\r\n        },\r\n        // 重命名\r\n        rename: function (name, target) {\r\n            return this.post({\r\n                cmd: 'rename',\r\n                name: name,\r\n                target: target\r\n            });\r\n        },\r\n        // 移动\r\n        moveTo: function (destDir, targets, srcDir) {\r\n            srcDir || (srcDir = this.cwd().hash);\r\n            return this.paste(srcDir, destDir, targets, 1);\r\n        },\r\n        // 复制\r\n        copyTo: function (srcDir, destDir, targets) {\r\n            return this.paste(srcDir, destDir, targets, 0);\r\n        },\r\n        // 打开\r\n        open: function (target, isInit) {\r\n            var that = this;\r\n            return this.fetch({\r\n                cmd: 'open',\r\n                target: target,\r\n                init: isInit\r\n            });\r\n        },\r\n        // 搜索\r\n        search: function (target, q) {\r\n            return this.fetch({\r\n                cmd: 'search',\r\n                target: target,\r\n                q: q\r\n            });\r\n        },\r\n        // 下载\r\n        download: function (id) {\r\n            var url = fileUrl(id, 1);\r\n            $.fileDownload(url);\r\n        },\r\n        content: function (target) {\r\n            var that = this;\r\n            return this.getJSON({\r\n                cmd: 'get',\r\n                target: target\r\n            });\r\n        },\r\n        // 粘贴\r\n        paste: function (srcDir, destDir, targets, isCut) {\r\n            if (srcDir === destDir) {\r\n                return this.duplicate(targets);\r\n            }\r\n\r\n            return this.post({\r\n                cmd: 'paste',\r\n                cut: isCut,\r\n                dst: destDir,\r\n                src: srcDir,\r\n                targets: targets\r\n            });\r\n        },\r\n        // 副本\r\n        duplicate: function (targets) {\r\n            return this.post({\r\n                cmd: 'duplicate',\r\n                targets: targets\r\n            });\r\n        },\r\n        // 上传\r\n        upload: function ($form) {\r\n            var that = this;\r\n            return $form.ajaxSubmit({\r\n                url: this.url(),\r\n                dataType: \"json\",\r\n                data: this.uploadParams(),\r\n                success: function (resp) {\r\n                    that.trigger('sync', resp);\r\n                }\r\n            });\r\n        },\r\n        uploadParams: function() {\r\n            return this._getRequestParams({\r\n                cmd: 'upload',\r\n                target: this.cwd().hash\r\n            });\r\n        },\r\n        getFileExt: function (data) {\r\n            return docmana.utils.fileNameExtension(data.name);\r\n        },\r\n        // 删除\r\n        rm: function (targets) {\r\n            return this.post({\r\n                cmd: 'rm',\r\n                targets: targets\r\n            });\r\n        },\r\n        _getRequestParams: function (data) {\r\n            return $.extend({}, this.props.requestData, data);\r\n        },\r\n        request: function (method, data, sync) {\r\n            var that = this;\r\n            var params = this._getRequestParams(data);\r\n            if (sync == null) sync = true;\r\n            return $.ajax({\r\n                url: this.url(),\r\n                type: method,\r\n                data: params,\r\n                //contentType: \"application/json; charset=utf-8\",\r\n                dataType: \"json\"\r\n            }).fail(function (xhr, resp, x, xx) {\r\n                that.trigger('syncFail', resp);\r\n            }).done(function (resp) {\r\n                if (sync) {\r\n                    that.trigger('sync', resp, params);\r\n                }\r\n            }).always(function (resp) {\r\n               // console.log(resp);\r\n            });\r\n        },\r\n        getJSON: function (data) {\r\n            return this.request('get', data, false);\r\n        },\r\n        // 获取文件Url\r\n        fileUrl: function (target, download) {\r\n            if (download == null) download = 0;\r\n            var params = this._getRequestParams({\r\n                cmd: 'file',\r\n                target: target,\r\n                download: download\r\n            });\r\n            return this.url() + '?' + $.param(params);\r\n        },\r\n        fetch: function (data) {\r\n            return this.request('get', data);\r\n        },\r\n        get: function (data) {\r\n            return this.request('get', data);\r\n        },\r\n        post: function (data) {\r\n            return this.request('post', data);\r\n        }\r\n\r\n    });\r\n\r\n    docmana.store = function (options) {\r\n        return new Store(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n    \"use strict\";\r\n\r\n    var templateHelper = _.extend({\r\n        formatDate: function (unixTs, format) {\r\n            var date = new Date(unixTs * 1000);\r\n            format || (format = 'yyyy/mm/dd HH:MM');\r\n\r\n            return date.format(format);\r\n            //return date.toLocaleDateString(docmana.lang) + ' ' + date.toLocaleTimeString(docmana.lang, {\r\n            //    hour12: false\r\n            //});\r\n        },\r\n        // deprecate\r\n        _mime2ClassDep: function (mime) {\r\n            var prefix = 'ico-';\r\n\r\n            mime = mime.split('/');\r\n\r\n            return prefix + mime[0] + (mime[0] !== 'image' && mime[1] ? ' ' + prefix + mime[1].replace(/(\\.|\\+)/g, '-') : '');\r\n        },\r\n        name2IconClass: function (name, mime, data) {\r\n            var result;\r\n            if (mime === 'directory') {\r\n                result = 'icon-folder';\r\n            } else {\r\n                var parts = name.split('.');\r\n                var prefix = 'icon-';\r\n                result = prefix + parts[parts.length - 1];\r\n            }\r\n            if (data.locked === 1) {\r\n                result += ' icon-locked';\r\n            }\r\n            return result;\r\n        },\r\n        mime2Class: function (mime) {\r\n            if (mime === 'directory') {\r\n                return 'type-directory';\r\n            }\r\n            return 'type-file';\r\n        },\r\n        mime2Type: function (mime) {\r\n            return docmana.mimeTypes[mime];\r\n        },\r\n        fileMetadata: function (data) {\r\n            var lang = docmana.resource;\r\n            var strs = [];\r\n            strs.push(data.name);\r\n            strs.push(lang('fileType') + ': ' + lang('kind' + this.mime2Type(data.mime)));\r\n            if (data.mime !== 'directory') {\r\n                strs.push(lang('fileSize') + ': ' + this.formatFileSize(data.size));\r\n            }\r\n            strs.push(lang('fileDateModified') + ': ' + this.formatDate(data.ts));\r\n            return strs.join(' &#13; ');\r\n        }\r\n    }, docmana.utils);\r\n\r\n    docmana.templateHelper = templateHelper;\r\n    if (!_.templateSettings.imports) {\r\n        _.docmanaTemplateHelper = templateHelper;\r\n        _.docmanaResource = docmana.resource;\r\n    }\r\n    docmana.template = {\r\n        _cache: {}\r\n    };\r\n\r\n    docmana.template.load = function (tplStore) {\r\n        var that = this;\r\n        _.forEach(tplStore, function(tpl, key) {\r\n            that._cache[key] = that.compile(tpl);\r\n        });\r\n    }\r\n\r\n    docmana.template.get = function (key) {\r\n        return this._cache[key + '.html'];\r\n    }\r\n\r\n    docmana.template.compile = function (tpl) {\r\n        if (!_.templateSettings.imports) {\r\n            tpl = tpl.replace(/T\\./g, '_.docmanaTemplateHelper.').replace(/L\\(/g, '_.docmanaResource(');\r\n        }\r\n        return _.template(tpl, {\r\n            'imports': {\r\n                '$': jQuery,\r\n                'T': docmana.templateHelper,\r\n                'L': docmana.resource\r\n            },\r\n            'variable': 'data'\r\n        });\r\n    }\r\n\r\n    docmana.template.load(docmana.templates);\r\n\r\n})();\r\n\r\n","(function ($) {\r\n\r\n    \"use strict\";\r\n\r\n    var pluginName = \"clearIt\",\r\n        defaults = {\r\n            clearClass: 'clear_input',\r\n            focusAfterClear: true,\r\n            linkText: '&times;',\r\n            callback: null\r\n        };\r\n\r\n    function Plugin(element, options) {\r\n        this.element = element;\r\n        this.$element = $(element);\r\n        this.settings = $.extend({}, defaults, options);\r\n        this._defaults = defaults;\r\n        this._name = pluginName;\r\n        this.init();\r\n    }\r\n\r\n    $.extend(Plugin.prototype, {\r\n        init: function () {\r\n            var that = this;\r\n            var $el = this.$element;\r\n            var $parent = $el.parent();\r\n            var divClass = this.settings.clearClass + '_div';\r\n\r\n            if (!$parent.hasClass(divClass)) {\r\n                $parent\r\n                   .addClass(divClass)\r\n                   .append('<a style=\"position: absolute; cursor: pointer;\" class=\"' + this.settings.clearClass + '\">'\r\n                   + this.settings.linkText + '</a>');\r\n            }\r\n\r\n            this.$btn().on('click', function (e) {\r\n                that.clear();\r\n            });\r\n\r\n            $el.on('keyup keydown change focus', function () {\r\n                that.toggleBtn();\r\n                if (!that.hasText()) {\r\n                    that.callback();\r\n                }\r\n            });\r\n\r\n            this.toggleBtn();\r\n\r\n        },\r\n        $btn: function () {\r\n            return this.$element.parent().find('.' + this.settings.clearClass);\r\n        },\r\n        toggleBtn: function () {\r\n            var $btn = this.$btn();\r\n            var method = this.hasText() ? 'show' : 'hide';\r\n            $btn[method]();\r\n            this.layout();\r\n        },\r\n        layout: function () {\r\n            var width = this.$element.outerWidth();\r\n            var height = this.$element.outerHeight();\r\n            var $btn = this.$btn();\r\n            $btn.css({\r\n                top: height / 2 - $btn.height() / 2,\r\n                left: width - height / 2 - $btn.height() / 2 - 10\r\n            });\r\n        },\r\n        callback: function () {\r\n            if (typeof (this.settings.callback) === \"function\") {\r\n                this.settings.callback();\r\n            }\r\n        },\r\n        clear: function () {\r\n\r\n            this.$element.val('').change();\r\n            this.toggleBtn();\r\n\r\n            if (this.settings.focusAfterClear) {\r\n                this.$element.focus();\r\n            }\r\n            this.callback();\r\n        },\r\n        hasText: function () {\r\n            return this.$element.val().replace(/^\\s+|\\s+$/g, '').length > 0;\r\n        }\r\n    });\r\n\r\n    $.fn[pluginName] = function (options) {\r\n        return this.each(function () {\r\n            if (!$.data(this, \"plugin_\" + pluginName)) {\r\n                $.data(this, \"plugin_\" +\r\n                    pluginName, new Plugin(this, options));\r\n            }\r\n        });\r\n    };\r\n\r\n})(jQuery);\r\n\r\n\r\n\r\n\r\n// autosizeinput\r\n// https://github.com/MartinF/jQuery.Autosize.Input\r\nvar Plugins;\r\n(function (Plugins) {\r\n    var AutosizeInputOptions = (function () {\r\n        function AutosizeInputOptions(space) {\r\n            if (typeof space === \"undefined\") { space = 30; }\r\n            this.space = space;\r\n        }\r\n        return AutosizeInputOptions;\r\n    })();\r\n    Plugins.AutosizeInputOptions = AutosizeInputOptions;\r\n\r\n    var AutosizeInput = (function () {\r\n        function AutosizeInput(input, options) {\r\n            var _this = this;\r\n            this._input = $(input);\r\n            this._options = $.extend({}, AutosizeInput.getDefaultOptions(), options);\r\n\r\n            // Init mirror\r\n            this._mirror = $('<span style=\"position:absolute; top:-999px; left:0; white-space:pre;\"/>');\r\n\r\n            // Copy to mirror\r\n            $.each(['fontFamily', 'fontSize', 'fontWeight', 'fontStyle', 'letterSpacing', 'textTransform', 'wordSpacing', 'textIndent'], function (i, val) {\r\n                _this._mirror[0].style[val] = _this._input.css(val);\r\n            });\r\n            $(\"body\").append(this._mirror);\r\n\r\n            // Bind events - change update paste click mousedown mouseup focus blur\r\n            // IE 9 need keydown to keep updating while deleting (keeping backspace in - else it will first update when backspace is released)\r\n            // IE 9 need keyup incase text is selected and backspace/deleted is hit - keydown is to early\r\n            // How to fix problem with hitting the delete \"X\" in the box - but not updating!? mouseup is apparently to early\r\n            // Could bind separatly and set timer\r\n            // Add so it automatically updates if value of input is changed http://stackoverflow.com/a/1848414/58524\r\n            this._input.on(\"keydown keyup input propertychange change\", function (e) {\r\n                _this.update();\r\n            });\r\n\r\n            // Update\r\n            (function () {\r\n                _this.update();\r\n            })();\r\n        }\r\n        AutosizeInput.prototype.getOptions = function () {\r\n            return this._options;\r\n        };\r\n\r\n        AutosizeInput.prototype.update = function () {\r\n            var value = this._input.val() || \"\";\r\n\r\n            if (value === this._mirror.text()) {\r\n                // Nothing have changed - skip\r\n                return;\r\n            }\r\n\r\n            // Update mirror\r\n            this._mirror.text(value);\r\n\r\n            // Calculate the width\r\n            var newWidth = this._mirror.width() + this._options.space;\r\n\r\n            // Update the width\r\n            this._input.width(newWidth);\r\n        };\r\n\r\n        AutosizeInput.getDefaultOptions = function () {\r\n            return this._defaultOptions;\r\n        };\r\n\r\n        AutosizeInput.getInstanceKey = function () {\r\n            // Use camelcase because .data()['autosize-input-instance'] will not work\r\n            return \"autosizeInputInstance\";\r\n        };\r\n        AutosizeInput._defaultOptions = new AutosizeInputOptions();\r\n        return AutosizeInput;\r\n    })();\r\n    Plugins.AutosizeInput = AutosizeInput;\r\n\r\n    // jQuery Plugin\r\n    (function ($) {\r\n        var pluginDataAttributeName = \"autosize-input\";\r\n        var validTypes = [\"text\", \"password\", \"search\", \"url\", \"tel\", \"email\", \"number\"];\r\n\r\n        // jQuery Plugin\r\n        $.fn.autosizeInput = function (options) {\r\n            return this.each(function () {\r\n                // Make sure it is only applied to input elements of valid type\r\n                // Or let it be the responsibility of the programmer to only select and apply to valid elements?\r\n                if (!(this.tagName == \"INPUT\" && $.inArray(this.type, validTypes) > -1)) {\r\n                    // Skip - if not input and of valid type\r\n                    return;\r\n                }\r\n\r\n                var $this = $(this);\r\n\r\n                if (!$this.data(Plugins.AutosizeInput.getInstanceKey())) {\r\n                    // If instance not already created and attached\r\n                    if (options == undefined) {\r\n                        // Try get options from attribute\r\n                        options = $this.data(pluginDataAttributeName);\r\n                    }\r\n\r\n                    // Create and attach instance\r\n                    $this.data(Plugins.AutosizeInput.getInstanceKey(), new Plugins.AutosizeInput(this, options));\r\n                }\r\n            });\r\n        };\r\n\r\n        // On Document Ready\r\n        $(function () {\r\n            // Instantiate for all with data-provide=autosize-input attribute\r\n            $(\"input[data-\" + pluginDataAttributeName + \"]\").autosizeInput();\r\n        });\r\n        // Alternative to use On Document Ready and creating the instance immediately\r\n        //$(document).on('focus.autosize-input', 'input[data-autosize-input]', function (e)\r\n        //{\r\n        //\t$(this).autosizeInput();\r\n        //});\r\n    })(jQuery);\r\n})(Plugins || (Plugins = {}));\r\n\r\n\r\n","\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([\"jquery\",\"lodash\",\"backbone\",\"bootstrap\"], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory(require('jquery'), require('lodash'), require('backbone'), require('bootstrap'));\n  } else {\n    root.docmana = factory(root.jQuery, root._, root.Backbone, root.undefined);\n  }\n}(this, function($, _, Backbone, undefined) {\n\n/*\n * Date Format 1.2.3\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\n * MIT license\n *\n * Includes enhancements by Scott Trenda <scott.trenda.net>\n * and Kris Kowal <cixar.com/~kris.kowal/>\n *\n * Accepts a date, a mask, or a date and a mask.\n * Returns a formatted version of the given date.\n * The date defaults to the current date/time.\n * The mask defaults to dateFormat.masks.default.\n */\n\nvar dateFormat = function () {\n\tvar\ttoken = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZ]|\"[^\"]*\"|'[^']*'/g,\n\t\ttimezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g,\n\t\ttimezoneClip = /[^-+\\dA-Z]/g,\n\t\tpad = function (val, len) {\n\t\t\tval = String(val);\n\t\t\tlen = len || 2;\n\t\t\twhile (val.length < len) val = \"0\" + val;\n\t\t\treturn val;\n\t\t};\n\n\t// Regexes and supporting functions are cached through closure\n\treturn function (date, mask, utc) {\n\t\tvar dF = dateFormat;\n\n\t\t// You can't provide utc if you skip other args (use the \"UTC:\" mask prefix)\n\t\tif (arguments.length == 1 && Object.prototype.toString.call(date) == \"[object String]\" && !/\\d/.test(date)) {\n\t\t\tmask = date;\n\t\t\tdate = undefined;\n\t\t}\n\n\t\t// Passing date through Date applies Date.parse, if necessary\n\t\tdate = date ? new Date(date) : new Date;\n\t\tif (isNaN(date)) throw SyntaxError(\"invalid date\");\n\n\t\tmask = String(dF.masks[mask] || mask || dF.masks[\"default\"]);\n\n\t\t// Allow setting the utc argument via the mask\n\t\tif (mask.slice(0, 4) == \"UTC:\") {\n\t\t\tmask = mask.slice(4);\n\t\t\tutc = true;\n\t\t}\n\n\t\tvar\t_ = utc ? \"getUTC\" : \"get\",\n\t\t\td = date[_ + \"Date\"](),\n\t\t\tD = date[_ + \"Day\"](),\n\t\t\tm = date[_ + \"Month\"](),\n\t\t\ty = date[_ + \"FullYear\"](),\n\t\t\tH = date[_ + \"Hours\"](),\n\t\t\tM = date[_ + \"Minutes\"](),\n\t\t\ts = date[_ + \"Seconds\"](),\n\t\t\tL = date[_ + \"Milliseconds\"](),\n\t\t\to = utc ? 0 : date.getTimezoneOffset(),\n\t\t\tflags = {\n\t\t\t\td:    d,\n\t\t\t\tdd:   pad(d),\n\t\t\t\tddd:  dF.i18n.dayNames[D],\n\t\t\t\tdddd: dF.i18n.dayNames[D + 7],\n\t\t\t\tm:    m + 1,\n\t\t\t\tmm:   pad(m + 1),\n\t\t\t\tmmm:  dF.i18n.monthNames[m],\n\t\t\t\tmmmm: dF.i18n.monthNames[m + 12],\n\t\t\t\tyy:   String(y).slice(2),\n\t\t\t\tyyyy: y,\n\t\t\t\th:    H % 12 || 12,\n\t\t\t\thh:   pad(H % 12 || 12),\n\t\t\t\tH:    H,\n\t\t\t\tHH:   pad(H),\n\t\t\t\tM:    M,\n\t\t\t\tMM:   pad(M),\n\t\t\t\ts:    s,\n\t\t\t\tss:   pad(s),\n\t\t\t\tl:    pad(L, 3),\n\t\t\t\tL:    pad(L > 99 ? Math.round(L / 10) : L),\n\t\t\t\tt:    H < 12 ? \"a\"  : \"p\",\n\t\t\t\ttt:   H < 12 ? \"am\" : \"pm\",\n\t\t\t\tT:    H < 12 ? \"A\"  : \"P\",\n\t\t\t\tTT:   H < 12 ? \"AM\" : \"PM\",\n\t\t\t\tZ:    utc ? \"UTC\" : (String(date).match(timezone) || [\"\"]).pop().replace(timezoneClip, \"\"),\n\t\t\t\to:    (o > 0 ? \"-\" : \"+\") + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n\t\t\t\tS:    [\"th\", \"st\", \"nd\", \"rd\"][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10]\n\t\t\t};\n\n\t\treturn mask.replace(token, function ($0) {\n\t\t\treturn $0 in flags ? flags[$0] : $0.slice(1, $0.length - 1);\n\t\t});\n\t};\n}();\n\n// Some common format strings\ndateFormat.masks = {\n\t\"default\":      \"ddd mmm dd yyyy HH:MM:ss\",\n\tshortDate:      \"m/d/yy\",\n\tmediumDate:     \"mmm d, yyyy\",\n\tlongDate:       \"mmmm d, yyyy\",\n\tfullDate:       \"dddd, mmmm d, yyyy\",\n\tshortTime:      \"h:MM TT\",\n\tmediumTime:     \"h:MM:ss TT\",\n\tlongTime:       \"h:MM:ss TT Z\",\n\tisoDate:        \"yyyy-mm-dd\",\n\tisoTime:        \"HH:MM:ss\",\n\tisoDateTime:    \"yyyy-mm-dd'T'HH:MM:ss\",\n\tisoUtcDateTime: \"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'\"\n};\n\n// Internationalization strings\ndateFormat.i18n = {\n\tdayNames: [\n\t\t\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\",\n\t\t\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"\n\t],\n\tmonthNames: [\n\t\t\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\",\n\t\t\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n\t]\n};\n\n// For convenience...\nDate.prototype.format = function (mask, utc) {\n\treturn dateFormat(this, mask, utc);\n};\n\n\nvar Plugins;\n(function (Plugins) {\n    var AutosizeInputOptions = (function () {\n        function AutosizeInputOptions(space) {\n            if (typeof space === \"undefined\") { space = 30; }\n            this.space = space;\n        }\n        return AutosizeInputOptions;\n    })();\n    Plugins.AutosizeInputOptions = AutosizeInputOptions;\n\n    var AutosizeInput = (function () {\n        function AutosizeInput(input, options) {\n            var _this = this;\n            this._input = $(input);\n            this._options = $.extend({}, AutosizeInput.getDefaultOptions(), options);\n\n            // Init mirror\n            this._mirror = $('<span style=\"position:absolute; top:-999px; left:0; white-space:pre;\"/>');\n\n            // Copy to mirror\n            $.each(['fontFamily', 'fontSize', 'fontWeight', 'fontStyle', 'letterSpacing', 'textTransform', 'wordSpacing', 'textIndent'], function (i, val) {\n                _this._mirror[0].style[val] = _this._input.css(val);\n            });\n            $(\"body\").append(this._mirror);\n\n            // Bind events - change update paste click mousedown mouseup focus blur\n            // IE 9 need keydown to keep updating while deleting (keeping backspace in - else it will first update when backspace is released)\n            // IE 9 need keyup incase text is selected and backspace/deleted is hit - keydown is to early\n            // How to fix problem with hitting the delete \"X\" in the box - but not updating!? mouseup is apparently to early\n            // Could bind separatly and set timer\n            // Add so it automatically updates if value of input is changed http://stackoverflow.com/a/1848414/58524\n            this._input.on(\"keydown keyup input propertychange change\", function (e) {\n                _this.update();\n            });\n\n            // Update\n            (function () {\n                _this.update();\n            })();\n        }\n        AutosizeInput.prototype.getOptions = function () {\n            return this._options;\n        };\n\n        AutosizeInput.prototype.update = function () {\n            var value = this._input.val() || \"\";\n\n            if (value === this._mirror.text()) {\n                // Nothing have changed - skip\n                return;\n            }\n\n            // Update mirror\n            this._mirror.text(value);\n\n            // Calculate the width\n            var newWidth = this._mirror.width() + this._options.space;\n\n            // Update the width\n            this._input.width(newWidth);\n        };\n\n        AutosizeInput.getDefaultOptions = function () {\n            return this._defaultOptions;\n        };\n\n        AutosizeInput.getInstanceKey = function () {\n            // Use camelcase because .data()['autosize-input-instance'] will not work\n            return \"autosizeInputInstance\";\n        };\n        AutosizeInput._defaultOptions = new AutosizeInputOptions();\n        return AutosizeInput;\n    })();\n    Plugins.AutosizeInput = AutosizeInput;\n\n    // jQuery Plugin\n    (function ($) {\n        var pluginDataAttributeName = \"autosize-input\";\n        var validTypes = [\"text\", \"password\", \"search\", \"url\", \"tel\", \"email\", \"number\"];\n\n        // jQuery Plugin\n        $.fn.autosizeInput = function (options) {\n            return this.each(function () {\n                // Make sure it is only applied to input elements of valid type\n                // Or let it be the responsibility of the programmer to only select and apply to valid elements?\n                if (!(this.tagName == \"INPUT\" && $.inArray(this.type, validTypes) > -1)) {\n                    // Skip - if not input and of valid type\n                    return;\n                }\n\n                var $this = $(this);\n\n                if (!$this.data(Plugins.AutosizeInput.getInstanceKey())) {\n                    // If instance not already created and attached\n                    if (options == undefined) {\n                        // Try get options from attribute\n                        options = $this.data(pluginDataAttributeName);\n                    }\n\n                    // Create and attach instance\n                    $this.data(Plugins.AutosizeInput.getInstanceKey(), new Plugins.AutosizeInput(this, options));\n                }\n            });\n        };\n\n        // On Document Ready\n        $(function () {\n            // Instantiate for all with data-provide=autosize-input attribute\n            $(\"input[data-\" + pluginDataAttributeName + \"]\").autosizeInput();\n        });\n        // Alternative to use On Document Ready and creating the instance immediately\n        //$(document).on('focus.autosize-input', 'input[data-autosize-input]', function (e)\n        //{\n        //\t$(this).autosizeInput();\n        //});\n    })(jQuery);\n})(Plugins || (Plugins = {}));\n\n/*\n* jQuery File Download Plugin v1.4.4\n*\n* http://www.johnculviner.com\n*\n* Copyright (c) 2013 - John Culviner\n*\n* Licensed under the MIT license:\n*   http://www.opensource.org/licenses/mit-license.php\n*\n* !!!!NOTE!!!!\n* You must also write a cookie in conjunction with using this plugin as mentioned in the orignal post:\n* http://johnculviner.com/jquery-file-download-plugin-for-ajax-like-feature-rich-file-downloads/\n* !!!!NOTE!!!!\n*/\n\n(function($, window){\n\t// i'll just put them here to get evaluated on script load\n\tvar htmlSpecialCharsRegEx = /[<>&\\r\\n\"']/gm;\n\tvar htmlSpecialCharsPlaceHolders = {\n\t\t\t\t'<': 'lt;',\n\t\t\t\t'>': 'gt;',\n\t\t\t\t'&': 'amp;',\n\t\t\t\t'\\r': \"#13;\",\n\t\t\t\t'\\n': \"#10;\",\n\t\t\t\t'\"': 'quot;',\n\t\t\t\t\"'\": '#39;' /*single quotes just to be safe, IE8 doesn't support &apos;, so use &#39; instead */\n\t};\n\n$.extend({\n    //\n    //$.fileDownload('/path/to/url/', options)\n    //  see directly below for possible 'options'\n    fileDownload: function (fileUrl, options) {\n\n        //provide some reasonable defaults to any unspecified options below\n        var settings = $.extend({\n\n            //\n            //Requires jQuery UI: provide a message to display to the user when the file download is being prepared before the browser's dialog appears\n            //\n            preparingMessageHtml: null,\n\n            //\n            //Requires jQuery UI: provide a message to display to the user when a file download fails\n            //\n            failMessageHtml: null,\n\n            //\n            //the stock android browser straight up doesn't support file downloads initiated by a non GET: http://code.google.com/p/android/issues/detail?id=1780\n            //specify a message here to display if a user tries with an android browser\n            //if jQuery UI is installed this will be a dialog, otherwise it will be an alert\n            //Set to null to disable the message and attempt to download anyway\n            //\n            androidPostUnsupportedMessageHtml: \"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.\",\n\n            //\n            //Requires jQuery UI: options to pass into jQuery UI Dialog\n            //\n            dialogOptions: { modal: true },\n\n            //\n            //a function to call while the dowload is being prepared before the browser's dialog appears\n            //Args:\n            //  url - the original url attempted\n            //\n            prepareCallback: function (url) { },\n\n            //\n            //a function to call after a file download dialog/ribbon has appeared\n            //Args:\n            //  url - the original url attempted\n            //\n            successCallback: function (url) { },\n\n            //\n            //a function to call after a file download dialog/ribbon has appeared\n            //Args:\n            //  responseHtml    - the html that came back in response to the file download. this won't necessarily come back depending on the browser.\n            //                      in less than IE9 a cross domain error occurs because 500+ errors cause a cross domain issue due to IE subbing out the\n            //                      server's error message with a \"helpful\" IE built in message\n            //  url             - the original url attempted\n            //  error           - original error cautch from exception\n            //\n            failCallback: function (responseHtml, url, error) { },\n\n            //\n            // the HTTP method to use. Defaults to \"GET\".\n            //\n            httpMethod: \"GET\",\n\n            //\n            // if specified will perform a \"httpMethod\" request to the specified 'fileUrl' using the specified data.\n            // data must be an object (which will be $.param serialized) or already a key=value param string\n            //\n            data: null,\n\n            //\n            //a period in milliseconds to poll to determine if a successful file download has occured or not\n            //\n            checkInterval: 100,\n\n            //\n            //the cookie name to indicate if a file download has occured\n            //\n            cookieName: \"fileDownload\",\n\n            //\n            //the cookie value for the above name to indicate that a file download has occured\n            //\n            cookieValue: \"true\",\n\n            //\n            //the cookie path for above name value pair\n            //\n            cookiePath: \"/\",\n\n            //\n            //if specified it will be used when attempting to clear the above name value pair\n            //useful for when downloads are being served on a subdomain (e.g. downloads.example.com)\n            //\n            cookieDomain: null,\n\n            //\n            //the title for the popup second window as a download is processing in the case of a mobile browser\n            //\n            popupWindowTitle: \"Initiating file download...\",\n\n            //\n            //Functionality to encode HTML entities for a POST, need this if data is an object with properties whose values contains strings with quotation marks.\n            //HTML entity encoding is done by replacing all &,<,>,',\",\\r,\\n characters.\n            //Note that some browsers will POST the string htmlentity-encoded whilst others will decode it before POSTing.\n            //It is recommended that on the server, htmlentity decoding is done irrespective.\n            //\n            encodeHTMLEntities: true\n\n        }, options);\n\n        var deferred = new $.Deferred();\n\n        //Setup mobile browser detection: Partial credit: http://detectmobilebrowser.com/\n        var userAgent = (navigator.userAgent || navigator.vendor || window.opera).toLowerCase();\n\n        var isIos;                  //has full support of features in iOS 4.0+, uses a new window to accomplish this.\n        var isAndroid;              //has full support of GET features in 4.0+ by using a new window. Non-GET is completely unsupported by the browser. See above for specifying a message.\n        var isOtherMobileBrowser;   //there is no way to reliably guess here so all other mobile devices will GET and POST to the current window.\n\n        if (/ip(ad|hone|od)/.test(userAgent)) {\n\n            isIos = true;\n\n        } else if (userAgent.indexOf('android') !== -1) {\n\n            isAndroid = true;\n\n        } else {\n\n            isOtherMobileBrowser = /avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(userAgent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|e\\-|e\\/|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\\-|2|g)|yas\\-|your|zeto|zte\\-/i.test(userAgent.substr(0, 4));\n\n        }\n\n        var httpMethodUpper = settings.httpMethod.toUpperCase();\n\n        if (isAndroid && httpMethodUpper !== \"GET\" && settings.androidPostUnsupportedMessageHtml) {\n            //the stock android browser straight up doesn't support file downloads initiated by non GET requests: http://code.google.com/p/android/issues/detail?id=1780\n\n            if ($().dialog) {\n                $(\"<div>\").html(settings.androidPostUnsupportedMessageHtml).dialog(settings.dialogOptions);\n            } else {\n                alert(settings.androidPostUnsupportedMessageHtml);\n            }\n\n            return deferred.reject();\n        }\n\n        var $preparingDialog = null;\n\n        var internalCallbacks = {\n\n            onPrepare: function (url) {\n\n                //wire up a jquery dialog to display the preparing message if specified\n                if (settings.preparingMessageHtml) {\n\n                    $preparingDialog = $(\"<div>\").html(settings.preparingMessageHtml).dialog(settings.dialogOptions);\n\n                } else if (settings.prepareCallback) {\n\n                    settings.prepareCallback(url);\n\n                }\n\n            },\n\n            onSuccess: function (url) {\n\n                //remove the perparing message if it was specified\n                if ($preparingDialog) {\n                    $preparingDialog.dialog('close');\n                }\n\n                settings.successCallback(url);\n\n                deferred.resolve(url);\n            },\n\n            onFail: function (responseHtml, url, error) {\n\n                //remove the perparing message if it was specified\n                if ($preparingDialog) {\n                    $preparingDialog.dialog('close');\n                }\n\n                //wire up a jquery dialog to display the fail message if specified\n                if (settings.failMessageHtml) {\n                    $(\"<div>\").html(settings.failMessageHtml).dialog(settings.dialogOptions);\n                }\n\n                settings.failCallback(responseHtml, url, error);\n\n                deferred.reject(responseHtml, url);\n            }\n        };\n\n        internalCallbacks.onPrepare(fileUrl);\n\n        //make settings.data a param string if it exists and isn't already\n        if (settings.data !== null && typeof settings.data !== \"string\") {\n            settings.data = $.param(settings.data);\n        }\n\n\n        var $iframe,\n            downloadWindow,\n            formDoc,\n            $form;\n\n        if (httpMethodUpper === \"GET\") {\n\n            if (settings.data !== null) {\n                //need to merge any fileUrl params with the data object\n\n                var qsStart = fileUrl.indexOf('?');\n\n                if (qsStart !== -1) {\n                    //we have a querystring in the url\n\n                    if (fileUrl.substring(fileUrl.length - 1) !== \"&\") {\n                        fileUrl = fileUrl + \"&\";\n                    }\n                } else {\n\n                    fileUrl = fileUrl + \"?\";\n                }\n\n                fileUrl = fileUrl + settings.data;\n            }\n\n            if (isIos || isAndroid) {\n\n                downloadWindow = window.open(fileUrl);\n                downloadWindow.document.title = settings.popupWindowTitle;\n                window.focus();\n\n            } else if (isOtherMobileBrowser) {\n\n                window.location(fileUrl);\n\n            } else {\n\n                //create a temporary iframe that is used to request the fileUrl as a GET request\n                $iframe = $(\"<iframe>\")\n                    .hide()\n                    .prop(\"src\", fileUrl)\n                    .appendTo(\"body\");\n            }\n\n        } else {\n\n            var formInnerHtml = \"\";\n\n            if (settings.data !== null) {\n\n                $.each(settings.data.replace(/\\+/g, ' ').split(\"&\"), function () {\n\n                    var kvp = this.split(\"=\");\n\n                    //Issue: When value contains sign '=' then the kvp array does have more than 2 items. We have to join value back\n                    var k = kvp[0];\n                    kvp.shift();\n                    var v = kvp.join(\"=\");\n                    kvp = [k, v];\n\n                    var key = settings.encodeHTMLEntities ? htmlSpecialCharsEntityEncode(decodeURIComponent(kvp[0])) : decodeURIComponent(kvp[0]);\n                    if (key) {\n                        var value = settings.encodeHTMLEntities ? htmlSpecialCharsEntityEncode(decodeURIComponent(kvp[1])) : decodeURIComponent(kvp[1]);\n                    formInnerHtml += '<input type=\"hidden\" name=\"' + key + '\" value=\"' + value + '\" />';\n                    }\n                });\n            }\n\n            if (isOtherMobileBrowser) {\n\n                $form = $(\"<form>\").appendTo(\"body\");\n                $form.hide()\n                    .prop('method', settings.httpMethod)\n                    .prop('action', fileUrl)\n                    .html(formInnerHtml);\n\n            } else {\n\n                if (isIos) {\n\n                    downloadWindow = window.open(\"about:blank\");\n                    downloadWindow.document.title = settings.popupWindowTitle;\n                    formDoc = downloadWindow.document;\n                    window.focus();\n\n                } else {\n\n                    $iframe = $(\"<iframe style='display: none' src='about:blank'></iframe>\").appendTo(\"body\");\n                    formDoc = getiframeDocument($iframe);\n                }\n\n                formDoc.write(\"<html><head></head><body><form method='\" + settings.httpMethod + \"' action='\" + fileUrl + \"'>\" + formInnerHtml + \"</form>\" + settings.popupWindowTitle + \"</body></html>\");\n                $form = $(formDoc).find('form');\n            }\n\n            $form.submit();\n        }\n\n\n        //check if the file download has completed every checkInterval ms\n        setTimeout(checkFileDownloadComplete, settings.checkInterval);\n\n\n        function checkFileDownloadComplete() {\n            //has the cookie been written due to a file download occuring?\n\n            var cookieValue = settings.cookieValue;\n            if(typeof cookieValue == 'string') {\n                cookieValue = cookieValue.toLowerCase();\n            }\n\n            var lowerCaseCookie = settings.cookieName.toLowerCase() + \"=\" + cookieValue;\n\n            if (document.cookie.toLowerCase().indexOf(lowerCaseCookie) > -1) {\n\n                //execute specified callback\n                internalCallbacks.onSuccess(fileUrl);\n\n                //remove cookie\n                var cookieData = settings.cookieName + \"=; path=\" + settings.cookiePath + \"; expires=\" + new Date(0).toUTCString() + \";\";\n                if (settings.cookieDomain) cookieData += \" domain=\" + settings.cookieDomain + \";\";\n                document.cookie = cookieData;\n\n                //remove iframe\n                cleanUp(false);\n\n                return;\n            }\n\n            //has an error occured?\n            //if neither containers exist below then the file download is occuring on the current window\n            if (downloadWindow || $iframe) {\n\n                //has an error occured?\n                try {\n\n                    var formDoc = downloadWindow ? downloadWindow.document : getiframeDocument($iframe);\n\n                    if (formDoc && formDoc.body !== null && formDoc.body.innerHTML.length) {\n\n                        var isFailure = true;\n\n                        if ($form && $form.length) {\n                            var $contents = $(formDoc.body).contents().first();\n\n                            try {\n                                if ($contents.length && $contents[0] === $form[0]) {\n                                    isFailure = false;\n                                }\n                            } catch (e) {\n                                if (e && e.number == -2146828218) {\n                                    // IE 8-10 throw a permission denied after the form reloads on the \"$contents[0] === $form[0]\" comparison\n                                    isFailure = true;\n                                } else {\n                                    throw e;\n                                }\n                            }\n                        }\n\n                        if (isFailure) {\n                            // IE 8-10 don't always have the full content available right away, they need a litle bit to finish\n                            setTimeout(function () {\n                                internalCallbacks.onFail(formDoc.body.innerHTML, fileUrl);\n                                cleanUp(true);\n                            }, 100);\n\n                            return;\n                        }\n                    }\n                }\n                catch (err) {\n\n                    //500 error less than IE9\n                    internalCallbacks.onFail('', fileUrl, err);\n\n                    cleanUp(true);\n\n                    return;\n                }\n            }\n\n\n            //keep checking...\n            setTimeout(checkFileDownloadComplete, settings.checkInterval);\n        }\n\n        //gets an iframes document in a cross browser compatible manner\n        function getiframeDocument($iframe) {\n            var iframeDoc = $iframe[0].contentWindow || $iframe[0].contentDocument;\n            if (iframeDoc.document) {\n                iframeDoc = iframeDoc.document;\n            }\n            return iframeDoc;\n        }\n\n        function cleanUp(isFailure) {\n\n            setTimeout(function() {\n\n                if (downloadWindow) {\n\n                    if (isAndroid) {\n                        downloadWindow.close();\n                    }\n\n                    if (isIos) {\n                        if (downloadWindow.focus) {\n                            downloadWindow.focus(); //ios safari bug doesn't allow a window to be closed unless it is focused\n                            if (isFailure) {\n                                downloadWindow.close();\n                            }\n                        }\n                    }\n                }\n\n                //iframe cleanup appears to randomly cause the download to fail\n                //not doing it seems better than failure...\n                //if ($iframe) {\n                //    $iframe.remove();\n                //}\n\n            }, 0);\n        }\n\n\n        function htmlSpecialCharsEntityEncode(str) {\n            return str.replace(htmlSpecialCharsRegEx, function(match) {\n                return '&' + htmlSpecialCharsPlaceHolders[match];\n        \t});\n        }\n        var promise = deferred.promise();\n        promise.abort = function() {\n            cleanUp();\n            $iframe.remove();\n        };\n        return promise;\n    }\n});\n\n})(jQuery, this);\n\n/*jslint browser: true*/\r\n/*jslint jquery: true*/\r\n\r\n/*\r\n * jQuery Hotkeys Plugin\r\n * Copyright 2010, John Resig\r\n * Dual licensed under the MIT or GPL Version 2 licenses.\r\n *\r\n * Based upon the plugin by Tzury Bar Yochay:\r\n * https://github.com/tzuryby/jquery.hotkeys\r\n *\r\n * Original idea by:\r\n * Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/\r\n */\r\n\r\n/*\r\n * One small change is: now keys are passed by object { keys: '...' }\r\n * Might be useful, when you want to pass some other data to your handler\r\n */\r\n\r\n(function(jQuery) {\r\n\r\n  jQuery.hotkeys = {\r\n    version: \"0.2.0\",\r\n\r\n    specialKeys: {\r\n      8: \"backspace\",\r\n      9: \"tab\",\r\n      10: \"return\",\r\n      13: \"return\",\r\n      16: \"shift\",\r\n      17: \"ctrl\",\r\n      18: \"alt\",\r\n      19: \"pause\",\r\n      20: \"capslock\",\r\n      27: \"esc\",\r\n      32: \"space\",\r\n      33: \"pageup\",\r\n      34: \"pagedown\",\r\n      35: \"end\",\r\n      36: \"home\",\r\n      37: \"left\",\r\n      38: \"up\",\r\n      39: \"right\",\r\n      40: \"down\",\r\n      45: \"insert\",\r\n      46: \"del\",\r\n      59: \";\",\r\n      61: \"=\",\r\n      96: \"0\",\r\n      97: \"1\",\r\n      98: \"2\",\r\n      99: \"3\",\r\n      100: \"4\",\r\n      101: \"5\",\r\n      102: \"6\",\r\n      103: \"7\",\r\n      104: \"8\",\r\n      105: \"9\",\r\n      106: \"*\",\r\n      107: \"+\",\r\n      109: \"-\",\r\n      110: \".\",\r\n      111: \"/\",\r\n      112: \"f1\",\r\n      113: \"f2\",\r\n      114: \"f3\",\r\n      115: \"f4\",\r\n      116: \"f5\",\r\n      117: \"f6\",\r\n      118: \"f7\",\r\n      119: \"f8\",\r\n      120: \"f9\",\r\n      121: \"f10\",\r\n      122: \"f11\",\r\n      123: \"f12\",\r\n      144: \"numlock\",\r\n      145: \"scroll\",\r\n      173: \"-\",\r\n      186: \";\",\r\n      187: \"=\",\r\n      188: \",\",\r\n      189: \"-\",\r\n      190: \".\",\r\n      191: \"/\",\r\n      192: \"`\",\r\n      219: \"[\",\r\n      220: \"\\\\\",\r\n      221: \"]\",\r\n      222: \"'\"\r\n    },\r\n\r\n    shiftNums: {\r\n      \"`\": \"~\",\r\n      \"1\": \"!\",\r\n      \"2\": \"@\",\r\n      \"3\": \"#\",\r\n      \"4\": \"$\",\r\n      \"5\": \"%\",\r\n      \"6\": \"^\",\r\n      \"7\": \"&\",\r\n      \"8\": \"*\",\r\n      \"9\": \"(\",\r\n      \"0\": \")\",\r\n      \"-\": \"_\",\r\n      \"=\": \"+\",\r\n      \";\": \": \",\r\n      \"'\": \"\\\"\",\r\n      \",\": \"<\",\r\n      \".\": \">\",\r\n      \"/\": \"?\",\r\n      \"\\\\\": \"|\"\r\n    },\r\n\r\n    // excludes: button, checkbox, file, hidden, image, password, radio, reset, search, submit, url\r\n    textAcceptingInputTypes: [\r\n      \"text\", \"password\", \"number\", \"email\", \"url\", \"range\", \"date\", \"month\", \"week\", \"time\", \"datetime\",\r\n      \"datetime-local\", \"search\", \"color\", \"tel\"],\r\n\r\n    // default input types not to bind to unless bound directly\r\n    textInputTypes: /textarea|input|select/i,\r\n\r\n    options: {\r\n      filterInputAcceptingElements: true,\r\n      filterTextInputs: true,\r\n      filterContentEditable: true\r\n    }\r\n  };\r\n\r\n  function keyHandler(handleObj) {\r\n    if (typeof handleObj.data === \"string\") {\r\n      handleObj.data = {\r\n        keys: handleObj.data\r\n      };\r\n    }\r\n\r\n    // Only care when a possible input has been specified\r\n    if (!handleObj.data || !handleObj.data.keys || typeof handleObj.data.keys !== \"string\") {\r\n      return;\r\n    }\r\n\r\n    var origHandler = handleObj.handler,\r\n      keys = handleObj.data.keys.toLowerCase().split(\" \");\r\n\r\n    handleObj.handler = function(event) {\r\n      //      Don't fire in text-accepting inputs that we didn't directly bind to\r\n      if (this !== event.target &&\r\n        (jQuery.hotkeys.options.filterInputAcceptingElements &&\r\n          jQuery.hotkeys.textInputTypes.test(event.target.nodeName) ||\r\n          (jQuery.hotkeys.options.filterContentEditable && jQuery(event.target).attr('contenteditable')) ||\r\n          (jQuery.hotkeys.options.filterTextInputs &&\r\n            jQuery.inArray(event.target.type, jQuery.hotkeys.textAcceptingInputTypes) > -1))) {\r\n        return;\r\n      }\r\n\r\n      var special = event.type !== \"keypress\" && jQuery.hotkeys.specialKeys[event.which],\r\n        character = String.fromCharCode(event.which).toLowerCase(),\r\n        modif = \"\",\r\n        possible = {};\r\n\r\n      jQuery.each([\"alt\", \"ctrl\", \"shift\"], function(index, specialKey) {\r\n\r\n        if (event[specialKey + 'Key'] && special !== specialKey) {\r\n          modif += specialKey + '+';\r\n        }\r\n      });\r\n\r\n      // metaKey is triggered off ctrlKey erronously\r\n      if (event.metaKey && !event.ctrlKey && special !== \"meta\") {\r\n        modif += \"meta+\";\r\n      }\r\n\r\n      if (event.metaKey && special !== \"meta\" && modif.indexOf(\"alt+ctrl+shift+\") > -1) {\r\n        modif = modif.replace(\"alt+ctrl+shift+\", \"hyper+\");\r\n      }\r\n\r\n      if (special) {\r\n        possible[modif + special] = true;\r\n      }\r\n      else {\r\n        possible[modif + character] = true;\r\n        possible[modif + jQuery.hotkeys.shiftNums[character]] = true;\r\n\r\n        // \"$\" can be triggered as \"Shift+4\" or \"Shift+$\" or just \"$\"\r\n        if (modif === \"shift+\") {\r\n          possible[jQuery.hotkeys.shiftNums[character]] = true;\r\n        }\r\n      }\r\n\r\n      for (var i = 0, l = keys.length; i < l; i++) {\r\n        if (possible[keys[i]]) {\r\n          return origHandler.apply(this, arguments);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  jQuery.each([\"keydown\", \"keyup\", \"keypress\"], function() {\r\n    jQuery.event.special[this] = {\r\n      add: keyHandler\r\n    };\r\n  });\r\n\r\n})(jQuery || this.jQuery || window.jQuery);\r\n\n/*global ActiveXObject, window, console, define, module, jQuery */\r\n//jshint unused:false, strict: false\r\n\r\n/*\r\n    PDFObject v2.0.201604172\r\n    https://github.com/pipwerks/PDFObject\r\n    Copyright (c) 2008-2016 Philip Hutchison\r\n    MIT-style license: http://pipwerks.mit-license.org/\r\n    UMD module pattern from https://github.com/umdjs/umd/blob/master/templates/returnExports.js\r\n*/\r\n\r\n(function () {\r\n\r\n    \"use strict\";\r\n    //jshint unused:true\r\n\r\n    //PDFObject is designed for client-side (browsers), not server-side (node)\r\n    //Will choke on undefined navigator and window vars when run on server\r\n    //Return boolean false and exit function when running server-side\r\n\r\n    if (typeof window === \"undefined\" || typeof navigator === \"undefined\") { return false; }\r\n\r\n    var pdfobjectversion = \"2.0.201604172\",\r\n        supportsPDFs,\r\n\r\n        //declare functions\r\n        createAXO,\r\n        isIE,\r\n        supportsPdfMimeType = (typeof navigator.mimeTypes['application/pdf'] !== \"undefined\"),\r\n        supportsPdfActiveX,\r\n        buildFragmentString,\r\n        log,\r\n        embedError,\r\n        embed,\r\n        getTargetElement,\r\n        generatePDFJSiframe,\r\n        isIOS = (function () { return (/iphone|ipad|ipod/i.test(navigator.userAgent.toLowerCase())); })(),\r\n        generateEmbedElement;\r\n\r\n\r\n    /* ----------------------------------------------------\r\n       Supporting functions\r\n       ---------------------------------------------------- */\r\n\r\n    createAXO = function (type) {\r\n        var ax;\r\n        try {\r\n            ax = new ActiveXObject(type);\r\n        } catch (e) {\r\n            ax = null; //ensure ax remains null\r\n        }\r\n        return ax;\r\n    };\r\n\r\n    //IE11 still uses ActiveX for Adobe Reader, but IE 11 doesn't expose\r\n    //window.ActiveXObject the same way previous versions of IE did\r\n    //window.ActiveXObject will evaluate to false in IE 11, but \"ActiveXObject\" in window evaluates to true\r\n    //so check the first one for older IE, and the second for IE11\r\n    //FWIW, MS Edge (replacing IE11) does not support ActiveX at all, both will evaluate false\r\n    //Constructed as a method (not a prop) to avoid unneccesarry overhead -- will only be evaluated if needed\r\n    isIE = function () { return !!(window.ActiveXObject || \"ActiveXObject\" in window); };\r\n\r\n    //If either ActiveX support for \"AcroPDF.PDF\" or \"PDF.PdfCtrl\" are found, return true\r\n    //Constructed as a method (not a prop) to avoid unneccesarry overhead -- will only be evaluated if needed\r\n    supportsPdfActiveX = function () { return !!(createAXO(\"AcroPDF.PDF\") || createAXO(\"PDF.PdfCtrl\")); };\r\n\r\n    //Determines whether PDF support is available\r\n    supportsPDFs = (supportsPdfMimeType || (isIE() && supportsPdfActiveX()));\r\n\r\n    //Create a fragment identifier for using PDF Open parameters when embedding PDF\r\n    buildFragmentString = function (pdfParams) {\r\n\r\n        var string = \"\",\r\n            prop;\r\n\r\n        if (pdfParams) {\r\n\r\n            for (prop in pdfParams) {\r\n                if (pdfParams.hasOwnProperty(prop)) {\r\n                    string += encodeURIComponent(prop) + \"=\" + encodeURIComponent(pdfParams[prop]) + \"&\";\r\n                }\r\n            }\r\n\r\n            //The string will be empty if no PDF Params found\r\n            if (string) {\r\n\r\n                string = \"#\" + string;\r\n\r\n                //Remove last ampersand\r\n                string = string.slice(0, string.length - 1);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return string;\r\n\r\n    };\r\n\r\n    log = function (msg) {\r\n        if (typeof console !== \"undefined\" && console.log) {\r\n            console.log(\"[PDFObject] \" + msg);\r\n        }\r\n    };\r\n\r\n    embedError = function (msg) {\r\n        log(msg);\r\n        return false;\r\n    };\r\n\r\n    getTargetElement = function (targetSelector) {\r\n\r\n        //Default to body for full-browser PDF\r\n        var targetNode = document.body;\r\n\r\n        //If a targetSelector is specified, check to see whether\r\n        //it's passing a selector, jQuery object, or an HTML element\r\n\r\n        if (typeof targetSelector === \"string\") {\r\n\r\n            //Is CSS selector\r\n            targetNode = document.querySelector(targetSelector);\r\n\r\n        } else if (typeof jQuery !== \"undefined\" && targetSelector instanceof jQuery && targetSelector.length) {\r\n\r\n            //Is jQuery element. Extract HTML node\r\n            targetNode = targetSelector.get(0);\r\n\r\n        } else if (typeof targetSelector.nodeType !== \"undefined\" && targetSelector.nodeType === 1) {\r\n\r\n            //Is HTML element\r\n            targetNode = targetSelector;\r\n\r\n        }\r\n\r\n        return targetNode;\r\n\r\n    };\r\n\r\n    generatePDFJSiframe = function (targetNode, url, pdfOpenFragment, PDFJS_URL, id) {\r\n\r\n        var fullURL = PDFJS_URL + \"?file=\" + encodeURIComponent(url) + pdfOpenFragment;\r\n        var scrollfix = (isIOS) ? \"-webkit-overflow-scrolling: touch; overflow-y: scroll; \" : \"overflow: hidden; \";\r\n        var iframe = \"<div style='\" + scrollfix + \"position: absolute; top: 0; right: 0; bottom: 0; left: 0;'><iframe  \" + id + \" src='\" + fullURL + \"' style='border: none; width: 100%; height: 100%;' frameborder='0'></iframe></div>\";\r\n        targetNode.className += \" pdfobject-container\";\r\n        targetNode.style.position = \"relative\";\r\n        targetNode.style.overflow = \"auto\";\r\n        targetNode.innerHTML = iframe;\r\n        return targetNode.getElementsByTagName(\"iframe\")[0];\r\n\r\n    };\r\n\r\n    generateEmbedElement = function (targetNode, targetSelector, url, pdfOpenFragment, width, height, id) {\r\n\r\n        var style = \"\";\r\n\r\n        if (targetSelector && targetSelector !== document.body) {\r\n            style = \"width: \" + width + \"; height: \" + height + \";\";\r\n        } else {\r\n            style = \"position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100%;\";\r\n        }\r\n\r\n        targetNode.className += \" pdfobject-container\";\r\n        targetNode.innerHTML = \"<embed \" + id + \" class='pdfobject' src='\" + url + pdfOpenFragment + \"' type='application/pdf' style='overflow: auto; \" + style + \"'/>\";\r\n\r\n        return targetNode.getElementsByTagName(\"embed\")[0];\r\n\r\n    };\r\n\r\n    embed = function (url, targetSelector, options) {\r\n\r\n        //Ensure URL is available. If not, exit now.\r\n        if (typeof url !== \"string\") { return embedError(\"URL is not valid\"); }\r\n\r\n        //If targetSelector is not defined, convert to boolean\r\n        targetSelector = (typeof targetSelector !== \"undefined\") ? targetSelector : false;\r\n\r\n        //Ensure options object is not undefined -- enables easier error checking below\r\n        options = (typeof options !== \"undefined\") ? options : {};\r\n\r\n        //Get passed options, or set reasonable defaults\r\n        var id = (options.id && typeof options.id === \"string\") ? \"id='\" + options.id + \"'\" : \"\",\r\n            page = (options.page) ? options.page : false,\r\n            pdfOpenParams = (options.pdfOpenParams) ? options.pdfOpenParams : {},\r\n            fallbackLink = (typeof options.fallbackLink !== \"undefined\") ? options.fallbackLink : true,\r\n            width = (options.width) ? options.width : \"100%\",\r\n            height = (options.height) ? options.height : \"100%\",\r\n            forcePDFJS = (typeof options.forcePDFJS === \"boolean\") ? options.forcePDFJS : false,\r\n            PDFJS_URL = (options.PDFJS_URL) ? options.PDFJS_URL : false,\r\n            targetNode = getTargetElement(targetSelector),\r\n            fallbackHTML = \"\",\r\n            pdfOpenFragment = \"\",\r\n            fallbackHTML_default = \"<p>This browser does not support inline PDFs. Please download the PDF to view it: <a href='[url]'>Download PDF</a></p>\";\r\n\r\n        //If target element is specified but is not valid, exit without doing anything\r\n        if (!targetNode) { return embedError(\"Target element cannot be determined\"); }\r\n\r\n\r\n        //page option overrides pdfOpenParams, if found\r\n        if (page) {\r\n            pdfOpenParams.page = page;\r\n        }\r\n\r\n        //Stringify optional Adobe params for opening document (as fragment identifier)\r\n        pdfOpenFragment = buildFragmentString(pdfOpenParams);\r\n\r\n        //Do the dance\r\n        if (forcePDFJS && PDFJS_URL) {\r\n\r\n            return generatePDFJSiframe(targetNode, url, pdfOpenFragment, PDFJS_URL, id);\r\n\r\n        } else if (supportsPDFs) {\r\n\r\n            return generateEmbedElement(targetNode, targetSelector, url, pdfOpenFragment, width, height, id);\r\n\r\n        } else {\r\n\r\n            if (PDFJS_URL) {\r\n\r\n                return generatePDFJSiframe(targetNode, url, pdfOpenFragment, PDFJS_URL, id);\r\n\r\n            } else if (fallbackLink) {\r\n\r\n                fallbackHTML = (typeof fallbackLink === \"string\") ? fallbackLink : fallbackHTML_default;\r\n                targetNode.innerHTML = fallbackHTML.replace(/\\[url\\]/g, url);\r\n\r\n            }\r\n\r\n            return embedError(\"This browser does not support embedded PDFs\");\r\n\r\n        }\r\n\r\n    };\r\n\r\n    window.PDFObject = {\r\n        embed: function (a, b, c) { return embed(a, b, c); },\r\n        pdfobjectversion: (function () { return pdfobjectversion; })(),\r\n        supportsPDFs: (function () { return supportsPDFs; })()\r\n    };\r\n})();\n(function () {\r\n    \"use strict\";\r\n\r\n    window.docmana = {};\r\n\r\n    docmana.VERSION = '0.1.0';\r\n    docmana.lang = 'zh-CN';\r\n\r\n    docmana.DEFAULTS = {\r\n        store: {\r\n            url: null,\r\n            requestData: {\r\n                folder: null,\r\n                subFolder: null\r\n            }\r\n        },\r\n        // navigation, new, open, clipboard, organize, view, select\r\n        commands: [\r\n            ['navigation', ['back', 'forward']],\r\n            ['new', ['mkdir', 'upload']],\r\n            ['open', ['open', 'download']],\r\n            ['clipboard', ['cut', 'copy', 'paste']],\r\n            ['organize', ['duplicate', 'rename', 'rm']],\r\n            ['layout', ['layout']],\r\n            ['view', ['sort']],\r\n            ['search', ['search']],\r\n            ['util', ['full']]\r\n            //,\r\n            //['refresh', ['refresh']]\r\n        ],\r\n        workzone:{\r\n            layout: 'list'\r\n        },\r\n        ui: ['workzone', 'toolbar', 'navigation', 'statusbar', 'viewer', 'uploader'],\r\n        kernel: ['store', 'history', 'clipboard']\r\n    }\r\n\r\n    docmana.commands = {};\r\n    docmana.ui = {};\r\n})();\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    // polyfill\r\n    if (typeof Object.create != 'function') {\r\n        Object.create = (function () {\r\n            var Temp = function () { };\r\n            return function (prototype) {\r\n                if (arguments.length > 1) {\r\n                    throw Error('Second argument not supported');\r\n                }\r\n                if (prototype !== Object(prototype) && prototype !== null) {\r\n                    throw TypeError('Argument must be an object or null');\r\n                }\r\n                if (prototype === null) {\r\n                    return {};\r\n                }\r\n                Temp.prototype = prototype;\r\n                var result = new Temp();\r\n                Temp.prototype = null;\r\n                return result;\r\n            };\r\n        })();\r\n    }\r\n\r\n    // underscore polyfill\r\n    if (!_.remove) {\r\n        _.remove = function (data, fn) {\r\n            for (var i = data.length - 1; i > -1; i--) {\r\n                var item = data[i];\r\n                if (fn(item)) {\r\n                    data.splice(i, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    if (!_.orderBy) {\r\n        _.orderBy = function (collection, iteratees, orders) {\r\n            _.each(iteratees, function (iterate, i) {\r\n                collection = _.sortBy(collection, function (item) {\r\n                    return item[iterate];\r\n                });\r\n                if (orders[i] === 'desc') {\r\n                    collection = collection.reverse();\r\n                }\r\n            });\r\n            return collection;\r\n        }\r\n    }\r\n    if (!_.upperFirst) {\r\n        _.upperFirst = function (string) {\r\n            return string.charAt(0).toUpperCase() + string.slice(1);\r\n        }\r\n    }\r\n    if (!_.trim) {\r\n        _.trim = function (str) {\r\n            if (String.prototype.trim) {\r\n                return str.trim();\r\n            }\r\n            return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\r\n        };\r\n    }\r\n\r\n    var extend = function (protoProps, staticProps) {\r\n        var parent = this;\r\n        var child;\r\n\r\n        if (protoProps && _.has(protoProps, 'constructor')) {\r\n            child = protoProps.constructor;\r\n        } else {\r\n            child = function () { return parent.apply(this, arguments); };\r\n        }\r\n\r\n        _.extend(child, parent, staticProps);\r\n\r\n        child.prototype = _.create(parent.prototype, protoProps);\r\n        child.prototype.constructor = child;\r\n\r\n        child.__super__ = parent.prototype;\r\n\r\n        return child;\r\n    };\r\n\r\n    var baseMethods = _.extend({\r\n        main: function () {\r\n            return this.props.parent ? this.props.parent.main : this.props.main;\r\n        },\r\n        store: function () {\r\n            return this.main().store;\r\n        },\r\n        clipboard: function () {\r\n            return this.main().clipboard;\r\n        },\r\n        history: function () {\r\n            return this.main().history;\r\n        },\r\n        toolbar: function () {\r\n            return this.main().ui.toolbar;\r\n        },\r\n        statusbar: function () {\r\n            return this.main().ui.statusbar;\r\n        },\r\n        workzone: function () {\r\n            return this.main().ui.workzone;\r\n        },\r\n        initProps: function (options) {\r\n            this.props = _.extend({}, _.result(this, 'defaults'), options);\r\n        },\r\n        getState: function () {\r\n            return {};\r\n        },\r\n        defaults: {},\r\n        tpl: function (name) {\r\n            return docmana.template.get(name);\r\n        },\r\n        $element: function () {\r\n            return this.$el;\r\n        },\r\n        init: function () { },\r\n        listen: function () { return this; },\r\n        render: function () {\r\n            var tpl = this.tpl(_.result(this, 'templateName'));\r\n            if (tpl) {\r\n                this.$el.html(tpl(this.getState()));\r\n            }\r\n            this.trigger('rendered');\r\n\r\n        }\r\n    });\r\n\r\n    // ComponentBase\r\n    function ComponentBase(options) {\r\n        this.initProps(options);\r\n        this.listen();\r\n        this.init.apply(this, arguments);\r\n    }\r\n\r\n    ComponentBase.prototype = _.extend({\r\n        constructor: ComponentBase\r\n    }, baseMethods, Backbone.Events);\r\n\r\n    ComponentBase.extend = extend;\r\n\r\n    docmana.ComponentBase = ComponentBase;\r\n\r\n    // CommandBase\r\n    docmana.CommandBase = ComponentBase.extend({\r\n        setState: function ($el) {\r\n            $el = $el || this.$element();\r\n            if ($el) {\r\n                if (this.canExec()) {\r\n                    this.enable();\r\n                } else {\r\n                    this.disable();\r\n                }\r\n            }\r\n        },\r\n        enable: function () {\r\n            this.$element().removeClass('disabled').removeAttr('disabled');\r\n        },\r\n        disable: function () {\r\n            this.$element().addClass('disabled').attr('disabled', 'disabeld');\r\n        },\r\n        canExec: function () {\r\n            var result = true;\r\n\r\n            if (this.enabledWhen) {\r\n                var selected = this.workzone().select();\r\n                if (this.enabledWhen === 'selected' && selected.length <= 0) {\r\n                    result = false;\r\n                } else {\r\n                    if (this.enabledWhen === 'single' && selected.length !== 1) {\r\n                        result = false;\r\n                    } else {\r\n                        if (this.enabledWhen === 'multiple' && selected.length < 1) {\r\n                            result = false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (result && this.props.canExec) {\r\n                result = this.props.canExec.call(this);\r\n            }\r\n         \r\n            return result;\r\n        },\r\n\r\n        exec: function () { },\r\n        listenUI: function () {\r\n            if (this.enabledWhen) {\r\n                this.listenTo(this.workzone(), 'selected refresh', function () {\r\n                    this.setState();\r\n                });\r\n            }\r\n        },\r\n        shortcutExec: function () {\r\n            if (this.canExec()) {\r\n                this.exec();\r\n            }\r\n        },\r\n        render: function () {\r\n            var params = {\r\n                name: this.name,\r\n                icon: this.icon || 'docmana-icon docmana-icon-' + this.name,\r\n                shortcuts: this.shortcuts == null ? \"\" : '(' + this.shortcuts + ')'\r\n            };\r\n            var tpl = this.tpl(this.templateName);\r\n            var output = tpl(params);\r\n            this.$el = $(output);\r\n            this.trigger('rendered');\r\n            this.listenUI();\r\n            this.setState();\r\n            return this.$el;\r\n        }\r\n\r\n    });\r\n\r\n\r\n    docmana.ViewBase = Backbone.View.extend(_.extend({\r\n        initialize: function (options) {\r\n            this.initProps(options);\r\n            this.listen();\r\n            if (this.props.autoAction) {\r\n                this.events || (this.events = {});\r\n                _.extend(this.events, {\r\n                    'click [data-action]': '_actionHandler',\r\n                    'click [data-command]': '_commandHandler'\r\n                });\r\n                this.delegateEvents();\r\n            }\r\n\r\n            this.init.apply(this, arguments);\r\n\r\n            this.props.autoRender && this.render();\r\n        },\r\n        _commandHandler: function (e) {\r\n            var $target = $(e.currentTarget);\r\n            var name = $target.attr('data-command');\r\n            var command = this.main().command(name);\r\n            if (command && command.canExec()) {\r\n                command.exec($target.data());\r\n            }\r\n        },\r\n        _actionHandler: function (e, context) {\r\n            e.preventDefault();\r\n            //e.stopImmediatePropagation();\r\n\r\n            context || (context = this);\r\n            var $el = $(e.currentTarget);\r\n            if ($el.closest('script').length > 0) return;\r\n\r\n            var actionName = '_' + $el.data().action;\r\n            if (actionName.indexOf('Handler') < 0) {\r\n                actionName = actionName + 'Handler';\r\n            }\r\n\r\n            context[actionName] && context[actionName](e);\r\n        }\r\n    }, baseMethods));\r\n\r\n    docmana.CommandContainer = docmana.ViewBase.extend({\r\n        _getCommandOptions: function () {\r\n            var myCommands = this.props.commands || [];\r\n            return _.filter(this.main().props.commands, function (config) {\r\n                var groupName = config[0];\r\n                return (_.find(myCommands, function (c) {\r\n                    var name = _.isString(c) ? c : c.name;\r\n                    return name === groupName;\r\n                })) != null;\r\n            });\r\n        },\r\n        _getCommandGroups: function () {\r\n            var that = this;\r\n            var result = {};\r\n            _.forEach(this._getCommandOptions(), function (pair) {\r\n                var name = pair[0];\r\n                var cmds = pair[1];\r\n                result[name] = _.compact(_.map(cmds, function (name) {\r\n                    var command = that.main().command(name);\r\n                    return command;\r\n                }));\r\n            });\r\n            return result;\r\n        },\r\n        _getCommandGroupDom: function (cmds, name) {\r\n            if (cmds.length > 0) {\r\n                var $group = $(this.tpl('toolbarBtnGroup')({\r\n                    name: name\r\n                }));\r\n\r\n                _.forEach(cmds, function (cmd) {\r\n                    $group.append(cmd.render());\r\n                });\r\n\r\n                return $group;\r\n            }\r\n            return '';\r\n        },\r\n        _getCommandAppendTo: function (name) {\r\n            var cmd = _.find(this.props.commands, function (cmd) {\r\n                return cmd.name === name;\r\n            });\r\n            return cmd == null ? this.$el : this.$(cmd.to);\r\n        },\r\n        _renderCommands: function () {\r\n            var cmdGroups = this._getCommandGroups();\r\n            var that = this;\r\n            _.forEach(cmdGroups, function (cmds, name) {\r\n                that._getCommandAppendTo(name).append(that._getCommandGroupDom(cmds, name));\r\n            });\r\n        }\r\n    });\r\n\r\n})();\r\n\r\n\n(function () {\r\n    \"use strict\";\r\n\r\n    docmana.utils = {\r\n        // 格式化字符串，类似 C# string.format\r\n        formatString: function () {\r\n            var s = arguments[0];\r\n            for (var i = 0; i < arguments.length - 1; i++) {\r\n                var reg = new RegExp(\"\\\\{\" + i + \"\\\\}\", \"gm\");\r\n                s = s.replace(reg, arguments[i + 1]);\r\n            }\r\n            return s;\r\n        },\r\n        formatFileSize: function (bytes, onlyKb, si) {\r\n            if (si == null) si = true;\r\n            if (onlyKb == null) onlyKb = false;\r\n            var thresh = si ? 1000 : 1024;\r\n            var units = si ? ['KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'] : ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\r\n            var u = -1;\r\n            var fixed = 1;\r\n            if (onlyKb) {\r\n                bytes /= thresh;\r\n                u = 0;\r\n                fixed = 0;\r\n                if (bytes < 1 && bytes > 0) {\r\n                    bytes = 1;\r\n                }\r\n            } else {\r\n                if (Math.abs(bytes) < thresh) {\r\n\r\n                    return bytes + ' B';\r\n                }\r\n\r\n                do {\r\n                    bytes /= thresh;\r\n                    ++u;\r\n                } while (Math.abs(bytes) >= thresh && u < units.length - 1);\r\n            }\r\n\r\n\r\n            return bytes.toFixed(fixed) + ' ' + units[u];\r\n        },\r\n\r\n        fileNameExtension: function (filename) {\r\n            return '.' + filename.split('.').pop();\r\n        },\r\n        unixTimestamp: function () {\r\n            return Math.round(new Date().getTime() / 1000);\r\n        },\r\n        selectSelectableElement: function (selectableContainer, elementsToSelect) {\r\n            $(\".ui-selected\", selectableContainer)\r\n                .not(elementsToSelect).removeClass(\"ui-selected ui-selectee\").addClass(\"ui-unselecting\");\r\n\r\n            $(elementsToSelect).addClass(\"ui-selecting ui-selectee\");\r\n\r\n            var selectable = selectableContainer.data(\"ui-selectable\");\r\n            selectable._mouseStop(null);\r\n        },\r\n\r\n        setInputSelection: function (input, start, end) {\r\n            input.focus();\r\n            if (input.setSelectionRange) {\r\n                input.setSelectionRange(start, end);\r\n            } else if (typeof input.selectionStart != 'undefined') {\r\n                input.selectionStart = start;\r\n                input.selectionEnd = end;\r\n            } else if (input.createTextRange) {\r\n                var selRange = input.createTextRange();\r\n                selRange.collapse(true);\r\n                selRange.moveStart('character', start);\r\n                selRange.moveEnd('character', end - start);\r\n                selRange.select();\r\n            }\r\n        },\r\n        setInputSelectionWithoutExtension: function ($input) {\r\n            var val = $input.val();\r\n            var endIdx = val.lastIndexOf('.');\r\n            endIdx = endIdx > 0 ? endIdx : val.length;\r\n\r\n            docmana.utils.setInputSelection($input[0], 0, endIdx);\r\n\r\n        },\r\n        inlineEdit: function ($el, callback, mode, isForce) {  // mode: 0: 横向，1： 纵向\r\n            if (mode == null) mode = 0;\r\n            if (isForce == null) isForce = false;\r\n            var originVal = _.trim($el.text());\r\n            var $editor;\r\n\r\n            if (mode === 0) {\r\n                $editor = $('<input name=\"temp\" type=\"text\" class=\"inline-edit\" />').autosizeInput();\r\n            } else {\r\n                $editor = $('<textarea name=\"temp\" class=\"inline-edit\" tabindex=\"2\"></textarea>');\r\n            }\r\n            $editor\r\n                .val(originVal)\r\n\r\n                //.on('change keyup keydown paste cut', function () {\r\n                //    if (mode === 0) {\r\n                //        debugger;\r\n                //        $(this).width($(this).val().length * 13 + 20);\r\n                //    } else {\r\n                //        $(this).height(this.scrollHeight);\r\n                //    }\r\n                //})\r\n                .on('keydown', function (e) {\r\n                    if (e.keyCode === 13) {\r\n                        e.preventDefault();\r\n                        $(this).blur();\r\n                    }\r\n                });\r\n\r\n            // 初始化高度\r\n            if (mode === 0) {\r\n                $editor.width($el.outerWidth() + 30);\r\n            } else {\r\n                $editor.height($el.outerHeight());\r\n            }\r\n\r\n\r\n            $el.hide();\r\n            $el.after($editor);\r\n            // $editor.show();\r\n            $editor.focus();\r\n\r\n            $editor.on('blur', function () {\r\n                var val = $(this).val();\r\n                if (isForce || (val !== \"\" && originVal !== val)) {\r\n                    $el.text(val);\r\n                    callback(val);\r\n                }\r\n\r\n                $(this).remove();\r\n                $el.show();\r\n            });\r\n\r\n            docmana.utils.setInputSelectionWithoutExtension($editor);\r\n\r\n        },\r\n        ieVersion: function () {\r\n            var ua = window.navigator.userAgent;\r\n            var msie = ua.indexOf(\"MSIE \");\r\n\r\n            if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\\:11\\./))  // If Internet Explorer, return version number\r\n            {\r\n                return parseInt(ua.substring(msie + 5, ua.indexOf(\".\", msie)));\r\n            }\r\n            else  // If another browser, return false\r\n            {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n})();\r\n\r\n\r\n\n'use strict';\nwindow.docmana.templates = Object.create(null);\nwindow.docmana.templates['breadcrumb.html'] = '<% _.forEach(data, function(item, i){ %>\\n    <% if(i === data.length - 1){ %>\\n    <li class=\"active\">\\n        <span>\\n            <%- item.name %>\\n        </span>\\n    </li>\\n    <% }else{ %>\\n    <li>\\n        <a href=\"#\" data-hash=\"<%- item.hash %>\">\\n            <%- item.name %>\\n        </a>\\n    </li>\\n    <% } %>\\n<% }); %>';\nwindow.docmana.templates['fileInfo.html'] = '<div class=\"docmana-file-info\">\\n    <div class=\"media center-block\">\\n        <div class=\"media-left file-type-large\">\\n            <span class=\"filetype <%- T.name2IconClass(data.name, data.mime) %>\"></span>\\n        </div>\\n        <div class=\"media-body\">\\n            <h4 class=\"media-heading\">\\n                <%- data.name%>\\n            </h4>\\n            <p>\\n            <p>\\n                <%- L(\\'fileType\\') %>:\\n                <%- L(\\'kind\\' + T.mime2Type(data.mime)) %>\\n            </p>\\n            <p>\\n                <%- L(\\'fileDateModified\\') %>:\\n                <%- T.formatDate(data.ts) %>\\n            </p>\\n            <p>\\n                <%- L(\\'fileSize\\') %>:\\n                <%- T.formatFileSize(data.size) %>\\n            </p>\\n            </p>\\n        </div>\\n    </div>\\n</div>\\n';\nwindow.docmana.templates['main.html'] = '<div class=\"docmana-panel\">\\n    <div class=\"docmana-heading panel-heading\">\\n        <div class=\"docmana-toolbar btn-toolbar\"></div>\\n    </div>\\n    <div class=\"docmana-body panel-body no-padding\">\\n        <div class=\"docmana-navigation clearfix\"></div>\\n        <div class=\"docmana-workzone\"></div>\\n    </div>\\n    <div class=\"docmana-footer panel-footer\">\\n        <div class=\"docmana-statusbar clearfix\"></div>\\n    </div>\\n</div>\\n\\n<div class=\"modal fade\" id=\"modal-file\" tabindex=\"-1\" role=\"dialog\">\\n    <div class=\"modal-dialog modal-lg static\" role=\"document\">\\n        <div class=\"modal-content docmana-viewer\"></div>\\n    </div>\\n</div>\\n<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\\n    <div class=\"modal-dialog\" role=\"document\">\\n        <div class=\"modal-content docmana-uploader\"></div>\\n    </div>\\n</div>';\nwindow.docmana.templates['navigation.html'] = '<div class=\"nav-group\"></div>\\n<div class=\"breadcrumb-group form-control input-sm\">\\n    <ul class=\"docmana-breadcrumb breadcrumb no-margin\"></ul>\\n</div>\\n<div class=\"search-group btn-toolbar\"></div>\\n<div class=\"refresh-group\"></div>\\n\\n';\nwindow.docmana.templates['statusbar.html'] = '<div class=\"status-text pull-left btn-sm\"></div>\\n<div class=\"pull-right btn-toolbar\">\\n    <div class=\"uploader btn-group\"></div>\\n    <div class=\"layout btn-group\"></div>\\n</div>';\nwindow.docmana.templates['statusbarText.html'] = '<span class=\"text-total\">\\n    <%- data.count %>\\n    <%- L(\\'statusbarItems\\') %>\\n</span>\\n<span class=\"text-selected\">\\n    <% if(data.selectedCount > 0){ %>\\n    <%- L(\\'statusbarSelectedItem\\', data.selectedCount) %>\\n\\n    <span class=\"size\">\\n        <%- data.selectedSize %>\\n    </span>\\n    <% } %>\\n</span>';\nwindow.docmana.templates['toolbar.html'] = '<div class=\"right pull-right btn-toolbar\">\\n    \\n</div>';\nwindow.docmana.templates['toolbarBtn.html'] = '<button type=\"button\" class=\"btn btn-default <%- data.name %>\"\\n        data-command=\"<%- data.name %>\"\\n        title=\"<%- L(\\'cmd\\' + _.upperFirst(data.name)) %> <%- data.shortcuts %>\">\\n    <i class=\"<%- data.icon %>\"></i>\\n</button>\\n';\nwindow.docmana.templates['toolbarBtnGroup.html'] = '<div class=\"btn-group btn-group-sm docmana-group-<%- data.name %>\" role=\"group\"></div>';\nwindow.docmana.templates['toolbarBtnLayout.html'] = '<div class=\"btn-group btn-group-sm\" data-toggle=\"buttons\">\\n    <label class=\"btn btn-default\" title=\"<%- L(\\'layoutList\\') %>\">\\n        <input type=\"radio\" name=\"layout\" autocomplete=\"off\" data-layout=\"list\">\\n        <i class=\"docmana-icon docmana-icon-listview\"></i>\\n    </label>\\n    <label class=\"btn btn-default\" title=\"<%- L(\\'layoutLargeIcons\\') %>\">\\n        <input type=\"radio\" name=\"layout\" autocomplete=\"off\" data-layout=\"icons\">\\n        <i class=\"docmana-icon docmana-icon-iconsview\"></i>\\n    </label>\\n</div>\\n';\nwindow.docmana.templates['toolbarBtnSort.html'] = '<div class=\"btn-group btn-group-sm <%- data.name %>\">\\n    <button type=\"button\" class=\"btn btn-default dropdown-toggle\"\\n            data-toggle=\"dropdown\" aria-haspopup=\"true\"\\n            aria-expanded=\"false\"\\n             title=\"<%- L(\\'cmdSort\\') %>\">\\n        <i class=\"<%- data.icon %>\"></i>\\n        <span class=\"caret\"></span>\\n    </button>\\n    <ul class=\"dropdown-menu\">\\n        <li>\\n            <a href=\"#\" data-command=\"sort\" data-field=\"name\">\\n                <i class=\"\"></i>\\n                <%- L(\\'sortByName\\') %>\\n            </a>\\n        </li>\\n        <li>\\n            <a href=\"#\" data-command=\"sort\" data-field=\"size\">\\n                <%- L(\\'sortBySize\\') %>\\n            </a>\\n        </li>\\n        <li>\\n            <a href=\"#\" data-command=\"sort\" data-field=\"mime\">\\n                <%- L(\\'sortByType\\') %>\\n            </a>\\n        </li>\\n        <li>\\n            <a href=\"#\" data-command=\"sort\" data-field=\"ts\">\\n                <%- L(\\'sortByDate\\') %>\\n            </a>\\n        </li>\\n        <li role=\"separator\" class=\"divider\"></li>\\n        <li>\\n            <a href=\"#\" data-command=\"sort\" data-order=\"asc\">\\n                <%- L(\\'sortAscending\\') %>\\n            </a>\\n        </li>\\n        <li>\\n            <a href=\"#\" data-command=\"sort\" data-order=\"desc\">\\n                <%- L(\\'sortDescending\\') %>\\n            </a>\\n        </li>\\n    </ul>\\n</div>\\n';\nwindow.docmana.templates['toolbarBtnUpload.html'] = '<a class=\"btn btn-default <%- data.name %>\" data-command=\"<%- data.name %>\"\\n    title=\"<%- L(\\'cmd\\' + _.upperFirst(data.name)) %>\">\\n    <i class=\"<%- data.icon %>\"></i>\\n    <form enctype=\"multipart/form-data\" method=\"POST\">\\n        <input type=\"file\" name=\"upload[]\" multiple value=\"\" />\\n    </form>\\n</a>';\nwindow.docmana.templates['toolbarSearch.html'] = '<div class=\"form-inline\">\\n    <div class=\"form-group has-feedback\">\\n        <input type=\"text\" class=\"form-control input-sm\" \\n               placeholder=\"<%- L(\\'textSearch\\') %>\">\\n        <span class=\"form-control-feedback\" aria-hidden=\"true\">\\n            <i class=\"fa fa-search\"></i>\\n        </span>\\n    </div>\\n</div>';\nwindow.docmana.templates['uploader.html'] = '<div class=\"modal-header\">\\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\\n        <span aria-hidden=\"true\">&times;</span>\\n    </button>\\n    <h4 class=\"modal-title\"><%- L(\\'textFileUpload\\') %></h4>\\n</div>\\n<div class=\"modal-body no-padding\">\\n    <div class=\"files list-group\"></div>\\n</div>\\n<div class=\"modal-footer clearfix\">\\n    <button type=\"button\" class=\"btn btn-default btn-sm\" data-dismiss=\"modal\">\\n        <%- L(\\'textClose\\') %>\\n    </button>\\n</div>';\nwindow.docmana.templates['uploaderFiles.html'] = '        <% for (var i=0, file; file= data.files[i]; i++) { %>\\n<div class=\"file-upload file\">\\n    <span class=\"list-group-item holder\">.</span>\\n    <div class=\"progress\">\\n        <div class=\"progress-bar progress-bar-info\" style=\"width: 0\"></div>\\n    </div>\\n    <div class=\"info list-group-item clearfix\">\\n        <div class=\"table-row\">\\n            <div class=\"name table-column\">\\n                <%- file.name %>\\n            </div>\\n            <div class=\"size table-column\">\\n                Processing...\\n            </div>\\n            <!--<div class=\"folder pull-left\">\\n        我的文件\\n    </div>-->\\n            <div class=\"status table-column\">\\n                <!--<i class=\"fa fa-check-circle text-success\"></i>-->\\n                <span class=\"percent\"></span>\\n                <span class=\"error\"></span>\\n            </div>\\n            <div class=\"operator table-column\">\\n                <% if (!i && !data.options.autoUpload) { %>\\n                <button class=\"btn btn-primary btn-sm start\" disabled>\\n                    <i class=\"fa fa-upload\"></i>\\n                </button>\\n                <% } %>\\n                <% if (!i) { %>\\n                <button class=\"btn btn-link btn-warning btn-xs cancel\">\\n                    <i class=\"fa fa-ban\"></i>\\n                </button>\\n                <% } %>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n        <% } %>\\n';\nwindow.docmana.templates['uploaderTrigger.html'] = '<div class=\"btn-uploader btn-group-sm\" style=\"position:relative;\"  title=\"<%- L(\\'textFileUpload\\') %>\">\\n    <button class=\"btn btn-default btn-sm\">\\n        <i class=\"fa fa-tasks\"></i>\\n    </button>\\n    <span class=\"badge badge-notify\"></span>\\n</div>';\nwindow.docmana.templates['viewer.html'] = '<div class=\"modal-header\">\\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\\n        <span aria-hidden=\"true\">&times;</span>\\n    </button>\\n    <h4 class=\"modal-title\">�ļ�</h4>\\n</div>\\n<div class=\"modal-body no-padding docmana-viewer-body\">\\n\\n</div>\\n<div class=\"modal-footer clearfix\">\\n    <button type=\"button\" class=\"btn btn-default\"\\n            title=\"<%- L(\\'cmdDownload\\') %>\"\\n            data-action=\"download\">\\n        <i class=\"docmana-icon docmana-icon-download\"></i>\\n    </button>\\n    <button type=\"button\" class=\"btn btn-default\"\\n            title=\"<%- L(\\'textPreviousItem\\') %>\"\\n            data-action=\"previous\">\\n        <i class=\"docmana-icon docmana-icon-back\"></i>\\n    </button>\\n    <button type=\"button\"\\n            class=\"btn btn-default\"\\n            data-action=\"next\"\\n            title=\"<%- L(\\'textNextItem\\') %>\">\\n        <i class=\"docmana-icon docmana-icon-forward\"></i>\\n    </button>\\n</div>';\nwindow.docmana.templates['workzoneIconsView.html'] = '<div class=\"icons-view docmana-workzone-view clearfix\">\\n</div>\\n';\nwindow.docmana.templates['workzoneIconsViewItem.html'] = '<div id=\"<%- data.hash %>\"\\n     title=\"<%= T.fileMetadata(data) %>\"\\n     class=\"drag-block file-list-item <%- T.mime2Class(data.mime) %>\"\\n     data-name=\"<%- data.name %>\">\\n    <div class=\"filetype <%- T.name2IconClass(data.name, data.mime, data)%> drag-block\"></div>\\n    <div class=\"filename drag-block\" title=\"<%- data.name %>\">\\n        <%- data.name %>\\n    </div>\\n</div>\\n';\nwindow.docmana.templates['workzoneListView.html'] = '<div class=\"list-view\">\\n    <div class=\"datatable-header panel panel-default\">\\n        <table class=\"table table-bordered table-condensed no-margin\">\\n            <colgroup>\\n                <col />\\n                <col style=\"width:135px;\" />\\n                <col style=\"width:135px;\" />\\n                <col style=\"width:90px;\" />\\n            </colgroup>\\n            <thead>\\n                <tr>\\n                    <th><%- L(\\'fileName\\') %></th>\\n                    <th><%- L(\\'fileDateModified\\') %></th>\\n                    <th><%- L(\\'fileType\\') %></th>\\n                    <th><%- L(\\'fileSize\\') %></th>\\n                </tr>\\n            </thead>\\n        </table>\\n    </div>\\n    <div class=\"datatable-content\">\\n        <table class=\"table table-condensed no-margin\">\\n            <colgroup>\\n                <col />\\n                <col style=\"width:135px;\" />\\n                <col style=\"width:135px;\" />\\n                <col style=\"width:90px;\" />\\n            </colgroup>\\n            <tbody class=\"docmana-workzone-view\"></tbody>\\n        </table>\\n    </div>\\n</div>\\n';\nwindow.docmana.templates['workzoneListViewItem.html'] = '<tr id=\"<%- data.hash %>\"\\n    class=\"file-list-item <%- T.mime2Class(data.mime) %>\"\\n    data-name=\"<%- data.name %>\">\\n    <td class=\"name\">\\n        <span title=\"<%= T.fileMetadata(data) %>\">\\n            <span class=\"filetype <%- T.name2IconClass(data.name, data.mime, data) %> drag-block\"></span>\\n            <span class=\"filename drag-block\">\\n                <%- data.name %>\\n            </span>\\n        </span>\\n\\n    </td>\\n    <td class=\"metadata date text-muted\">\\n        <span class=\"drag-block\">\\n            <%- T.formatDate(data.ts) %>\\n        </span>\\n    </td>\\n    <td class=\"metadata type text-muted\">\\n        <span class=\"drag-block\">\\n            <%- L(\\'kind\\' + T.mime2Type(data.mime)) %>\\n        </span>\\n    </td>\\n    <td class=\"metadata size text-muted\">\\n        <span class=\"drag-block\">\\n            <%- data.mime === \\'directory\\' ? \\'\\' : T.formatFileSize(data.size, true) %>\\n        </span>\\n    </td>\\n</tr>\\n';\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    docmana.App = docmana.ViewBase.extend({\r\n        init: function () {\r\n            this.ui = {};\r\n            this.commands = {};\r\n\r\n            this._initKernel();\r\n            this._initCommands();\r\n        },\r\n        templateName: 'main',\r\n        defaults: {\r\n            autoRender: true,\r\n            className: 'static',\r\n            panelClassName: 'panel no-margin panel-default',\r\n            commandOptions: {}\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this, 'rendered', function () {\r\n                this.$el.attr('tabindex', 1)\r\n                    .addClass('docmana')\r\n                    .addClass(this.props.className)\r\n                    .find('.docmana-panel')\r\n                    .addClass(this.props.panelClassName);\r\n                this._initUI();\r\n                this.startup();\r\n                var that = this;\r\n\r\n                setTimeout(function () {\r\n                    that.relayout();\r\n                }, 1);\r\n            });\r\n            this.listenTo(this, 'started', function () {\r\n                this.listenTo(this.store, 'syncFail', function (resp) {\r\n                    docmana.ui.notify.error(resp);\r\n                });\r\n            });\r\n        },\r\n        $panel: function () {\r\n            return this.$('.docmana-panel');\r\n        },\r\n        relayout: function () {\r\n            var ieVersion = docmana.utils.ieVersion();\r\n            if (ieVersion && ieVersion <= 9) {\r\n                if (this.$el.hasClass('static') || this.$el.hasClass('fixed')) {\r\n                    this.$('.docmana-body').css({\r\n                        top: this.$('.docmana-heading').outerHeight(),\r\n                        bottom: this.$('.docmana-footer').outerHeight()\r\n                    });\r\n                    this.$('.docmana-workzone').css({\r\n                        top: this.$('.docmana-navigation').outerHeight()\r\n                    });\r\n                    this.$('.docmana-navigation .breadcrumb-group').css({\r\n                        'margin-left': '5px',\r\n                        'width': this.$('.docmana-navigation').width()\r\n                            - this.$('.docmana-navigation .nav-group').outerWidth()\r\n                            - this.$('.docmana-navigation .search-group').outerWidth() - 10\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        _initKernel: function () {\r\n            var that = this;\r\n            _.forEach(this.props.kernel, function (name) {\r\n                that[name] = docmana[name](_.extend({\r\n                    main: that\r\n                }, that.props[name]));\r\n            });\r\n        },\r\n        _initUI: function () {\r\n            var that = this;\r\n            _.forEach(this.props.ui, function (name) {\r\n                that.ui[name] = docmana.ui[name](_.extend({\r\n                    el: that.$('.docmana-' + name),\r\n                    main: that\r\n                }, that.props[name]));\r\n            });\r\n\r\n            this.$el.on('focus', function () {\r\n                //  that.ui.workzone && that.ui.workzone.$el.focus();\r\n            });\r\n        },\r\n        _initCommands: function () {\r\n            var that = this;\r\n            _.forEach(_.flatten(this.props.commands, true), function (cmds) {\r\n\r\n                if (_.isArray(cmds)) {\r\n\r\n                    _.forEach(cmds, function (cmd) {\r\n                        var instance = docmana.commands[cmd](_.extend({\r\n                            main: that\r\n                        }, that.props.commandOptions[cmd]));\r\n\r\n                        that.commands[cmd] = instance;\r\n                    });\r\n                }\r\n\r\n            });\r\n        },\r\n        command: function (name) {\r\n            return this.commands[name];\r\n        },\r\n        exec: function () {\r\n            var args = _.toArray(arguments);\r\n            var name = args.shift();\r\n            var isForce = args.shift();\r\n            var cmd = this.command(name);\r\n\r\n            if (isForce || (cmd && cmd.canExec())) {               \r\n                cmd.exec.apply(cmd, args);\r\n            }\r\n        },\r\n        focus: function () {\r\n            this.$el.focus();\r\n        },\r\n        startup: function () {\r\n            //var a = this.$el[0].outerWidth;\r\n            this.trigger('started');\r\n            this.store.open(null, 1);\r\n        }\r\n    });\r\n\r\n    // 插件化\r\n    function Plugin(option) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            var data = $this.data('docmana');\r\n            var options = $.extend({\r\n                el: this\r\n            }, docmana.DEFAULTS, $this.data(), typeof option == 'object' && option);\r\n\r\n            if (!data) $this.data('docmana', (data = new docmana.App(options)));\r\n            if (typeof option == 'string') data[option]();\r\n        });\r\n    }\r\n\r\n    $.fn.docmana = Plugin;\r\n    $.fn.docmana.Constructor = docmana;\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var Clipboard = docmana.ComponentBase.extend({\r\n        init: function (options) {\r\n            this._data = [];\r\n            this.isCut = 0;\r\n        },\r\n        listen: function () {\r\n           // this.listenTo()\r\n        },\r\n        data: function (data, empty) {\r\n            if (data != null && (empty || data.length > 0)) {\r\n                this._data = data;\r\n                this.trigger('change', this._data);\r\n            }\r\n            return this._data;\r\n        },\r\n        cut: function (data) {\r\n            this.isCut = 1;\r\n            this.data(data);\r\n        },\r\n        copy: function (data) {\r\n            this.isCut = 0;\r\n            this.data(data);\r\n        },\r\n        paste: function () {\r\n            if (this.isEmpty()) return;\r\n\r\n            var that = this;\r\n            var targets = this.getIds();\r\n            var destDir = this.store().cwd().hash;\r\n            var srcDir = this.getSrcDir();\r\n\r\n            // 复制可无限粘贴，剪切则不能\r\n            // TODO: 当出现同名文件时，弹出对话框让用户选择，使用 deferred\r\n            if (this.isCut) {\r\n                this.store().moveTo(destDir, targets, srcDir).done(function () {\r\n                    that.empty();\r\n                });\r\n            } else {\r\n                this.store().copyTo(srcDir, destDir, targets);\r\n            }\r\n        },\r\n        empty: function () {\r\n            this.data([], true);\r\n        },\r\n        getSrcDir: function () {\r\n            return this._data[0].phash;\r\n        },\r\n        getIds: function () {\r\n            return _.map(this.data(), function (item) {\r\n                return item.hash;\r\n            });\r\n        },\r\n        isEmpty: function () {\r\n            return this.data().length === 0;\r\n        }\r\n\r\n    });\r\n\r\n    docmana.clipboard = function (options) {\r\n        return new Clipboard(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var History = docmana.ComponentBase.extend({\r\n        init: function (options) {\r\n            this.position = null;\r\n            this._data = [];\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this.main().store, 'cwdChange', function () {\r\n                var cwd = this.main().store.cwd();\r\n                var idx = _.findIndex(this._data, function (item) {\r\n                    return item.hash === cwd.hash;\r\n                });\r\n                if (idx < 0) {\r\n                    this.add(cwd);\r\n                    this.position = this._data.length - 1;\r\n                } else {\r\n                    this.position = idx;\r\n                }\r\n\r\n                this.trigger('change', this._data);\r\n            });\r\n        },\r\n        byId: function (id) {\r\n            return _.find(this._data, function(item) {\r\n                return item.hash === id;\r\n            });\r\n        },\r\n        getPath: function () {\r\n            return this._data.slice(0, this.position + 1);\r\n        },\r\n        add: function (item) {\r\n\r\n            if (this.position < this._data.length - 1) {\r\n                this._data.splice(this.position + 1, this._data.length - 1 - this.position);\r\n            }\r\n            this._data.push(item);\r\n        },\r\n        forward: function () {\r\n            if (this.canForward()) {\r\n                this.position = this.position + 1;\r\n                this.triggerOpen();\r\n            }\r\n        },\r\n        getCurrHash: function () {\r\n            var data = this._data[this.position];\r\n            return data != null ? data.hash : data;\r\n        },\r\n        back: function () {\r\n            if (this.canBack()) {\r\n                this.position = this.position - 1;\r\n                this.triggerOpen();\r\n            }\r\n        },\r\n        triggerOpen: function () {\r\n            this.main().store.open(this.getCurrHash());\r\n        },\r\n        canForward: function () {\r\n            return this.position + 1 < this._data.length;\r\n        },\r\n        canBack: function () {\r\n            return this._data.length >= 2 && this.position !== 0;\r\n        },\r\n\r\n        // TODO: 存储到 localstorage\r\n        storeHistory: function () {\r\n\r\n        },\r\n        restoreHistory: function () {\r\n\r\n        }\r\n\r\n    });\r\n\r\n    docmana.history = function (options) {\r\n        return new History(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    docmana.mimeTypes = {\r\n        'unknown': 'Unknown',\r\n        'directory': 'Folder',\r\n        'symlink': 'Alias',\r\n        'symlink-broken': 'AliasBroken',\r\n        'application/x-empty': 'TextPlain',\r\n        'application/postscript': 'Postscript',\r\n        'application/vnd.ms-office': 'MsOffice',\r\n        'application/msword': 'MsWord',\r\n        'application/vnd.ms-word': 'MsWord',\r\n        'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'MsWord',\r\n        'application/vnd.ms-word.document.macroEnabled.12': 'MsWord',\r\n        'application/vnd.openxmlformats-officedocument.wordprocessingml.template': 'MsWord',\r\n        'application/vnd.ms-word.template.macroEnabled.12': 'MsWord',\r\n        'application/vnd.ms-excel': 'MsExcel',\r\n        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'MsExcel',\r\n        'application/vnd.ms-excel.sheet.macroEnabled.12': 'MsExcel',\r\n        'application/vnd.openxmlformats-officedocument.spreadsheetml.template': 'MsExcel',\r\n        'application/vnd.ms-excel.template.macroEnabled.12': 'MsExcel',\r\n        'application/vnd.ms-excel.sheet.binary.macroEnabled.12': 'MsExcel',\r\n        'application/vnd.ms-excel.addin.macroEnabled.12': 'MsExcel',\r\n        'application/vnd.ms-powerpoint': 'MsPP',\r\n        'application/vnd.openxmlformats-officedocument.presentationml.presentation': 'MsPP',\r\n        'application/vnd.ms-powerpoint.presentation.macroEnabled.12': 'MsPP',\r\n        'application/vnd.openxmlformats-officedocument.presentationml.slideshow': 'MsPP',\r\n        'application/vnd.ms-powerpoint.slideshow.macroEnabled.12': 'MsPP',\r\n        'application/vnd.openxmlformats-officedocument.presentationml.template': 'MsPP',\r\n        'application/vnd.ms-powerpoint.template.macroEnabled.12': 'MsPP',\r\n        'application/vnd.ms-powerpoint.addin.macroEnabled.12': 'MsPP',\r\n        'application/vnd.openxmlformats-officedocument.presentationml.slide': 'MsPP',\r\n        'application/vnd.ms-powerpoint.slide.macroEnabled.12': 'MsPP',\r\n        'application/pdf': 'PDF',\r\n        'application/xml': 'XML',\r\n        'application/vnd.oasis.opendocument.text': 'OO',\r\n        'application/vnd.oasis.opendocument.text-template': 'OO',\r\n        'application/vnd.oasis.opendocument.text-web': 'OO',\r\n        'application/vnd.oasis.opendocument.text-master': 'OO',\r\n        'application/vnd.oasis.opendocument.graphics': 'OO',\r\n        'application/vnd.oasis.opendocument.graphics-template': 'OO',\r\n        'application/vnd.oasis.opendocument.presentation': 'OO',\r\n        'application/vnd.oasis.opendocument.presentation-template': 'OO',\r\n        'application/vnd.oasis.opendocument.spreadsheet': 'OO',\r\n        'application/vnd.oasis.opendocument.spreadsheet-template': 'OO',\r\n        'application/vnd.oasis.opendocument.chart': 'OO',\r\n        'application/vnd.oasis.opendocument.formula': 'OO',\r\n        'application/vnd.oasis.opendocument.database': 'OO',\r\n        'application/vnd.oasis.opendocument.image': 'OO',\r\n        'application/vnd.openofficeorg.extension': 'OO',\r\n        'application/x-shockwave-flash': 'AppFlash',\r\n        'application/flash-video': 'Flash video',\r\n        'application/x-bittorrent': 'Torrent',\r\n        'application/javascript': 'JS',\r\n        'application/rtf': 'RTF',\r\n        'application/rtfd': 'RTF',\r\n        'application/x-font-ttf': 'TTF',\r\n        'application/x-font-otf': 'OTF',\r\n        'application/x-rpm': 'RPM',\r\n        'application/x-web-config': 'TextPlain',\r\n        'application/xhtml+xml': 'HTML',\r\n        'application/docbook+xml': 'DOCBOOK',\r\n        'application/x-awk': 'AWK',\r\n        'application/x-gzip': 'GZIP',\r\n        'application/x-bzip2': 'BZIP',\r\n        'application/x-xz': 'XZ',\r\n        'application/zip': 'ZIP',\r\n        'application/x-zip': 'ZIP',\r\n        'application/x-rar': 'RAR',\r\n        'application/x-tar': 'TAR',\r\n        'application/x-7z-compressed': '7z',\r\n        'application/x-jar': 'JAR',\r\n        'text/plain': 'TextPlain',\r\n        'text/x-php': 'PHP',\r\n        'text/html': 'HTML',\r\n        'text/javascript': 'JS',\r\n        'text/css': 'CSS',\r\n        'text/rtf': 'RTF',\r\n        'text/rtfd': 'RTF',\r\n        'text/x-c': 'C',\r\n        'text/x-csrc': 'C',\r\n        'text/x-chdr': 'CHeader',\r\n        'text/x-c++': 'CPP',\r\n        'text/x-c++src': 'CPP',\r\n        'text/x-c++hdr': 'CPPHeader',\r\n        'text/x-shellscript': 'Shell',\r\n        'application/x-csh': 'Shell',\r\n        'text/x-python': 'Python',\r\n        'text/x-java': 'Java',\r\n        'text/x-java-source': 'Java',\r\n        'text/x-ruby': 'Ruby',\r\n        'text/x-perl': 'Perl',\r\n        'text/x-sql': 'SQL',\r\n        'text/xml': 'XML',\r\n        'text/x-comma-separated-values': 'CSV',\r\n        'text/x-markdown': 'Markdown',\r\n        'image/x-ms-bmp': 'BMP',\r\n        'image/jpeg': 'JPEG',\r\n        'image/gif': 'GIF',\r\n        'image/png': 'PNG',\r\n        'image/tiff': 'TIFF',\r\n        'image/x-targa': 'TGA',\r\n        'image/vnd.adobe.photoshop': 'PSD',\r\n        'image/xbm': 'XBITMAP',\r\n        'image/pxm': 'PXM',\r\n        'audio/mpeg': 'AudioMPEG',\r\n        'audio/midi': 'AudioMIDI',\r\n        'audio/ogg': 'AudioOGG',\r\n        'audio/mp4': 'AudioMPEG4',\r\n        'audio/x-m4a': 'AudioMPEG4',\r\n        'audio/wav': 'AudioWAV',\r\n        'audio/x-mp3-playlist': 'AudioPlaylist',\r\n        'video/x-dv': 'VideoDV',\r\n        'video/mp4': 'VideoMPEG4',\r\n        'video/mpeg': 'VideoMPEG',\r\n        'video/x-msvideo': 'VideoAVI',\r\n        'video/quicktime': 'VideoMOV',\r\n        'video/x-ms-wmv': 'VideoWM',\r\n        'video/x-flv': 'VideoFlash',\r\n        'video/x-matroska': 'VideoMKV',\r\n        'video/ogg': 'VideoOGG'\r\n    };\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    docmana.resources = {};\r\n\r\n    docmana.resource = function () {\r\n        var resource = docmana.resources[docmana.lang];\r\n        var args = _.toArray(arguments);\r\n        var name = args.shift();\r\n        var r = resource[name];\r\n        if (r == null) {\r\n            return name;\r\n        }\r\n        args.unshift(r);\r\n        return docmana.utils.formatString.apply(docmana.utils, args);\r\n    }\r\n\r\n})();\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var Store = docmana.ComponentBase.extend({\r\n        init: function (options) {\r\n            this._data = [];\r\n            this._sortBy = {\r\n                field: 'name',\r\n                order: 'asc'\r\n            };\r\n            this._cwd = null;\r\n        },\r\n        data: function (data) {\r\n            if (data != null) {\r\n                this._data = data;\r\n            }\r\n            return this._data;\r\n        },\r\n        cwdData: function () {\r\n            var parentHash = this.cwd().hash;\r\n\r\n            return _.filter(this._data, function (f) {\r\n                return f.phash === parentHash;\r\n            });\r\n        },\r\n        url: function (name) {\r\n            return this.props.url;\r\n        },\r\n        cwd: function () {\r\n            return this._cwd;\r\n        },\r\n        byId: function (id) {\r\n            return _.find(this._data, function (item) {\r\n                return item.hash === id;\r\n            });\r\n        },\r\n        byName: function (name) {\r\n            return _.find(this._data, function (item) {\r\n                return item.name === name;\r\n            });\r\n        },\r\n        byIds: function (ids) {\r\n            var that = this;\r\n            return _.compact(_.map(ids, function (id) {\r\n                return that.byId(id);\r\n            }));\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this, 'sync', function (resp, request) {\r\n                if (resp.added) {\r\n                    this._data = this._data.concat(resp.added);\r\n                }\r\n                if (resp.removed) {\r\n                    _.remove(this._data, function (n) {\r\n                        return (_.findIndex(resp.removed, function (r) {\r\n                            return n.hash === r;\r\n                        }) >= 0);\r\n                    });\r\n                }\r\n                if (resp.files) {\r\n                    this._data = resp.files;\r\n                }\r\n                if (resp.cwd) {\r\n                    if (this._cwd == null || this._cwd.hash !== resp.cwd.hash) {\r\n                        this._cwd = resp.cwd;\r\n                        this.trigger('cwdChange', this.cwd());\r\n                    }\r\n                }\r\n\r\n                this.cleanData();\r\n\r\n                //TODO: 在更新界面前必须要进行排序\r\n                this.sortBy();\r\n                this.update(request);\r\n            });\r\n\r\n            this.listenTo(this, 'uploaded', function (data) {\r\n                this.trigger('sync', data);\r\n            });\r\n        },\r\n        cleanData: function () {\r\n            // 移除未保存的数据\r\n            _.remove(this._data, function (d) {\r\n                return d.isNew;\r\n            });\r\n        },\r\n        // 排序\r\n        sortBy: function (field, order, folderFirst) {\r\n            if (field != null) {\r\n                this._sortBy.field = field;\r\n            }\r\n            if (order != null) {\r\n                this._sortBy.order = order;\r\n            }\r\n            if (folderFirst == null) { folderFirst = true; }\r\n\r\n            if (folderFirst) {\r\n                var groups = _.groupBy(this._data, function (item) {\r\n                    return item.mime === 'directory';\r\n                });\r\n                groups['true'] = this._baseSortBy(groups['true']);\r\n                groups['false'] = this._baseSortBy(groups['false']);\r\n\r\n                this._data = groups['true'].concat(groups['false']);\r\n            } else {\r\n                this._data = this._baseSortBy(this._data);\r\n            }\r\n\r\n            this.trigger('sort', this._sortBy);\r\n            return this;\r\n        },\r\n        update: function (eventData) {\r\n            eventData || (eventData = {});\r\n            this.trigger('update', this._data, eventData);\r\n        },\r\n        _baseSortBy: function (list) {\r\n            var field = this._sortBy.field;\r\n            var order = this._sortBy.order;\r\n\r\n            if (field === 'name') {\r\n                field = function (item) {\r\n                    return item.name.toLowerCase();\r\n                };\r\n            }\r\n            return _.orderBy(list, [field], [order]);\r\n        },\r\n        mkdir: function (name, target) {\r\n            return this.post({\r\n                cmd: 'mkdir',\r\n                target: target,\r\n                name: name\r\n            });\r\n        },\r\n        // 重命名\r\n        rename: function (name, target) {\r\n            return this.post({\r\n                cmd: 'rename',\r\n                name: name,\r\n                target: target\r\n            });\r\n        },\r\n        // 移动\r\n        moveTo: function (destDir, targets, srcDir) {\r\n            srcDir || (srcDir = this.cwd().hash);\r\n            return this.paste(srcDir, destDir, targets, 1);\r\n        },\r\n        // 复制\r\n        copyTo: function (srcDir, destDir, targets) {\r\n            return this.paste(srcDir, destDir, targets, 0);\r\n        },\r\n        // 打开\r\n        open: function (target, isInit) {\r\n            var that = this;\r\n            return this.fetch({\r\n                cmd: 'open',\r\n                target: target,\r\n                init: isInit\r\n            });\r\n        },\r\n        // 搜索\r\n        search: function (target, q) {\r\n            return this.fetch({\r\n                cmd: 'search',\r\n                target: target,\r\n                q: q\r\n            });\r\n        },\r\n        // 下载\r\n        download: function (id) {\r\n            var url = fileUrl(id, 1);\r\n            $.fileDownload(url);\r\n        },\r\n        content: function (target) {\r\n            var that = this;\r\n            return this.getJSON({\r\n                cmd: 'get',\r\n                target: target\r\n            });\r\n        },\r\n        // 粘贴\r\n        paste: function (srcDir, destDir, targets, isCut) {\r\n            if (srcDir === destDir) {\r\n                return this.duplicate(targets);\r\n            }\r\n\r\n            return this.post({\r\n                cmd: 'paste',\r\n                cut: isCut,\r\n                dst: destDir,\r\n                src: srcDir,\r\n                targets: targets\r\n            });\r\n        },\r\n        // 副本\r\n        duplicate: function (targets) {\r\n            return this.post({\r\n                cmd: 'duplicate',\r\n                targets: targets\r\n            });\r\n        },\r\n        // 上传\r\n        upload: function ($form) {\r\n            var that = this;\r\n            return $form.ajaxSubmit({\r\n                url: this.url(),\r\n                dataType: \"json\",\r\n                data: this.uploadParams(),\r\n                success: function (resp) {\r\n                    that.trigger('sync', resp);\r\n                }\r\n            });\r\n        },\r\n        uploadParams: function() {\r\n            return this._getRequestParams({\r\n                cmd: 'upload',\r\n                target: this.cwd().hash\r\n            });\r\n        },\r\n        getFileExt: function (data) {\r\n            return docmana.utils.fileNameExtension(data.name);\r\n        },\r\n        // 删除\r\n        rm: function (targets) {\r\n            return this.post({\r\n                cmd: 'rm',\r\n                targets: targets\r\n            });\r\n        },\r\n        _getRequestParams: function (data) {\r\n            return $.extend({}, this.props.requestData, data);\r\n        },\r\n        request: function (method, data, sync) {\r\n            var that = this;\r\n            var params = this._getRequestParams(data);\r\n            if (sync == null) sync = true;\r\n            return $.ajax({\r\n                url: this.url(),\r\n                type: method,\r\n                data: params,\r\n                //contentType: \"application/json; charset=utf-8\",\r\n                dataType: \"json\"\r\n            }).fail(function (xhr, resp, x, xx) {\r\n                that.trigger('syncFail', resp);\r\n            }).done(function (resp) {\r\n                if (sync) {\r\n                    that.trigger('sync', resp, params);\r\n                }\r\n            }).always(function (resp) {\r\n               // console.log(resp);\r\n            });\r\n        },\r\n        getJSON: function (data) {\r\n            return this.request('get', data, false);\r\n        },\r\n        // 获取文件Url\r\n        fileUrl: function (target, download) {\r\n            if (download == null) download = 0;\r\n            var params = this._getRequestParams({\r\n                cmd: 'file',\r\n                target: target,\r\n                download: download\r\n            });\r\n            return this.url() + '?' + $.param(params);\r\n        },\r\n        fetch: function (data) {\r\n            return this.request('get', data);\r\n        },\r\n        get: function (data) {\r\n            return this.request('get', data);\r\n        },\r\n        post: function (data) {\r\n            return this.request('post', data);\r\n        }\r\n\r\n    });\r\n\r\n    docmana.store = function (options) {\r\n        return new Store(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n    \"use strict\";\r\n\r\n    var templateHelper = _.extend({\r\n        formatDate: function (unixTs, format) {\r\n            var date = new Date(unixTs * 1000);\r\n            format || (format = 'yyyy/mm/dd HH:MM');\r\n\r\n            return date.format(format);\r\n            //return date.toLocaleDateString(docmana.lang) + ' ' + date.toLocaleTimeString(docmana.lang, {\r\n            //    hour12: false\r\n            //});\r\n        },\r\n        // deprecate\r\n        _mime2ClassDep: function (mime) {\r\n            var prefix = 'ico-';\r\n\r\n            mime = mime.split('/');\r\n\r\n            return prefix + mime[0] + (mime[0] !== 'image' && mime[1] ? ' ' + prefix + mime[1].replace(/(\\.|\\+)/g, '-') : '');\r\n        },\r\n        name2IconClass: function (name, mime, data) {\r\n            var result;\r\n            if (mime === 'directory') {\r\n                result = 'icon-folder';\r\n            } else {\r\n                var parts = name.split('.');\r\n                var prefix = 'icon-';\r\n                result = prefix + parts[parts.length - 1];\r\n            }\r\n            if (data.locked === 1) {\r\n                result += ' icon-locked';\r\n            }\r\n            return result;\r\n        },\r\n        mime2Class: function (mime) {\r\n            if (mime === 'directory') {\r\n                return 'type-directory';\r\n            }\r\n            return 'type-file';\r\n        },\r\n        mime2Type: function (mime) {\r\n            return docmana.mimeTypes[mime];\r\n        },\r\n        fileMetadata: function (data) {\r\n            var lang = docmana.resource;\r\n            var strs = [];\r\n            strs.push(data.name);\r\n            strs.push(lang('fileType') + ': ' + lang('kind' + this.mime2Type(data.mime)));\r\n            if (data.mime !== 'directory') {\r\n                strs.push(lang('fileSize') + ': ' + this.formatFileSize(data.size));\r\n            }\r\n            strs.push(lang('fileDateModified') + ': ' + this.formatDate(data.ts));\r\n            return strs.join(' &#13; ');\r\n        }\r\n    }, docmana.utils);\r\n\r\n    docmana.templateHelper = templateHelper;\r\n    if (!_.templateSettings.imports) {\r\n        _.docmanaTemplateHelper = templateHelper;\r\n        _.docmanaResource = docmana.resource;\r\n    }\r\n    docmana.template = {\r\n        _cache: {}\r\n    };\r\n\r\n    docmana.template.load = function (tplStore) {\r\n        var that = this;\r\n        _.forEach(tplStore, function(tpl, key) {\r\n            that._cache[key] = that.compile(tpl);\r\n        });\r\n    }\r\n\r\n    docmana.template.get = function (key) {\r\n        return this._cache[key + '.html'];\r\n    }\r\n\r\n    docmana.template.compile = function (tpl) {\r\n        if (!_.templateSettings.imports) {\r\n            tpl = tpl.replace(/T\\./g, '_.docmanaTemplateHelper.').replace(/L\\(/g, '_.docmanaResource(');\r\n        }\r\n        return _.template(tpl, {\r\n            'imports': {\r\n                '$': jQuery,\r\n                'T': docmana.templateHelper,\r\n                'L': docmana.resource\r\n            },\r\n            'variable': 'data'\r\n        });\r\n    }\r\n\r\n    docmana.template.load(docmana.templates);\r\n\r\n})();\r\n\r\n\n(function ($) {\r\n\r\n    \"use strict\";\r\n\r\n    var pluginName = \"clearIt\",\r\n        defaults = {\r\n            clearClass: 'clear_input',\r\n            focusAfterClear: true,\r\n            linkText: '&times;',\r\n            callback: null\r\n        };\r\n\r\n    function Plugin(element, options) {\r\n        this.element = element;\r\n        this.$element = $(element);\r\n        this.settings = $.extend({}, defaults, options);\r\n        this._defaults = defaults;\r\n        this._name = pluginName;\r\n        this.init();\r\n    }\r\n\r\n    $.extend(Plugin.prototype, {\r\n        init: function () {\r\n            var that = this;\r\n            var $el = this.$element;\r\n            var $parent = $el.parent();\r\n            var divClass = this.settings.clearClass + '_div';\r\n\r\n            if (!$parent.hasClass(divClass)) {\r\n                $parent\r\n                   .addClass(divClass)\r\n                   .append('<a style=\"position: absolute; cursor: pointer;\" class=\"' + this.settings.clearClass + '\">'\r\n                   + this.settings.linkText + '</a>');\r\n            }\r\n\r\n            this.$btn().on('click', function (e) {\r\n                that.clear();\r\n            });\r\n\r\n            $el.on('keyup keydown change focus', function () {\r\n                that.toggleBtn();\r\n                if (!that.hasText()) {\r\n                    that.callback();\r\n                }\r\n            });\r\n\r\n            this.toggleBtn();\r\n\r\n        },\r\n        $btn: function () {\r\n            return this.$element.parent().find('.' + this.settings.clearClass);\r\n        },\r\n        toggleBtn: function () {\r\n            var $btn = this.$btn();\r\n            var method = this.hasText() ? 'show' : 'hide';\r\n            $btn[method]();\r\n            this.layout();\r\n        },\r\n        layout: function () {\r\n            var width = this.$element.outerWidth();\r\n            var height = this.$element.outerHeight();\r\n            var $btn = this.$btn();\r\n            $btn.css({\r\n                top: height / 2 - $btn.height() / 2,\r\n                left: width - height / 2 - $btn.height() / 2 - 10\r\n            });\r\n        },\r\n        callback: function () {\r\n            if (typeof (this.settings.callback) === \"function\") {\r\n                this.settings.callback();\r\n            }\r\n        },\r\n        clear: function () {\r\n\r\n            this.$element.val('').change();\r\n            this.toggleBtn();\r\n\r\n            if (this.settings.focusAfterClear) {\r\n                this.$element.focus();\r\n            }\r\n            this.callback();\r\n        },\r\n        hasText: function () {\r\n            return this.$element.val().replace(/^\\s+|\\s+$/g, '').length > 0;\r\n        }\r\n    });\r\n\r\n    $.fn[pluginName] = function (options) {\r\n        return this.each(function () {\r\n            if (!$.data(this, \"plugin_\" + pluginName)) {\r\n                $.data(this, \"plugin_\" +\r\n                    pluginName, new Plugin(this, options));\r\n            }\r\n        });\r\n    };\r\n\r\n})(jQuery);\r\n\r\n\r\n\r\n\r\n// autosizeinput\r\n// https://github.com/MartinF/jQuery.Autosize.Input\r\nvar Plugins;\r\n(function (Plugins) {\r\n    var AutosizeInputOptions = (function () {\r\n        function AutosizeInputOptions(space) {\r\n            if (typeof space === \"undefined\") { space = 30; }\r\n            this.space = space;\r\n        }\r\n        return AutosizeInputOptions;\r\n    })();\r\n    Plugins.AutosizeInputOptions = AutosizeInputOptions;\r\n\r\n    var AutosizeInput = (function () {\r\n        function AutosizeInput(input, options) {\r\n            var _this = this;\r\n            this._input = $(input);\r\n            this._options = $.extend({}, AutosizeInput.getDefaultOptions(), options);\r\n\r\n            // Init mirror\r\n            this._mirror = $('<span style=\"position:absolute; top:-999px; left:0; white-space:pre;\"/>');\r\n\r\n            // Copy to mirror\r\n            $.each(['fontFamily', 'fontSize', 'fontWeight', 'fontStyle', 'letterSpacing', 'textTransform', 'wordSpacing', 'textIndent'], function (i, val) {\r\n                _this._mirror[0].style[val] = _this._input.css(val);\r\n            });\r\n            $(\"body\").append(this._mirror);\r\n\r\n            // Bind events - change update paste click mousedown mouseup focus blur\r\n            // IE 9 need keydown to keep updating while deleting (keeping backspace in - else it will first update when backspace is released)\r\n            // IE 9 need keyup incase text is selected and backspace/deleted is hit - keydown is to early\r\n            // How to fix problem with hitting the delete \"X\" in the box - but not updating!? mouseup is apparently to early\r\n            // Could bind separatly and set timer\r\n            // Add so it automatically updates if value of input is changed http://stackoverflow.com/a/1848414/58524\r\n            this._input.on(\"keydown keyup input propertychange change\", function (e) {\r\n                _this.update();\r\n            });\r\n\r\n            // Update\r\n            (function () {\r\n                _this.update();\r\n            })();\r\n        }\r\n        AutosizeInput.prototype.getOptions = function () {\r\n            return this._options;\r\n        };\r\n\r\n        AutosizeInput.prototype.update = function () {\r\n            var value = this._input.val() || \"\";\r\n\r\n            if (value === this._mirror.text()) {\r\n                // Nothing have changed - skip\r\n                return;\r\n            }\r\n\r\n            // Update mirror\r\n            this._mirror.text(value);\r\n\r\n            // Calculate the width\r\n            var newWidth = this._mirror.width() + this._options.space;\r\n\r\n            // Update the width\r\n            this._input.width(newWidth);\r\n        };\r\n\r\n        AutosizeInput.getDefaultOptions = function () {\r\n            return this._defaultOptions;\r\n        };\r\n\r\n        AutosizeInput.getInstanceKey = function () {\r\n            // Use camelcase because .data()['autosize-input-instance'] will not work\r\n            return \"autosizeInputInstance\";\r\n        };\r\n        AutosizeInput._defaultOptions = new AutosizeInputOptions();\r\n        return AutosizeInput;\r\n    })();\r\n    Plugins.AutosizeInput = AutosizeInput;\r\n\r\n    // jQuery Plugin\r\n    (function ($) {\r\n        var pluginDataAttributeName = \"autosize-input\";\r\n        var validTypes = [\"text\", \"password\", \"search\", \"url\", \"tel\", \"email\", \"number\"];\r\n\r\n        // jQuery Plugin\r\n        $.fn.autosizeInput = function (options) {\r\n            return this.each(function () {\r\n                // Make sure it is only applied to input elements of valid type\r\n                // Or let it be the responsibility of the programmer to only select and apply to valid elements?\r\n                if (!(this.tagName == \"INPUT\" && $.inArray(this.type, validTypes) > -1)) {\r\n                    // Skip - if not input and of valid type\r\n                    return;\r\n                }\r\n\r\n                var $this = $(this);\r\n\r\n                if (!$this.data(Plugins.AutosizeInput.getInstanceKey())) {\r\n                    // If instance not already created and attached\r\n                    if (options == undefined) {\r\n                        // Try get options from attribute\r\n                        options = $this.data(pluginDataAttributeName);\r\n                    }\r\n\r\n                    // Create and attach instance\r\n                    $this.data(Plugins.AutosizeInput.getInstanceKey(), new Plugins.AutosizeInput(this, options));\r\n                }\r\n            });\r\n        };\r\n\r\n        // On Document Ready\r\n        $(function () {\r\n            // Instantiate for all with data-provide=autosize-input attribute\r\n            $(\"input[data-\" + pluginDataAttributeName + \"]\").autosizeInput();\r\n        });\r\n        // Alternative to use On Document Ready and creating the instance immediately\r\n        //$(document).on('focus.autosize-input', 'input[data-autosize-input]', function (e)\r\n        //{\r\n        //\t$(this).autosizeInput();\r\n        //});\r\n    })(jQuery);\r\n})(Plugins || (Plugins = {}));\r\n\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = 'back';\r\n            this.templateName = 'toolbarBtn';\r\n            this.shortcuts = 'Alt+Left';\r\n        },\r\n        listen: function(){\r\n            this.listenTo(this.main().store, 'update', function () {\r\n                this.setState();\r\n            });\r\n        },\r\n        canExec: function() {\r\n            return this.main().history.canBack();\r\n        },\r\n        exec: function() {\r\n            return this.main().history.back();\r\n        }\r\n    });\r\n\r\n    docmana.commands.back = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'copy';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.enabledWhen = 'selected';\r\n            this.shortcuts = 'Ctrl+C';\r\n        },\r\n        exec: function () {\r\n            var selected = this.store().byIds(this.workzone().getIds());\r\n            this.main().clipboard.copy(selected);\r\n        }\r\n    });\r\n\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'cut';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.enabledWhen = 'selected';\r\n            this.shortcuts = 'Ctrl+X';\r\n        },\r\n        exec: function () {\r\n            // 更改剪切时状态\r\n            var workzone = this.workzone();\r\n            workzone.$('.file-list-item.cut').removeClass('cut');\r\n            workzone.select().addClass('cut');\r\n\r\n            var selected = this.store().byIds(workzone.getIds());\r\n            this.main().clipboard.cut(selected);\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'download';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.enabledWhen = 'selectedFiles';\r\n        },\r\n        _filteredIds: function () {\r\n            var selected = this.workzone().getIds();\r\n            var that = this;\r\n            var filtered = _.filter(selected, function (id) {\r\n                return that.store().byId(id).mime !== 'directory';\r\n            });\r\n            return filtered;\r\n        },\r\n\r\n        canExec: function () {\r\n            var selected = this.workzone().getIds();\r\n            if (selected.length === 0) return false;\r\n            var that = this;\r\n            return _.every(selected, function (id) {\r\n                return that.store().byId(id).mime !== 'directory';\r\n            });\r\n        },\r\n        exec: function () {\r\n            var ids = this._filteredIds();\r\n            var that = this;\r\n            _.forEach(ids, function (id) {\r\n                that.store().download(id);\r\n            });\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'duplicate';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.enabledWhen = 'selected';\r\n        },\r\n        exec: function () {\r\n            var targets = this.workzone().getIds();\r\n            this.store().duplicate(targets);\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = 'forward';\r\n            this.templateName = 'toolbarBtn';\r\n            this.shortcuts = 'Alt+Right';\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this.main().store, 'update', function () {\r\n                this.setState();\r\n            });\r\n        },\r\n        canExec: function () {\r\n            return this.main().history.canForward();\r\n        },\r\n        exec: function () {\r\n            return this.main().history.forward();\r\n        }\r\n    });\r\n\r\n    docmana.commands.forward = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'full';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.enabledWhen = null;\r\n\r\n            this.viewLayout = this.props.viewLayout;\r\n        },\r\n        defaults: {\r\n            viewLayout: 'normal' // 'fullscreen'\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this, 'rendered', function() {\r\n                this._setDisplay();\r\n            });\r\n        },\r\n        _getReverse: function () {\r\n            var curr = this.viewLayout;\r\n            return curr === 'normal' ? 'fullscreen' : 'normal';\r\n        },\r\n        _setDisplay: function () {\r\n            var curr = this.viewLayout;\r\n\r\n            this.$el.find('.docmana-icon').removeClass('docmana-icon-' + this._getReverse())\r\n                .addClass('docmana-icon-' + curr);\r\n\r\n\r\n        },\r\n        toggle: function (vl) {\r\n            this.viewLayout = this._getReverse();\r\n            this._setDisplay();\r\n\r\n            if (this.viewLayout === 'fullscreen') {\r\n                this.main().$el.addClass('fixed');\r\n                $('body').addClass('overflow-hidden');\r\n            } else {\r\n                this.main().$el.removeClass('fixed');\r\n                $('body').removeClass('overflow-hidden');\r\n            }\r\n\r\n        },\r\n        exec: function (options) {\r\n            this.toggle();\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'layout';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtnLayout';\r\n            this.enabledWhen = null;\r\n        },\r\n        exec: function () {\r\n            var layout = this.$element().find('input[type=radio]:checked').data('layout');\r\n            this.workzone().changeLayout(layout);\r\n        },\r\n        listenUI: function () {\r\n            // 初始按钮状态，在绑定 change 之前，否则会触发不必要的 change 事件\r\n            var currLayout = this.workzone().layout;\r\n            this.$element().find('[data-layout=' + currLayout + ']').closest('.btn').button('toggle');\r\n\r\n            var that = this;\r\n            // 不能直接触发 data-action，暂时没去找原因，因此监听 change 事件\r\n            this.$el.on('change', function (e) {\r\n                that.exec();\r\n            });\r\n\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'mkdir';\r\n    var counter = 0;\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.shortcuts = 'Alt+N';\r\n            this.exec = _.debounce(_.bind(this.exec, this), 500);\r\n        },\r\n        _generateName: function () {\r\n            var str = ' ' + docmana.resource('new folder');\r\n            return counter === 0 ? str : str + ' ' + counter;\r\n        },\r\n        _generateUsableName: function () {\r\n            var name = null;\r\n            var exist = true;\r\n            while (exist) {\r\n                name = this._generateName();\r\n                exist = this.store().byName(name) != null;\r\n                counter++;\r\n            }\r\n            return name;\r\n        },\r\n        shortcutExec: function () {\r\n            if (this.canExec()) {\r\n                this._exec();\r\n            }\r\n        },\r\n        _exec: function () {\r\n            var that = this;\r\n            var cwd = this.store().cwd();\r\n            if (!cwd) return;\r\n\r\n            var target = cwd.hash;\r\n            var name = this._generateUsableName();\r\n            that.store().mkdir(name, target).done(function () {\r\n                that.workzone().select(that.workzone().$items().first());\r\n                that.main().exec('rename');\r\n            });\r\n        },\r\n        exec: function () {\r\n            this._exec();\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'mkfile';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n\n\"use strict\";\r\n\r\n(function () {\r\n\r\n    var commandName = 'open';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.enabledWhen = 'single';\r\n            this.shortcuts = 'Return';\r\n        },\r\n        exec: function (info) {\r\n\r\n            if (info == null || info.mime == null) {\r\n                var id = this.workzone().select().attr('id');\r\n                info = this.store().byId(id);\r\n            }\r\n            if (info == null || info.locked === 1) return;\r\n            // 文件夹，则打开\r\n            if (info.mime === 'directory') {\r\n                this.store().open(info.hash);\r\n            } else {\r\n                var viewer = this.main().ui.viewer;\r\n                if (viewer) {\r\n                    viewer.callout();\r\n                }\r\n               // this.store().content(info.hash);\r\n            }\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'paste';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.shortcuts = 'Ctrl+V';\r\n        },\r\n        exec: function () {\r\n            this.clipboard().paste();\r\n        },\r\n        listenUI: function () {\r\n            this.listenTo(this.main().clipboard, 'change', function () {\r\n                this.setState();\r\n            });\r\n        },\r\n        canExec: function () {\r\n            if (this.main().clipboard.isEmpty()) return false;\r\n\r\n            return true;\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'refresh';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.shortcuts = 'F5';\r\n        },\r\n        exec: function () {\r\n            var target = this.store().cwd().hash;\r\n            this.store().open(target, 0);\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'rename';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.enabledWhen = 'single';\r\n            this.shortcuts = 'F2';\r\n        },\r\n        exec: function () {\r\n            var that = this;\r\n            var id = that.workzone().getIds()[0];\r\n            var data = that.store().byId(id);\r\n            if (data && data.locked === 1) return;\r\n\r\n            this.workzone().editItemName(function (name) {\r\n                that.store().rename(name, id).done(function () {\r\n                    that.main().focus();\r\n                });\r\n            });\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n    docmana.commands[commandName].constructor = Cmd;\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'rm';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.enabledWhen = 'selected';\r\n            this.shortcuts = 'Del';\r\n        },\r\n        exec: function () {\r\n            var ids = this.workzone().getIds();\r\n            if (ids.length > 0) {\r\n                var that = this;\r\n                docmana.ui.notify.confirm(function () {\r\n                    that.store().rm(ids);\r\n                });\r\n            }\r\n           \r\n           \r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'search';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function(options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarSearch';\r\n        },\r\n        exec: function() {\r\n            var q = _.trim(this.$input().val());\r\n            if (q === \"\" || q == null) return;\r\n            var target = this.store().cwd().hash;\r\n            this.store().search(target, q);\r\n        },\r\n        $input: function() {\r\n            return this.$element().find('input');\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this, 'rendered', function () {\r\n                var that = this;\r\n                this.$el.on('keydown', function (e) {\r\n                    if (e.which === 13) {\r\n                        e.preventDefault();\r\n                        that.exec();\r\n                    }\r\n                });\r\n                this.$input().clearIt({\r\n                    callback: function () {\r\n                        var target = that.store().cwd().hash;\r\n                        that.store().open(target);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'sort';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtnSort';\r\n            this.enabledWhen = null;\r\n        },\r\n        setState: function () {\r\n            var $el = this.$element();\r\n            var sortBy = this.store()._sortBy;\r\n            $el.find('.active').removeClass('active');\r\n            $el.find('[data-field=' + sortBy.field + ']').addClass('active');\r\n            $el.find('[data-order=' + sortBy.order + ']').addClass('active');\r\n        },\r\n        listenUI: function () {\r\n            this.listenTo(this.store(), 'sort', function (sortBy) {\r\n                this.setState();\r\n            });\r\n        },\r\n        exec: function (options) {\r\n            options || (options = {});\r\n\r\n            this.store().sortBy(options.field, options.order);\r\n            this.store().update();\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'upload';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtnUpload';\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this.main(), 'started', function () {\r\n                var that = this;\r\n                if (!this.$el) return;\r\n                var $file = this.$el.find(':file');\r\n                var uploader = this.main().ui.uploader;\r\n                // 如果有 jquery file upload 控件，则初始化 uploader 容器\r\n                if ($.fn.fileupload && uploader) {\r\n                    uploader.build($file);\r\n                } else {\r\n                    $file.on('change', function () {\r\n                        var val = $(this).val();\r\n                        if (val === \"\" || val == null) return;\r\n                        // 通过 jquery.form 提交\r\n                        that.store().upload($(this).closest('form'));\r\n                    });\r\n                }\r\n            });\r\n            this.listenTo(this, 'rendered', function () {\r\n\r\n\r\n            });\r\n        },\r\n        enable: function () {\r\n            docmana.CommandBase.prototype.enable.apply(this, arguments);\r\n            this.$element().find(':file').removeAttr('disabled');\r\n        },\r\n        disable: function () {\r\n            docmana.CommandBase.prototype.disable.apply(this, arguments);\r\n            this.$element().find(':file').attr('disabled', 'disabled');\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n    \"use strict\";\r\n\r\n    var Navigation = docmana.CommandContainer.extend({\r\n        templateName: 'navigation',\r\n        breadcrumbTemplateName: 'breadcrumb',\r\n        defaults: {\r\n            autoAction: true,\r\n            autoRender: true,\r\n            commands: [{\r\n                name: 'navigation',\r\n                to: '.nav-group'\r\n            }, {\r\n                name: 'search',\r\n                to: '.search-group'\r\n            }, {\r\n                name: 'refresh',\r\n                to: '.search-group'\r\n            }]\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this.history(), 'change', function () {\r\n                this._renderBreadcrumb();\r\n            });\r\n            this.listenTo(this, 'rendered', function () {\r\n                this._renderBreadcrumb();\r\n                this._renderCommands();\r\n            });\r\n        },\r\n        events: {\r\n            'click .docmana-breadcrumb li > a': '_linkHandler'\r\n        },\r\n        $breadcrumb: function () {\r\n            return this.$('.docmana-breadcrumb');\r\n        },\r\n        _renderBreadcrumb: function () {\r\n            var tpl = this.tpl(this.breadcrumbTemplateName);\r\n            var pathData = this.history().getPath();\r\n            this.$breadcrumb().html(tpl(pathData));\r\n            this._initBreadcrumbInteractive();\r\n        },\r\n        _initBreadcrumbInteractive: function () {\r\n            var that = this;\r\n            this.$('li > a:not(.ui-droppable)').droppable({\r\n                accept: \".file-list-item\",\r\n                hoverClass: \"drop-active\",\r\n                drop: function (e, ui) {\r\n                    // 注意：如果这里要直接取 ui.draggable，则需手动更改 ddmanager\r\n                    var targets = that.workzone().getIds(ui.draggable);\r\n                    var dest = $(e.target).attr('data-hash');\r\n\r\n                    that.store().moveTo(dest, targets);\r\n                }\r\n            });\r\n        },\r\n        _linkHandler: function (e) {\r\n            e.preventDefault();\r\n            var hash = $(e.currentTarget).attr('data-hash');\r\n            this.main().exec('open', true, this.history().byId(hash));\r\n        }\r\n    });\r\n\r\n    docmana.ui.Navigation = Navigation;\r\n    docmana.ui.navigation = function (options) {\r\n        return new docmana.ui.Navigation(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n    \"use strict\";\r\n\r\n    // 通知\r\n    // 默认使用 noty，如果使用其他通知库，按照接口重写notify对象的相应方法\r\n\r\n    var notify = {\r\n        _core: $.noop,\r\n        warn: $.noop,\r\n        success: $.noop,\r\n        error: $.noop,\r\n        confirm: $.noop\r\n    };\r\n\r\n\r\n    docmana.ui.notify = notify;\r\n\r\n    if (!window.console) return;\r\n\r\n    if (window.noty == null) {\r\n        notify._core = function (option) {\r\n            console[option.type](option.text);\r\n        }\r\n        notify.warn = function (text) {\r\n            console['warn'](text);\r\n        }\r\n        notify.success = function (text) {\r\n            console['log'](text);\r\n        }\r\n        notify.error = function (text) {\r\n            console['error'](text);\r\n        }\r\n        notify.confirm = function (sb, cb, text) {\r\n            text || (text = docmana.resource('textConfirmOperate'));\r\n\r\n            var r = window.confirm(text);\r\n            if (r) {\r\n                sb();\r\n            } else {\r\n                cb();\r\n            }\r\n        }\r\n    } else {\r\n\r\n        notify._core = function (option) {\r\n            var n = noty($.extend({\r\n                type: 'warning',\r\n                dismissQueue: true,\r\n                force: true,\r\n                layout: 'topCenter',\r\n                theme: 'relax',  // bootstrapTheme\r\n                closeWith: ['click'],\r\n                maxVisible: 1,\r\n                animation: {\r\n                    open: { height: 'toggle' },\r\n                    close: { height: 'toggle' },\r\n                    easing: 'swing',\r\n                    speed: 100 // opening & closing animation speed\r\n                },\r\n                timeout: false,\r\n                killer: true,\r\n                modal: false\r\n            }, option));\r\n\r\n        };\r\n\r\n        notify.warn = function (text) {\r\n            notify._core({\r\n                text: text,\r\n                type: 'warning',\r\n                timeout: 4000\r\n            });\r\n        };\r\n\r\n        notify.success = function (text) {\r\n            notify._core({\r\n                text: text,\r\n                timeout: 2000,\r\n                type: 'success'\r\n            });\r\n        };\r\n\r\n        notify.error = function (text) {\r\n            notify._core({\r\n                text: text,\r\n                type: 'error',\r\n                timeout: false\r\n            });\r\n        };\r\n\r\n        notify.confirm = function (successCb, cancelCb, text) {\r\n            text || (text = docmana.resource('textConfirmOperate'));\r\n\r\n            notify._core({\r\n                text: text,\r\n                type: 'confirm',\r\n                modal: true,\r\n                buttons: [{\r\n                    addClass: 'btn btn-primary btn-xs', text: docmana.resource('textOk'), onClick: function ($noty) {\r\n                        $noty.close();\r\n                        successCb();\r\n                    }\r\n                }, {\r\n                    addClass: 'btn btn-danger btn-xs', text: docmana.resource('textCancel'), onClick: function ($noty) {\r\n                        $noty.close();\r\n                        cancelCb();\r\n                    }\r\n                }]\r\n            });\r\n        };\r\n\r\n    }\r\n\r\n\r\n\r\n})();\r\n\r\n\n(function () {\r\n    \"use strict\";\r\n\r\n    // 状态栏界面\r\n\r\n\r\n    var Statusbar = docmana.CommandContainer.extend({\r\n        templateName: 'statusbar',\r\n        defaults: {\r\n            autoRender: true,\r\n            commands: [{\r\n                name: 'layout',\r\n                to: '.layout'\r\n            }]\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this.store(), 'update', function () {\r\n                this.updateStatus();\r\n            });\r\n            this.listenTo(this.workzone(), 'selected', function () {\r\n                this.updateStatus();\r\n            });\r\n            this.listenTo(this, 'rendered', function () {\r\n                this._renderCommands();\r\n            });\r\n        },\r\n        updateStatus: function () {\r\n            this.$('.status-text').html(this.tpl('statusbarText')(this.getStatus()));\r\n        },\r\n        getStatus: function () {\r\n            var data = this.store().cwdData();\r\n            var selectedIds = this.workzone().getIds();\r\n            var selectedSize = _.reduce(_.map(this.store().byIds(selectedIds), function (item) {\r\n                return item.mime === 'directory' ? NaN : item.size;\r\n            }), function (sum, n) {\r\n                return sum + n;\r\n            }, 0);\r\n            \r\n            return {\r\n                count: data.length,\r\n                selectedCount: selectedIds.length,\r\n                selectedSize: isNaN(selectedSize) ? \"\" : docmana.templateHelper.formatFileSize(selectedSize)\r\n            }\r\n        }\r\n    });\r\n\r\n    docmana.ui.Statusbar = Statusbar;\r\n    docmana.ui.statusbar = function (options) {\r\n        return new docmana.ui.Statusbar(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n    \"use strict\";\r\n\r\n    // 工具栏界面\r\n\r\n    var Toolbar = docmana.CommandContainer.extend({\r\n        className: 'docmana-toolbar',\r\n        templateName: 'toolbar',\r\n        defaults: {\r\n            autoRender: true,\r\n            autoAction: true,\r\n            commands: ['new', 'open', 'clipboard', 'organize', {\r\n                name: 'view',\r\n                to: '.right'\r\n            }, {\r\n                name: 'util',\r\n                to: '.right'\r\n            }]\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this, 'rendered', function () {\r\n                this._renderCommands();\r\n            });\r\n        }\r\n    });\r\n\r\n    docmana.ui.Toolbar = Toolbar;\r\n    docmana.ui.toolbar = function (options) {\r\n        return new docmana.ui.Toolbar(options);\r\n    }\r\n})();\r\n\r\n\n(function () {\r\n    \"use strict\";\r\n\r\n    // 当前工作目录界面\r\n\r\n    var Uploader = docmana.ViewBase.extend({\r\n        templateName: 'uploader',\r\n        init: function () {\r\n            var that = this;\r\n            this.parentDialog().on('shown.bs.modal', function () {\r\n\r\n            }).on('hidden.bs.modal', function () {\r\n                // that.$body().html('');\r\n                that.main().$el.focus();  // 重设焦点\r\n            });\r\n        },\r\n        defaults: {\r\n            autoRender: true\r\n        },\r\n        events: {\r\n            'click .cancel': '_cancelHandler'\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this.main(), 'started', function () {\r\n                // 设置触发器\r\n                var that = this;\r\n                var statusbar = this.statusbar();\r\n                var $btn = $(this.tpl('uploaderTrigger')());\r\n                if (statusbar) {\r\n                    $btn.on('click', function () {\r\n                        that.parentDialog().modal('show');\r\n                    }).appendTo(statusbar.$('.uploader'));\r\n                    that.$trigger = $btn;\r\n                }\r\n            });\r\n            this.listenTo(this, 'rendered', function () {\r\n                this.parentDialog().modal({\r\n                    show: false\r\n                });\r\n            });\r\n        },\r\n        parentDialog: function () {\r\n            return this.$element().closest('.modal');\r\n        },\r\n        inputInstance: function ($input) {\r\n            $input = $input || this.$input;\r\n            return $input.data('blueimp-fileupload') || $input.data('fileupload');\r\n        },\r\n        $body: function () {\r\n            return this.$('.files');\r\n        },\r\n        updateBadge: function () {\r\n            var count = this.count();\r\n            var $badge = this.$trigger.find('.badge');\r\n            $badge.text(count);\r\n            if (count === 0) {\r\n                $badge.hide();\r\n            } else {\r\n                $badge.show();\r\n            }\r\n        },\r\n        count: function(){\r\n            var count = this.$('.file').length;\r\n            return count;\r\n        },\r\n        updateDialogDisplay: function(){\r\n            if (this.count() === 0) {\r\n                this.parentDialog().modal('hide');\r\n            } else {\r\n                this.parentDialog().modal('show');\r\n            }\r\n        },\r\n        build: function ($fileInput) {\r\n            var that = this;\r\n            var tplFile = this.tpl('uploaderFiles');\r\n            var formatFileSize = docmana.utils.formatFileSize;\r\n            var url = _.isFunction(this.props.url) ? this.props.url()\r\n                : (this.props.url || this.store().url());\r\n\r\n            $fileInput.fileupload({\r\n                url: url,\r\n                formData: function ($input) {\r\n                    this.url = that.store().uploadUrl == null ? this.url : that.store().uploadUrl(this.url, this.files, this.fileInput);\r\n\r\n                    var params = that.store().uploadParams(this.files, this.fileInput);\r\n                    return _.map(params, function (value, key) {\r\n                        return {\r\n                            name: key,\r\n                            value: value\r\n                        }\r\n                    });\r\n                },\r\n                dataType: 'json',\r\n                add: function (e, data) {\r\n                    if (e.isDefaultPrevented()) {\r\n                        return false;\r\n                    }\r\n\r\n                    var $this = $(this);\r\n                    var instance = that.inputInstance($this);\r\n                    var options = instance.options;\r\n\r\n                    data.context = $(tplFile({\r\n                        files: data.files,\r\n                        options: options\r\n                    })).data('data', data).addClass('processing');\r\n\r\n                    that.$body().append(data.context);\r\n\r\n                    that.updateBadge();\r\n                    that.updateDialogDisplay();\r\n\r\n                    data.process().always(function () {\r\n                        data.context.each(function (index) {\r\n                            $(this).find('.size').text(\r\n                                formatFileSize(data.files[index].size)\r\n                            );\r\n                        }).removeClass('processing');\r\n                        // that._renderPreviews(data);\r\n                    }).done(function () {\r\n                        data.context.find('.start').prop('disabled', false);\r\n\r\n                        if ((instance._trigger('added', e, data) !== false) &&\r\n                            (options.autoUpload || data.autoUpload) &&\r\n                            data.autoUpload !== false) {\r\n                            data.submit();\r\n                        }\r\n                    }).fail(function () {\r\n                        if (data.files.error) {\r\n                            data.context.each(function (index) {\r\n                                var error = data.files[index].error;\r\n                                if (error) {\r\n                                    $(this).find('.status').text(error);\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                },\r\n                progress: function (e, data) {\r\n                    if (e.isDefaultPrevented()) {\r\n                        return false;\r\n                    }\r\n                    var progress = Math.floor(data.loaded / data.total * 100);\r\n                    if (data.context) {\r\n                        data.context.each(function () {\r\n                            $(this).find('.progress')\r\n                                .attr('aria-valuenow', progress)\r\n                                .children().first().css(\r\n                                    'width',\r\n                                    progress + '%'\r\n                                );\r\n                            $(this).find('.status > .percent').text(progress + '%');\r\n                        });\r\n                    }\r\n                },\r\n                fail: function (e, data) {\r\n                    if (e.isDefaultPrevented()) {\r\n                        return false;\r\n                    }\r\n                    var instance = that.inputInstance($(this));\r\n                    if (data.context) {\r\n                        data.context.each(function (index) {\r\n                            if (data.errorThrown !== 'abort') {\r\n                                var file = data.files[index];\r\n                                file.error = file.error || data.errorThrown;\r\n                                $(this).find('.folder').text(file.error);\r\n                            } else {\r\n                                $(this).remove();\r\n                                instance._trigger('failed', e, data);\r\n                                instance._trigger('finished', e, data);\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    that.updateBadge();\r\n                    that.updateDialogDisplay();\r\n\r\n                },\r\n                done: function (e, data) {\r\n                    data.context.remove();\r\n                    that.updateBadge();\r\n                    that.updateDialogDisplay();\r\n                    that.store().trigger('uploaded', data.result);\r\n                }\r\n            });\r\n\r\n            // TODO: 为什么在 fileupload add 方法内获取 that.$input 不正确\r\n            this.$input = $fileInput;\r\n        },\r\n        _cancelHandler: function (e) {\r\n            e.preventDefault();\r\n            var $file = $(e.currentTarget).closest('.file-upload,.file-download');\r\n            var data = $file.data('data') || {};\r\n            data.context = data.context || $file;\r\n            if (data.abort) {\r\n                data.abort();\r\n            } else {\r\n                data.errorThrown = 'abort';\r\n                this.trigger('fail', e, data);\r\n            }\r\n        }\r\n    });\r\n\r\n    docmana.ui.Uploader = Uploader;\r\n    docmana.ui.uploader = function (options) {\r\n        return new docmana.ui.Uploader(options);\r\n    }\r\n})();\r\n\r\n\n(function () {\r\n    \"use strict\";\r\n\r\n    var Viewer = docmana.ViewBase.extend({\r\n        templateName: 'viewer',\r\n        defaults: {\r\n            autoAction: true,\r\n            autoRender: true,\r\n            fileType: [\r\n                '.txt', '.csv', '.pdf', '.jpg', '.gif', '.png', '.tiff', '.ppt', '.pptx',\r\n                '.doc', '.docx', '.xls', '.xlsx'\r\n            ]\r\n        },\r\n\r\n        init: function () {\r\n            var that = this;\r\n            this.parentDialog().on('shown.bs.modal', function () {\r\n                that.$body().css({\r\n                    top: that.$('.modal-header').outerHeight(),\r\n                    bottom: that.$('.modal-footer').outerHeight()\r\n                });\r\n                that.viewCurrent();\r\n            }).on('hidden.bs.modal', function () {\r\n                that.$body().html('');\r\n                that.main().$el.focus();  // 重设焦点\r\n            });\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this.workzone(), 'selected', function () {\r\n                if (this.$el.is(':visible')) {\r\n                    this.viewCurrent();\r\n                }\r\n            });\r\n            this.listenTo(this, 'rendered', function () {\r\n                this.parentDialog().modal({\r\n                    show: false\r\n                });\r\n            });\r\n        },\r\n        parentDialog: function () {\r\n            return this.$element().closest('.modal');\r\n        },\r\n        callout: function () {\r\n            this.parentDialog().modal('show');\r\n        },\r\n        $body: function () {\r\n            return this.$el.find('.docmana-viewer-body');\r\n        },\r\n        viewCurrent: function () {\r\n            var that = this;\r\n            var selectIds = that.workzone().getIds();\r\n            if (selectIds.length > 0) {\r\n                var target = selectIds[0];\r\n                that.$body().html('');\r\n                var data = that.store().byId(target);\r\n                var ext = that.store().getFileExt(data);\r\n                that.parentDialog().find('.modal-title').text(data.name);\r\n\r\n                if (that.props.fileType.indexOf(ext) >= 0) {\r\n                    that.store().content(target).done(function (resp) {\r\n                        if (resp.view === 'path') {\r\n                            var url = that.store().fileUrl(resp.content);\r\n                            if (ext === '.pdf') {\r\n                                PDFObject.embed(url, that.$body());\r\n                            } else {\r\n                                that.$body().html('<iframe src=\"' + url + '\"></iframe>');\r\n                            }\r\n\r\n                        }\r\n                        if (resp.view === 'content') {\r\n                            that.$body().html(resp.content);\r\n                        }\r\n                    });\r\n                } else {\r\n                    var tpl = this.tpl('fileInfo');\r\n                    that.$body().html(tpl(data));\r\n                }\r\n\r\n            }\r\n        },\r\n        _previousHandler: function (e) {\r\n            this.workzone().selectTo('previous');\r\n        },\r\n        _nextHandler: function (e) {\r\n            this.workzone().selectTo('next');\r\n        },\r\n        _downloadHandler: function (e) {\r\n            this.main().exec('download');\r\n        }\r\n    });\r\n\r\n    docmana.ui.Viewer = Viewer;\r\n    docmana.ui.viewer = function (options) {\r\n        return new docmana.ui.Viewer(options);\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n    \"use strict\";\r\n\r\n    // 当前工作目录界面\r\n\r\n    var WorkZone = docmana.ViewBase.extend({\r\n        init: function () {\r\n            var that = this;\r\n            this._buffer = [];\r\n            this._selected = [];\r\n            this._cwd = null;\r\n            this._timer = [];\r\n            this.layout = this.props.layout;\r\n            this._moving = false;\r\n            this._renderListThrottle = _.throttle(_.bind(this._renderList, this), 100);\r\n\r\n            this._triggerSelectDebounce = _.debounce(_.bind(function () {\r\n                this.trigger('selected', this.select());\r\n            }, this), 200);\r\n\r\n            var originX = 0;\r\n            var originY = 0;\r\n            // 记录 moving\r\n            this.$el.on('mousedown', function (e) {\r\n                that._moving = false;\r\n                originX = e.clientX;\r\n                originY = e.clientY;\r\n            }).on('mousemove', function (e) {\r\n                if (e.clientX !== originX || e.clientY !== originY) {\r\n                    that._moving = true;\r\n                }\r\n            });\r\n\r\n            this._initHotKeys();\r\n            this._initSelectableInteractive();\r\n\r\n            this.render();\r\n        },\r\n        events: {\r\n            'scroll': '_scrollHandler',\r\n            'dblclick .file-list-item': '_itemDblClickHandler',\r\n            'mousedown .file-list-item .filename': '_editNameHandler',\r\n            'click': '_clickHandler'\r\n        },\r\n        defaults: {\r\n            bottomThreshold: 50,\r\n            itemCountPerScreen: 50\r\n        },\r\n\r\n        listen: function () {\r\n\r\n            this.listenTo(this.store(), 'update', function (data, request) {\r\n                if (request.cmd) {\r\n                    if (request.cmd === 'rename') {\r\n                        this._updateSelectedCache(request.target, request.name);\r\n                    }\r\n                    if (request.cmd === 'mkdir') {\r\n\r\n                    }\r\n                }\r\n\r\n                this.source(data);\r\n            });\r\n\r\n            this.listenTo(this, 'refresh', function (items) {\r\n                this._renderList(false);\r\n                this._restoreSelectUI();\r\n            });\r\n\r\n            //this.listenTo(this, 'layout', function() {\r\n            //    this.render();\r\n            //});\r\n\r\n            this.listenTo(this, 'selected', function ($select) {\r\n                this._selected = _.map($select, function (item) {\r\n                    return {\r\n                        name: $(item).data('name'),\r\n                        id: $(item).attr('id')\r\n                    };\r\n                });\r\n            });\r\n        },\r\n        changeLayout: function (layout) {\r\n            this.layout = layout;\r\n            this.render();\r\n            this.trigger('layout');\r\n            this.source(this.store()._data);\r\n        },\r\n        isListLayout: function () {\r\n            return this.layout === 'list';\r\n        },\r\n        source: function (items) {\r\n\r\n            this._buffer = this.store().cwdData();\r\n            if (this.store().cwd().hash !== this._cwd) {\r\n                this._cwd = this.store().cwd().hash;\r\n                this._selected = [];\r\n            }\r\n            this.trigger('refresh', this._buffer);\r\n        },\r\n        getIds: function ($items) {\r\n            if ($items == null) {\r\n                $items = this.select();\r\n            }\r\n            var ids = $.map($items, function (dom) {\r\n                return $(dom).attr('id');\r\n            });\r\n            return ids;\r\n        },\r\n        render: function () {\r\n            var tpl = this.isListLayout() ? this.tpl('workzoneListView') : this.tpl('workzoneIconsView');\r\n            this.$el.html(tpl(this.props));\r\n\r\n            this.$view = this.$('.docmana-workzone-view');\r\n\r\n            // 可拖拽\r\n\r\n            if (this._buffer.length > 0) {\r\n                this.trigger('refresh');\r\n            }\r\n        },\r\n        select: function (elements) {\r\n\r\n            if (elements != null) {\r\n                docmana.utils.selectSelectableElement(this.$el, elements);\r\n            }\r\n\r\n            // TODO: 这里在设置后马上获取选中项会不会不正确？？\r\n            return this.$('.file-list-item.ui-selected');\r\n\r\n        },\r\n\r\n        _updateSelectedCache: function (id, newName) {\r\n            var item = _.find(this._selected, function (value) {\r\n                return value.id === id;\r\n            });\r\n            if (item != null) {\r\n                item.name = newName;\r\n            }\r\n        },\r\n        _restoreSelectUI: function () {\r\n            var that = this;\r\n            var willSelect = _.compact(_.map(this._selected, function (value) {\r\n                return that.$('[data-name=\"' + value.name + '\"]')[0];\r\n            }));\r\n            that.select(willSelect);\r\n\r\n        },\r\n        _renderItem: function (item) {\r\n            var tplName = this.isListLayout() ? 'workzoneListViewItem' : 'workzoneIconsViewItem';\r\n            return this.tpl(tplName)(item);\r\n        },\r\n        _renderList: function (isAppend) {\r\n            if (isAppend == null) isAppend = true;\r\n            var that = this;\r\n            var $wrapper = this.$el;\r\n            var bottomThreshold = this.props.bottomThreshold;\r\n            var itemCountPerScreen = this.props.itemCountPerScreen;\r\n\r\n            var $last = this.$('[id]:last');\r\n\r\n            //var shouldRender = !$last.length\r\n            //    || ($last.position().top - ($wrapper.height() + $wrapper.scrollTop() + bottomThreshold)) <= 0;\r\n\r\n            //if (!shouldRender) return;\r\n\r\n            var items = this._buffer.splice(0, itemCountPerScreen);\r\n\r\n            var html = $.map(items, function (item) {\r\n                return that._renderItem(item);\r\n            });\r\n\r\n            this.$view[isAppend ? 'append' : 'html'](html.join(''));\r\n\r\n            // TODO: 设置选中项的显示状态\r\n            this._setItemInteractive();\r\n\r\n            // 刷新状态，否则mousedown时会报错\r\n            this.$el.selectable(\"refresh\");\r\n        },\r\n        $items: function () {\r\n            return this.$('.file-list-item');\r\n        },\r\n        _getShiftSelected: function ($el) {\r\n            var $items = this.$items();\r\n            var $fistSelected = $items.filter('.ui-selected').first();\r\n            var $lastSelected = $items.filter('.ui-selected').last();\r\n            var idx = $items.index($el);\r\n            var firstIdx = $items.index($fistSelected);\r\n            var lastIdx = $items.index($lastSelected);\r\n\r\n            firstIdx = Math.min(idx, firstIdx);\r\n            lastIdx = Math.max(idx, lastIdx);\r\n\r\n            return $items.slice(firstIdx, (lastIdx + 1));\r\n        },\r\n        _isNormalMouseEvent: function (e) {\r\n            return !e.shiftKey && !e.ctrlKey && !e.metaKey;\r\n        },\r\n        _initSelectableInteractive: function () {\r\n            var that = this;\r\n\r\n            // 设置可选择\r\n            this.$el\r\n                .on('mousedown', '.file-list-item', function (e) {\r\n                    var $target = $(e.currentTarget);\r\n                    if (!that._isNormalMouseEvent(e)) {\r\n                        e.preventDefault();\r\n                        if (e.ctrlKey) {\r\n                            var curr = that.select();\r\n                            $.merge($target, curr);\r\n                        }\r\n                        // shift 操作的行为与windows下不一致\r\n                        if (e.shiftKey) {\r\n                            $target = that._getShiftSelected($target);\r\n                        }\r\n                        that.select($target);\r\n                    } else {\r\n                        // 未选中时，mousedown 触发选中\r\n                        if (!$target.hasClass('ui-selected')) {\r\n                            that.select($target);\r\n                        }\r\n                    }\r\n\r\n                })\r\n                .on('click', '.file-list-item', function (e) {\r\n                    var $target = $(e.currentTarget);\r\n                    // 多选状态下，click 触发选中\r\n                    if (that.select().length > 1 && that._isNormalMouseEvent(e)) {\r\n                        that.select($target);\r\n                        //$target.focus();\r\n                    }\r\n                })\r\n                .selectable({\r\n                    //appendTo: this.$el,\r\n                    delay: 50,\r\n                    filter: \".file-list-item\",\r\n                    //cancel: '.ui-selected',\r\n                    start: function (event, ui) {\r\n                        that._clearTimer();\r\n                        that.$('.inline-edit').blur();\r\n                    },\r\n                    selected: function (e, ui) {\r\n                      //  $(ui.selected).addClass('bg-primary');\r\n                        that._triggerSelectDebounce();\r\n                    },\r\n                    unselected: function (e, ui) {\r\n                     //   $(ui.unselected).removeClass('bg-primary');\r\n                        that._triggerSelectDebounce();\r\n                    },\r\n                    stop: function (e, ui) {\r\n                        //   e.stopImmediatePropagation();\r\n                    }\r\n                });\r\n        },\r\n        _setItemInteractive: function () {\r\n            var that = this;\r\n            // 对每项设置为拖动\r\n            this.$('.drag-block:not(.ui-draggable)').draggable({\r\n                appendTo: that.$el,\r\n                //cancel: ':not(.drag-block), input,textarea,button,select,option',\r\n                delay: 100,\r\n                helper: function () {\r\n                    return '<div class=\"cwd-draggable-helper\"><span class=\"badge count\"></span></div>';\r\n                },\r\n                cursorAt: { top: 20, left: 20 },\r\n                start: function (e, ui) {\r\n                    that._clearTimer();\r\n\r\n                    var $selected = that.select();\r\n                    // 设置当前选中项为当前拖动元素\r\n                    $.ui.ddmanager.current.element = $selected;\r\n\r\n                    // 设置 helper\r\n                    var $thumbs = $($selected.find('.filetype').splice(0, 4)).clone();\r\n                    $.each($thumbs, function (i, el) {\r\n                        $(el).addClass('icon' + i);\r\n                    });\r\n                    ui.helper.append($thumbs).find('.count').html($selected.length);\r\n                }\r\n            });\r\n\r\n            // 设置文件夹可拖动放置\r\n            this.$('.file-list-item.type-directory:not(.ui-droppable)').droppable({\r\n                accept: \".file-list-item\",\r\n                hoverClass: \"drop-active\",\r\n                drop: function (e, ui) {\r\n                    // 注意：如果这里要直接取 ui.draggable，则需手动更改 ddmanager\r\n                    var targets = that.getIds(ui.draggable);\r\n                    var dest = $(e.target).attr('id');\r\n\r\n                    that.store().moveTo(dest, targets);\r\n                }\r\n            });\r\n        },\r\n        _unselectAll: function (e) {\r\n            if (!e.shiftKey && !e.ctrlKey && !e.metaKey) {\r\n                this.select([]);\r\n            }\r\n        },\r\n        _selectAll: function () {\r\n            this.select(this.$('.file-list-item'));\r\n        },\r\n        _clearTimer: function () {\r\n            while (this._timer.length > 0) {\r\n                var id = this._timer.shift();\r\n                clearTimeout(id);\r\n            }\r\n        },\r\n\r\n        // Hanlders\r\n        _scrollHandler: function () {\r\n            this._renderListThrottle();\r\n        },\r\n        _clickHandler: function (e) {\r\n            e.preventDefault();\r\n            if (!$(e.target).is(':input')) {\r\n                this.$('.inline-edit').blur();\r\n                // 由于点击子节点会造成父节点焦点丢失，这里的判断并没多大作用...\r\n               // if ($(document.activeElement).closest('.docmana').length === 0) {\r\n                    this._$focusEl().focus();\r\n               // }\r\n            }\r\n            // 如果单纯点击，则手动进行反选\r\n            if (!this._moving && $(e.target).closest('.file-list-item').length === 0) {\r\n                this._unselectAll(e);\r\n            }\r\n        },\r\n        _isSingleSelected: function ($el) {\r\n            return $el.closest('.file-list-item').hasClass('ui-selected') && this.select().length === 1;\r\n        },\r\n        _editNameHandler: function (e) {\r\n            if (e.button === 2) return;\r\n\r\n            var $el = $(e.currentTarget);\r\n\r\n            if (this._isSingleSelected($el)) {\r\n                var timer = _.delay(_.bind(function ($el) {\r\n                    if (this._isSingleSelected($el)) {\r\n\r\n                        this.main().exec('rename');\r\n                    }\r\n                }, this), 700, $el);\r\n\r\n                this._timer.push(timer);\r\n            }\r\n\r\n\r\n        },\r\n        _isSelecting: function () {\r\n            return $('.ui-selectable-helper').length > 0;\r\n        },\r\n        _isInput: function ($el) {\r\n            return $el.is('input, textarea, select, button');\r\n        },\r\n        _itemDblClickHandler: function (e) {\r\n            if (this._isInput($(e.target))) return;\r\n            this._clearTimer();\r\n            this.main().exec('open');\r\n        },\r\n        _getSingleSelect: function () {\r\n            var last = this.select().last();\r\n            if (last.length === 0) {\r\n                return this.$items().first();\r\n            }\r\n            return last;\r\n        },\r\n        editItemName: function (callback, isForce) {\r\n            var $item = this.select();\r\n            if ($item.length !== 1) return;\r\n            \r\n            var $filename = $item.find('.filename');\r\n            var mode = this.isListLayout() ? 0 : 1;\r\n            docmana.utils.inlineEdit($filename, function (name) {\r\n                callback(name);\r\n            }, mode, isForce);\r\n        },\r\n        selectTo: function (pos) {\r\n            var $items = this.$items();\r\n            var curr = this.select().last();\r\n            if (curr.length === 0) {\r\n                curr = $items.first();\r\n            }\r\n            if (curr.length === 0) return;\r\n\r\n            var to = curr;\r\n            var idx = $items.index(curr);\r\n            if (pos === 'next') {\r\n                if (idx + 1 < $items.length) {\r\n                    to = $($items[idx + 1]);\r\n                }\r\n            }\r\n            if (pos === 'previous') {\r\n                if (idx - 1 >= 0) {\r\n                    to = $($items[idx - 1]);\r\n                }\r\n            }\r\n            this.select(to);\r\n        },\r\n        _$focusEl: function () {\r\n            return this.main().$el;\r\n        },\r\n        _initHotKeys: function () {\r\n            var that = this;\r\n\r\n            // TODO: 添加图标布局下的 up down 处理\r\n\r\n            this._$focusEl().bind('keydown.docmana', 'left', function (e) {\r\n                if (!that.isListLayout()) {\r\n                    that.selectTo('previous');\r\n                }\r\n            }).bind('keydown.docmana', 'right', function (e) {\r\n                if (!that.isListLayout()) {\r\n                    that.selectTo('next');\r\n                }\r\n            }).bind('keydown.docmana', 'up', function (e) {\r\n                if (that.isListLayout()) {\r\n                    that.selectTo('previous');\r\n                }\r\n            }).bind('keydown.docmana', 'down', function (e) {\r\n                if (that.isListLayout()) {\r\n                    that.selectTo('next');\r\n                }\r\n            }).bind('keydown.docmana', 'ctrl+a', function (e) {\r\n                e.preventDefault();\r\n                that._selectAll();\r\n            });\r\n\r\n            var commands = this.main().commands;\r\n\r\n            _.forEach(commands, function (cmd) {\r\n                if (cmd.shortcuts) {\r\n                    that._$focusEl().bind('keydown.docmana', cmd.shortcuts, function (e) {\r\n                        e.preventDefault();\r\n                        cmd.shortcutExec();\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n    });\r\n\r\n    docmana.ui.Workzone = WorkZone;\r\n    docmana.ui.workzone = function (options) {\r\n        return new docmana.ui.Workzone(options);\r\n    }\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    docmana.resources['en'] = {\r\n\r\n        'cmdBack': 'Back',\r\n        'cmdForward': 'Forward',\r\n        'cmdOpen': 'Open',\r\n        'cmdUpload': 'Upload',\r\n        'cmdDownload': 'Download',\r\n        'cmdCut': 'Cut',\r\n        'cmdCopy': 'Copy',\r\n        'cmdPaste': 'Paste',\r\n        'cmdSort': 'Sort by',\r\n        'cmdMkdir': 'New folder',\r\n        'cmdDuplicate': 'Duplicate',\r\n        'cmdRename': 'Rename',\r\n        'cmdRm': 'Remove',\r\n        'sortByName': 'Name',\r\n        'sortBySize': 'Size',\r\n        'sortByType': 'Type',\r\n        'sortByDate': 'Date modified',\r\n        'sortAscending': 'Ascending',\r\n        'sortDescending': 'Descending',\r\n        'fileName': 'Name',\r\n        'fileDateModified': 'Date modified',\r\n        'fileType': 'Type',\r\n        'fileSize': 'Size',\r\n        'statusbarItems': 'items',\r\n        'statusbarSelectedItem': '{0} item selected',\r\n        'layoutList': 'List',\r\n        'layoutLargeIcons': 'Large Icons',\r\n        'textSearch': 'Search...',\r\n        'textPreviousItem': 'previous item',\r\n        'textNextItem': 'next item',\r\n        'textFileUpload': 'File uploader',\r\n        'textClose': 'Close',\r\n        'textOk': 'Ok',\r\n        'textCancel': 'Cancel',\r\n        'textConfirmOperate': 'Are you sure you want to do this operation?',\r\n\r\n        'labelLanguage': 'Language: ',\r\n        'labelTheme': 'Theme: ',\r\n\r\n        'kindUnknown': 'Unknown',\r\n        'kindFolder': 'Folder',\r\n        'kindAlias': 'Alias',\r\n        'kindAliasBroken': 'Broken alias',\r\n        // applications\r\n        'kindApp': 'Application',\r\n        'kindPostscript': 'Postscript document',\r\n        'kindMsOffice': 'Microsoft Office document',\r\n        'kindMsWord': 'Microsoft Word document',\r\n        'kindMsExcel': 'Microsoft Excel document',\r\n        'kindMsPP': 'Microsoft Powerpoint presentation',\r\n        'kindOO': 'Open Office document',\r\n        'kindAppFlash': 'Flash application',\r\n        'kindPDF': 'Portable Document Format (PDF)',\r\n        'kindTorrent': 'Bittorrent file',\r\n        'kind7z': '7z archive',\r\n        'kindTAR': 'TAR archive',\r\n        'kindGZIP': 'GZIP archive',\r\n        'kindBZIP': 'BZIP archive',\r\n        'kindXZ': 'XZ archive',\r\n        'kindZIP': 'ZIP archive',\r\n        'kindRAR': 'RAR archive',\r\n        'kindJAR': 'Java JAR file',\r\n        'kindTTF': 'True Type font',\r\n        'kindOTF': 'Open Type font',\r\n        'kindRPM': 'RPM package',\r\n        // texts\r\n        'kindText': 'Text document',\r\n        'kindTextPlain': 'Plain text',\r\n        'kindPHP': 'PHP source',\r\n        'kindCSS': 'Cascading style sheet',\r\n        'kindHTML': 'HTML document',\r\n        'kindJS': 'Javascript source',\r\n        'kindRTF': 'Rich Text Format',\r\n        'kindC': 'C source',\r\n        'kindCHeader': 'C header source',\r\n        'kindCPP': 'C++ source',\r\n        'kindCPPHeader': 'C++ header source',\r\n        'kindShell': 'Unix shell script',\r\n        'kindPython': 'Python source',\r\n        'kindJava': 'Java source',\r\n        'kindRuby': 'Ruby source',\r\n        'kindPerl': 'Perl script',\r\n        'kindSQL': 'SQL source',\r\n        'kindXML': 'XML document',\r\n        'kindAWK': 'AWK source',\r\n        'kindCSV': 'Comma separated values',\r\n        'kindDOCBOOK': 'Docbook XML document',\r\n        'kindMarkdown': 'Markdown text',\r\n        // images\r\n        'kindImage': 'Image',\r\n        'kindBMP': 'BMP image',\r\n        'kindJPEG': 'JPEG image',\r\n        'kindGIF': 'GIF Image',\r\n        'kindPNG': 'PNG Image',\r\n        'kindTIFF': 'TIFF image',\r\n        'kindTGA': 'TGA image',\r\n        'kindPSD': 'Adobe Photoshop image',\r\n        'kindXBITMAP': 'X bitmap image',\r\n        'kindPXM': 'Pixelmator image',\r\n        // media\r\n        'kindAudio': 'Audio media',\r\n        'kindAudioMPEG': 'MPEG audio',\r\n        'kindAudioMPEG4': 'MPEG-4 audio',\r\n        'kindAudioMIDI': 'MIDI audio',\r\n        'kindAudioOGG': 'Ogg Vorbis audio',\r\n        'kindAudioWAV': 'WAV audio',\r\n        'AudioPlaylist': 'MP3 playlist',\r\n        'kindVideo': 'Video media',\r\n        'kindVideoDV': 'DV movie',\r\n        'kindVideoMPEG': 'MPEG movie',\r\n        'kindVideoMPEG4': 'MPEG-4 movie',\r\n        'kindVideoAVI': 'AVI movie',\r\n        'kindVideoMOV': 'Quick Time movie',\r\n        'kindVideoWM': 'Windows Media movie',\r\n        'kindVideoFlash': 'Flash movie',\r\n        'kindVideoMKV': 'Matroska movie',\r\n        'kindVideoOGG': 'Ogg movie'\r\n    }\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n    \"use strict\";\r\n\r\n    docmana.resources['zh-CN'] = {\r\n\r\n        'cmdBack': '后退',\r\n        'cmdForward': '前进',\r\n        'cmdOpen': '打开',\r\n        'cmdUpload': '上传',\r\n        'cmdDownload': '下载',\r\n        'cmdCut': '剪切',\r\n        'cmdCopy': '复制',\r\n        'cmdPaste': '粘贴',\r\n        'cmdSort': '排序方式',\r\n        'cmdMkdir': '新建文件夹',\r\n        'cmdDuplicate': '副本',\r\n        'cmdRename': '重命名',\r\n        'cmdRm': '移除',\r\n        'sortByName': '名称',\r\n        'sortBySize': '大小',\r\n        'sortByType': '类型',\r\n        'sortByDate': '修改日期',\r\n        'sortAscending': '升序',\r\n        'sortDescending': '降序',\r\n        'fileName': '名称',\r\n        'fileDateModified': '修改日期',\r\n        'fileType': '类型',\r\n        'fileSize': '大小',\r\n        'statusbarItems': '个项目',\r\n        'statusbarSelectedItem': '选中 {0} 个项目',\r\n        'layoutList': '列表布局',\r\n        'layoutLargeIcons': '图标布局',\r\n        'textSearch': '搜索...',\r\n        'textPreviousItem': '前一项',\r\n        'textNextItem': '后一项',\r\n        'textFileUpload': '文件上传器',\r\n        'textClose': '关闭',\r\n        'textOk': '确定',\r\n        'textCancel': '取消',\r\n        'textConfirmOperate': '确定做此操作？',\r\n\r\n        'labelLanguage': '语言：',\r\n        'labelTheme': '主题：',\r\n\r\n\r\n        'kindUnknown': '未知',\r\n        'kindFolder': '文件夹',\r\n        'kindAlias': '别名',\r\n        'kindAliasBroken': '错误的别名',\r\n        // applications\r\n        'kindApp': '程序',\r\n        'kindPostscript': 'Postscript 文档',\r\n        'kindMsOffice': 'Microsoft Office 文档',\r\n        'kindMsWord': 'Microsoft Word 文档',\r\n        'kindMsExcel': 'Microsoft Excel 文档',\r\n        'kindMsPP': 'Microsoft Powerpoint 演示',\r\n        'kindOO': 'Open Office 文档',\r\n        'kindAppFlash': 'Flash 程序',\r\n        'kindPDF': 'Portable Document Format (PDF)',\r\n        'kindTorrent': 'Bittorrent 文件',\r\n        'kind7z': '7z 压缩包',\r\n        'kindTAR': 'TAR 压缩包',\r\n        'kindGZIP': 'GZIP 压缩包',\r\n        'kindBZIP': 'BZIP 压缩包',\r\n        'kindXZ': 'XZ 压缩包',\r\n        'kindZIP': 'ZIP 压缩包',\r\n        'kindRAR': 'RAR 压缩包',\r\n        'kindJAR': 'Java JAR 文件',\r\n        'kindTTF': 'True Type 字体',\r\n        'kindOTF': 'Open Type 字体',\r\n        'kindRPM': 'RPM 包',\r\n        // texts\r\n        'kindText': '文本文件',\r\n        'kindTextPlain': '纯文本',\r\n        'kindPHP': 'PHP 源代码',\r\n        'kindCSS': '层叠样式表(CSS)',\r\n        'kindHTML': 'HTML 文档',\r\n        'kindJS': 'Javascript 源代码',\r\n        'kindRTF': '富文本格式(RTF)',\r\n        'kindC': 'C 源代码',\r\n        'kindCHeader': 'C 头文件',\r\n        'kindCPP': 'C++ 源代码',\r\n        'kindCPPHeader': 'C++ 头文件',\r\n        'kindShell': 'Unix 外壳脚本',\r\n        'kindPython': 'Python 源代码',\r\n        'kindJava': 'Java 源代码',\r\n        'kindRuby': 'Ruby 源代码',\r\n        'kindPerl': 'Perl 源代码',\r\n        'kindSQL': 'SQL 脚本',\r\n        'kindXML': 'XML 文档',\r\n        'kindAWK': 'AWK 源代码',\r\n        'kindCSV': '逗号分隔值文件(CSV)',\r\n        'kindDOCBOOK': 'Docbook XML 文档',\r\n        // images\r\n        'kindImage': '图片',\r\n        'kindBMP': 'BMP 图片',\r\n        'kindJPEG': 'JPEG 图片',\r\n        'kindGIF': 'GIF 图片',\r\n        'kindPNG': 'PNG 图片',\r\n        'kindTIFF': 'TIFF 图片',\r\n        'kindTGA': 'TGA 图片',\r\n        'kindPSD': 'Adobe Photoshop 图片',\r\n        'kindXBITMAP': 'X bitmap 图片',\r\n        'kindPXM': 'Pixelmator 图片',\r\n        // media\r\n        'kindAudio': '音频',\r\n        'kindAudioMPEG': 'MPEG 音频',\r\n        'kindAudioMPEG4': 'MPEG-4 音频',\r\n        'kindAudioMIDI': 'MIDI 音频',\r\n        'kindAudioOGG': 'Ogg Vorbis 音频',\r\n        'kindAudioWAV': 'WAV 音频',\r\n        'AudioPlaylist': 'MP3 播放列表',\r\n        'kindVideo': '视频',\r\n        'kindVideoDV': 'DV 视频',\r\n        'kindVideoMPEG': 'MPEG 视频',\r\n        'kindVideoMPEG4': 'MPEG-4 视频',\r\n        'kindVideoAVI': 'AVI 视频',\r\n        'kindVideoMOV': 'Quick Time 视频',\r\n        'kindVideoWM': 'Windows Media 视频',\r\n        'kindVideoFlash': 'Flash 视频',\r\n        'kindVideoMKV': 'Matroska 视频',\r\n        'kindVideoOGG': 'Ogg 视频'\r\n    }\r\n\r\n})();\r\n\r\n\nreturn window.docmana;\n\n}));\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = 'back';\r\n            this.templateName = 'toolbarBtn';\r\n            this.shortcuts = 'Alt+Left';\r\n        },\r\n        listen: function(){\r\n            this.listenTo(this.main().store, 'update', function () {\r\n                this.setState();\r\n            });\r\n        },\r\n        canExec: function() {\r\n            return this.main().history.canBack();\r\n        },\r\n        exec: function() {\r\n            return this.main().history.back();\r\n        }\r\n    });\r\n\r\n    docmana.commands.back = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'copy';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.enabledWhen = 'selected';\r\n            this.shortcuts = 'Ctrl+C';\r\n        },\r\n        exec: function () {\r\n            var selected = this.store().byIds(this.workzone().getIds());\r\n            this.main().clipboard.copy(selected);\r\n        }\r\n    });\r\n\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'cut';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.enabledWhen = 'selected';\r\n            this.shortcuts = 'Ctrl+X';\r\n        },\r\n        exec: function () {\r\n            // 更改剪切时状态\r\n            var workzone = this.workzone();\r\n            workzone.$('.file-list-item.cut').removeClass('cut');\r\n            workzone.select().addClass('cut');\r\n\r\n            var selected = this.store().byIds(workzone.getIds());\r\n            this.main().clipboard.cut(selected);\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'download';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.enabledWhen = 'selectedFiles';\r\n        },\r\n        _filteredIds: function () {\r\n            var selected = this.workzone().getIds();\r\n            var that = this;\r\n            var filtered = _.filter(selected, function (id) {\r\n                return that.store().byId(id).mime !== 'directory';\r\n            });\r\n            return filtered;\r\n        },\r\n\r\n        canExec: function () {\r\n            var selected = this.workzone().getIds();\r\n            if (selected.length === 0) return false;\r\n            var that = this;\r\n            return _.every(selected, function (id) {\r\n                return that.store().byId(id).mime !== 'directory';\r\n            });\r\n        },\r\n        exec: function () {\r\n            var ids = this._filteredIds();\r\n            var that = this;\r\n            _.forEach(ids, function (id) {\r\n                that.store().download(id);\r\n            });\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'duplicate';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.enabledWhen = 'selected';\r\n        },\r\n        exec: function () {\r\n            var targets = this.workzone().getIds();\r\n            this.store().duplicate(targets);\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = 'forward';\r\n            this.templateName = 'toolbarBtn';\r\n            this.shortcuts = 'Alt+Right';\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this.main().store, 'update', function () {\r\n                this.setState();\r\n            });\r\n        },\r\n        canExec: function () {\r\n            return this.main().history.canForward();\r\n        },\r\n        exec: function () {\r\n            return this.main().history.forward();\r\n        }\r\n    });\r\n\r\n    docmana.commands.forward = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'full';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.enabledWhen = null;\r\n\r\n            this.viewLayout = this.props.viewLayout;\r\n        },\r\n        defaults: {\r\n            viewLayout: 'normal' // 'fullscreen'\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this, 'rendered', function() {\r\n                this._setDisplay();\r\n            });\r\n        },\r\n        _getReverse: function () {\r\n            var curr = this.viewLayout;\r\n            return curr === 'normal' ? 'fullscreen' : 'normal';\r\n        },\r\n        _setDisplay: function () {\r\n            var curr = this.viewLayout;\r\n\r\n            this.$el.find('.docmana-icon').removeClass('docmana-icon-' + this._getReverse())\r\n                .addClass('docmana-icon-' + curr);\r\n\r\n\r\n        },\r\n        toggle: function (vl) {\r\n            this.viewLayout = this._getReverse();\r\n            this._setDisplay();\r\n\r\n            if (this.viewLayout === 'fullscreen') {\r\n                this.main().$el.addClass('fixed');\r\n                $('body').addClass('overflow-hidden');\r\n            } else {\r\n                this.main().$el.removeClass('fixed');\r\n                $('body').removeClass('overflow-hidden');\r\n            }\r\n\r\n        },\r\n        exec: function (options) {\r\n            this.toggle();\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'layout';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtnLayout';\r\n            this.enabledWhen = null;\r\n        },\r\n        exec: function () {\r\n            var layout = this.$element().find('input[type=radio]:checked').data('layout');\r\n            this.workzone().changeLayout(layout);\r\n        },\r\n        listenUI: function () {\r\n            // 初始按钮状态，在绑定 change 之前，否则会触发不必要的 change 事件\r\n            var currLayout = this.workzone().layout;\r\n            this.$element().find('[data-layout=' + currLayout + ']').closest('.btn').button('toggle');\r\n\r\n            var that = this;\r\n            // 不能直接触发 data-action，暂时没去找原因，因此监听 change 事件\r\n            this.$el.on('change', function (e) {\r\n                that.exec();\r\n            });\r\n\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'mkdir';\r\n    var counter = 0;\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.shortcuts = 'Alt+N';\r\n            this.exec = _.debounce(_.bind(this.exec, this), 500);\r\n        },\r\n        _generateName: function () {\r\n            var str = ' ' + docmana.resource('new folder');\r\n            return counter === 0 ? str : str + ' ' + counter;\r\n        },\r\n        _generateUsableName: function () {\r\n            var name = null;\r\n            var exist = true;\r\n            while (exist) {\r\n                name = this._generateName();\r\n                exist = this.store().byName(name) != null;\r\n                counter++;\r\n            }\r\n            return name;\r\n        },\r\n        shortcutExec: function () {\r\n            if (this.canExec()) {\r\n                this._exec();\r\n            }\r\n        },\r\n        _exec: function () {\r\n            var that = this;\r\n            var cwd = this.store().cwd();\r\n            if (!cwd) return;\r\n\r\n            var target = cwd.hash;\r\n            var name = this._generateUsableName();\r\n            that.store().mkdir(name, target).done(function () {\r\n                that.workzone().select(that.workzone().$items().first());\r\n                that.main().exec('rename');\r\n            });\r\n        },\r\n        exec: function () {\r\n            this._exec();\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'mkfile';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n","\"use strict\";\r\n\r\n(function () {\r\n\r\n    var commandName = 'open';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.enabledWhen = 'single';\r\n            this.shortcuts = 'Return';\r\n        },\r\n        exec: function (info) {\r\n\r\n            if (info == null || info.mime == null) {\r\n                var id = this.workzone().select().attr('id');\r\n                info = this.store().byId(id);\r\n            }\r\n            if (info == null || info.locked === 1) return;\r\n            // 文件夹，则打开\r\n            if (info.mime === 'directory') {\r\n                this.store().open(info.hash);\r\n            } else {\r\n                var viewer = this.main().ui.viewer;\r\n                if (viewer) {\r\n                    viewer.callout();\r\n                }\r\n               // this.store().content(info.hash);\r\n            }\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'paste';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.shortcuts = 'Ctrl+V';\r\n        },\r\n        exec: function () {\r\n            this.clipboard().paste();\r\n        },\r\n        listenUI: function () {\r\n            this.listenTo(this.main().clipboard, 'change', function () {\r\n                this.setState();\r\n            });\r\n        },\r\n        canExec: function () {\r\n            if (this.main().clipboard.isEmpty()) return false;\r\n\r\n            return true;\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'refresh';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.shortcuts = 'F5';\r\n        },\r\n        exec: function () {\r\n            var target = this.store().cwd().hash;\r\n            this.store().open(target, 0);\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'rename';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.enabledWhen = 'single';\r\n            this.shortcuts = 'F2';\r\n        },\r\n        exec: function () {\r\n            var that = this;\r\n            var id = that.workzone().getIds()[0];\r\n            var data = that.store().byId(id);\r\n            if (data && data.locked === 1) return;\r\n\r\n            this.workzone().editItemName(function (name) {\r\n                that.store().rename(name, id).done(function () {\r\n                    that.main().focus();\r\n                });\r\n            });\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n    docmana.commands[commandName].constructor = Cmd;\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'rm';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtn';\r\n            this.enabledWhen = 'selected';\r\n            this.shortcuts = 'Del';\r\n        },\r\n        exec: function () {\r\n            var ids = this.workzone().getIds();\r\n            if (ids.length > 0) {\r\n                var that = this;\r\n                docmana.ui.notify.confirm(function () {\r\n                    that.store().rm(ids);\r\n                });\r\n            }\r\n           \r\n           \r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'search';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function(options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarSearch';\r\n        },\r\n        exec: function() {\r\n            var q = _.trim(this.$input().val());\r\n            if (q === \"\" || q == null) return;\r\n            var target = this.store().cwd().hash;\r\n            this.store().search(target, q);\r\n        },\r\n        $input: function() {\r\n            return this.$element().find('input');\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this, 'rendered', function () {\r\n                var that = this;\r\n                this.$el.on('keydown', function (e) {\r\n                    if (e.which === 13) {\r\n                        e.preventDefault();\r\n                        that.exec();\r\n                    }\r\n                });\r\n                this.$input().clearIt({\r\n                    callback: function () {\r\n                        var target = that.store().cwd().hash;\r\n                        that.store().open(target);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'sort';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtnSort';\r\n            this.enabledWhen = null;\r\n        },\r\n        setState: function () {\r\n            var $el = this.$element();\r\n            var sortBy = this.store()._sortBy;\r\n            $el.find('.active').removeClass('active');\r\n            $el.find('[data-field=' + sortBy.field + ']').addClass('active');\r\n            $el.find('[data-order=' + sortBy.order + ']').addClass('active');\r\n        },\r\n        listenUI: function () {\r\n            this.listenTo(this.store(), 'sort', function (sortBy) {\r\n                this.setState();\r\n            });\r\n        },\r\n        exec: function (options) {\r\n            options || (options = {});\r\n\r\n            this.store().sortBy(options.field, options.order);\r\n            this.store().update();\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    var commandName = 'upload';\r\n\r\n    var Cmd = docmana.CommandBase.extend({\r\n        init: function (options) {\r\n            this.name = commandName;\r\n            this.templateName = 'toolbarBtnUpload';\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this.main(), 'started', function () {\r\n                var that = this;\r\n                if (!this.$el) return;\r\n                var $file = this.$el.find(':file');\r\n                var uploader = this.main().ui.uploader;\r\n                // 如果有 jquery file upload 控件，则初始化 uploader 容器\r\n                if ($.fn.fileupload && uploader) {\r\n                    uploader.build($file);\r\n                } else {\r\n                    $file.on('change', function () {\r\n                        var val = $(this).val();\r\n                        if (val === \"\" || val == null) return;\r\n                        // 通过 jquery.form 提交\r\n                        that.store().upload($(this).closest('form'));\r\n                    });\r\n                }\r\n            });\r\n            this.listenTo(this, 'rendered', function () {\r\n\r\n\r\n            });\r\n        },\r\n        enable: function () {\r\n            docmana.CommandBase.prototype.enable.apply(this, arguments);\r\n            this.$element().find(':file').removeAttr('disabled');\r\n        },\r\n        disable: function () {\r\n            docmana.CommandBase.prototype.disable.apply(this, arguments);\r\n            this.$element().find(':file').attr('disabled', 'disabled');\r\n        }\r\n    });\r\n\r\n    docmana.commands[commandName] = function (options) {\r\n        return new Cmd(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n    \"use strict\";\r\n\r\n    var Navigation = docmana.CommandContainer.extend({\r\n        templateName: 'navigation',\r\n        breadcrumbTemplateName: 'breadcrumb',\r\n        defaults: {\r\n            autoAction: true,\r\n            autoRender: true,\r\n            commands: [{\r\n                name: 'navigation',\r\n                to: '.nav-group'\r\n            }, {\r\n                name: 'search',\r\n                to: '.search-group'\r\n            }, {\r\n                name: 'refresh',\r\n                to: '.search-group'\r\n            }]\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this.history(), 'change', function () {\r\n                this._renderBreadcrumb();\r\n            });\r\n            this.listenTo(this, 'rendered', function () {\r\n                this._renderBreadcrumb();\r\n                this._renderCommands();\r\n            });\r\n        },\r\n        events: {\r\n            'click .docmana-breadcrumb li > a': '_linkHandler'\r\n        },\r\n        $breadcrumb: function () {\r\n            return this.$('.docmana-breadcrumb');\r\n        },\r\n        _renderBreadcrumb: function () {\r\n            var tpl = this.tpl(this.breadcrumbTemplateName);\r\n            var pathData = this.history().getPath();\r\n            this.$breadcrumb().html(tpl(pathData));\r\n            this._initBreadcrumbInteractive();\r\n        },\r\n        _initBreadcrumbInteractive: function () {\r\n            var that = this;\r\n            this.$('li > a:not(.ui-droppable)').droppable({\r\n                accept: \".file-list-item\",\r\n                hoverClass: \"drop-active\",\r\n                drop: function (e, ui) {\r\n                    // 注意：如果这里要直接取 ui.draggable，则需手动更改 ddmanager\r\n                    var targets = that.workzone().getIds(ui.draggable);\r\n                    var dest = $(e.target).attr('data-hash');\r\n\r\n                    that.store().moveTo(dest, targets);\r\n                }\r\n            });\r\n        },\r\n        _linkHandler: function (e) {\r\n            e.preventDefault();\r\n            var hash = $(e.currentTarget).attr('data-hash');\r\n            this.main().exec('open', true, this.history().byId(hash));\r\n        }\r\n    });\r\n\r\n    docmana.ui.Navigation = Navigation;\r\n    docmana.ui.navigation = function (options) {\r\n        return new docmana.ui.Navigation(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n    \"use strict\";\r\n\r\n    // 通知\r\n    // 默认使用 noty，如果使用其他通知库，按照接口重写notify对象的相应方法\r\n\r\n    var notify = {\r\n        _core: $.noop,\r\n        warn: $.noop,\r\n        success: $.noop,\r\n        error: $.noop,\r\n        confirm: $.noop\r\n    };\r\n\r\n\r\n    docmana.ui.notify = notify;\r\n\r\n    if (!window.console) return;\r\n\r\n    if (window.noty == null) {\r\n        notify._core = function (option) {\r\n            console[option.type](option.text);\r\n        }\r\n        notify.warn = function (text) {\r\n            console['warn'](text);\r\n        }\r\n        notify.success = function (text) {\r\n            console['log'](text);\r\n        }\r\n        notify.error = function (text) {\r\n            console['error'](text);\r\n        }\r\n        notify.confirm = function (sb, cb, text) {\r\n            text || (text = docmana.resource('textConfirmOperate'));\r\n\r\n            var r = window.confirm(text);\r\n            if (r) {\r\n                sb();\r\n            } else {\r\n                cb();\r\n            }\r\n        }\r\n    } else {\r\n\r\n        notify._core = function (option) {\r\n            var n = noty($.extend({\r\n                type: 'warning',\r\n                dismissQueue: true,\r\n                force: true,\r\n                layout: 'topCenter',\r\n                theme: 'relax',  // bootstrapTheme\r\n                closeWith: ['click'],\r\n                maxVisible: 1,\r\n                animation: {\r\n                    open: { height: 'toggle' },\r\n                    close: { height: 'toggle' },\r\n                    easing: 'swing',\r\n                    speed: 100 // opening & closing animation speed\r\n                },\r\n                timeout: false,\r\n                killer: true,\r\n                modal: false\r\n            }, option));\r\n\r\n        };\r\n\r\n        notify.warn = function (text) {\r\n            notify._core({\r\n                text: text,\r\n                type: 'warning',\r\n                timeout: 4000\r\n            });\r\n        };\r\n\r\n        notify.success = function (text) {\r\n            notify._core({\r\n                text: text,\r\n                timeout: 2000,\r\n                type: 'success'\r\n            });\r\n        };\r\n\r\n        notify.error = function (text) {\r\n            notify._core({\r\n                text: text,\r\n                type: 'error',\r\n                timeout: false\r\n            });\r\n        };\r\n\r\n        notify.confirm = function (successCb, cancelCb, text) {\r\n            text || (text = docmana.resource('textConfirmOperate'));\r\n\r\n            notify._core({\r\n                text: text,\r\n                type: 'confirm',\r\n                modal: true,\r\n                buttons: [{\r\n                    addClass: 'btn btn-primary btn-xs', text: docmana.resource('textOk'), onClick: function ($noty) {\r\n                        $noty.close();\r\n                        successCb();\r\n                    }\r\n                }, {\r\n                    addClass: 'btn btn-danger btn-xs', text: docmana.resource('textCancel'), onClick: function ($noty) {\r\n                        $noty.close();\r\n                        cancelCb();\r\n                    }\r\n                }]\r\n            });\r\n        };\r\n\r\n    }\r\n\r\n\r\n\r\n})();\r\n\r\n","(function () {\r\n    \"use strict\";\r\n\r\n    // 状态栏界面\r\n\r\n\r\n    var Statusbar = docmana.CommandContainer.extend({\r\n        templateName: 'statusbar',\r\n        defaults: {\r\n            autoRender: true,\r\n            commands: [{\r\n                name: 'layout',\r\n                to: '.layout'\r\n            }]\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this.store(), 'update', function () {\r\n                this.updateStatus();\r\n            });\r\n            this.listenTo(this.workzone(), 'selected', function () {\r\n                this.updateStatus();\r\n            });\r\n            this.listenTo(this, 'rendered', function () {\r\n                this._renderCommands();\r\n            });\r\n        },\r\n        updateStatus: function () {\r\n            this.$('.status-text').html(this.tpl('statusbarText')(this.getStatus()));\r\n        },\r\n        getStatus: function () {\r\n            var data = this.store().cwdData();\r\n            var selectedIds = this.workzone().getIds();\r\n            var selectedSize = _.reduce(_.map(this.store().byIds(selectedIds), function (item) {\r\n                return item.mime === 'directory' ? NaN : item.size;\r\n            }), function (sum, n) {\r\n                return sum + n;\r\n            }, 0);\r\n            \r\n            return {\r\n                count: data.length,\r\n                selectedCount: selectedIds.length,\r\n                selectedSize: isNaN(selectedSize) ? \"\" : docmana.templateHelper.formatFileSize(selectedSize)\r\n            }\r\n        }\r\n    });\r\n\r\n    docmana.ui.Statusbar = Statusbar;\r\n    docmana.ui.statusbar = function (options) {\r\n        return new docmana.ui.Statusbar(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n    \"use strict\";\r\n\r\n    // 工具栏界面\r\n\r\n    var Toolbar = docmana.CommandContainer.extend({\r\n        className: 'docmana-toolbar',\r\n        templateName: 'toolbar',\r\n        defaults: {\r\n            autoRender: true,\r\n            autoAction: true,\r\n            commands: ['new', 'open', 'clipboard', 'organize', {\r\n                name: 'view',\r\n                to: '.right'\r\n            }, {\r\n                name: 'util',\r\n                to: '.right'\r\n            }]\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this, 'rendered', function () {\r\n                this._renderCommands();\r\n            });\r\n        }\r\n    });\r\n\r\n    docmana.ui.Toolbar = Toolbar;\r\n    docmana.ui.toolbar = function (options) {\r\n        return new docmana.ui.Toolbar(options);\r\n    }\r\n})();\r\n\r\n","(function () {\r\n    \"use strict\";\r\n\r\n    // 当前工作目录界面\r\n\r\n    var Uploader = docmana.ViewBase.extend({\r\n        templateName: 'uploader',\r\n        init: function () {\r\n            var that = this;\r\n            this.parentDialog().on('shown.bs.modal', function () {\r\n\r\n            }).on('hidden.bs.modal', function () {\r\n                // that.$body().html('');\r\n                that.main().$el.focus();  // 重设焦点\r\n            });\r\n        },\r\n        defaults: {\r\n            autoRender: true\r\n        },\r\n        events: {\r\n            'click .cancel': '_cancelHandler'\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this.main(), 'started', function () {\r\n                // 设置触发器\r\n                var that = this;\r\n                var statusbar = this.statusbar();\r\n                var $btn = $(this.tpl('uploaderTrigger')());\r\n                if (statusbar) {\r\n                    $btn.on('click', function () {\r\n                        that.parentDialog().modal('show');\r\n                    }).appendTo(statusbar.$('.uploader'));\r\n                    that.$trigger = $btn;\r\n                }\r\n            });\r\n            this.listenTo(this, 'rendered', function () {\r\n                this.parentDialog().modal({\r\n                    show: false\r\n                });\r\n            });\r\n        },\r\n        parentDialog: function () {\r\n            return this.$element().closest('.modal');\r\n        },\r\n        inputInstance: function ($input) {\r\n            $input = $input || this.$input;\r\n            return $input.data('blueimp-fileupload') || $input.data('fileupload');\r\n        },\r\n        $body: function () {\r\n            return this.$('.files');\r\n        },\r\n        updateBadge: function () {\r\n            var count = this.count();\r\n            var $badge = this.$trigger.find('.badge');\r\n            $badge.text(count);\r\n            if (count === 0) {\r\n                $badge.hide();\r\n            } else {\r\n                $badge.show();\r\n            }\r\n        },\r\n        count: function(){\r\n            var count = this.$('.file').length;\r\n            return count;\r\n        },\r\n        updateDialogDisplay: function(){\r\n            if (this.count() === 0) {\r\n                this.parentDialog().modal('hide');\r\n            } else {\r\n                this.parentDialog().modal('show');\r\n            }\r\n        },\r\n        build: function ($fileInput) {\r\n            var that = this;\r\n            var tplFile = this.tpl('uploaderFiles');\r\n            var formatFileSize = docmana.utils.formatFileSize;\r\n            var url = _.isFunction(this.props.url) ? this.props.url()\r\n                : (this.props.url || this.store().url());\r\n\r\n            $fileInput.fileupload({\r\n                url: url,\r\n                formData: function ($input) {\r\n                    this.url = that.store().uploadUrl == null ? this.url : that.store().uploadUrl(this.url, this.files, this.fileInput);\r\n\r\n                    var params = that.store().uploadParams(this.files, this.fileInput);\r\n                    return _.map(params, function (value, key) {\r\n                        return {\r\n                            name: key,\r\n                            value: value\r\n                        }\r\n                    });\r\n                },\r\n                dataType: 'json',\r\n                add: function (e, data) {\r\n                    if (e.isDefaultPrevented()) {\r\n                        return false;\r\n                    }\r\n\r\n                    var $this = $(this);\r\n                    var instance = that.inputInstance($this);\r\n                    var options = instance.options;\r\n\r\n                    data.context = $(tplFile({\r\n                        files: data.files,\r\n                        options: options\r\n                    })).data('data', data).addClass('processing');\r\n\r\n                    that.$body().append(data.context);\r\n\r\n                    that.updateBadge();\r\n                    that.updateDialogDisplay();\r\n\r\n                    data.process().always(function () {\r\n                        data.context.each(function (index) {\r\n                            $(this).find('.size').text(\r\n                                formatFileSize(data.files[index].size)\r\n                            );\r\n                        }).removeClass('processing');\r\n                        // that._renderPreviews(data);\r\n                    }).done(function () {\r\n                        data.context.find('.start').prop('disabled', false);\r\n\r\n                        if ((instance._trigger('added', e, data) !== false) &&\r\n                            (options.autoUpload || data.autoUpload) &&\r\n                            data.autoUpload !== false) {\r\n                            data.submit();\r\n                        }\r\n                    }).fail(function () {\r\n                        if (data.files.error) {\r\n                            data.context.each(function (index) {\r\n                                var error = data.files[index].error;\r\n                                if (error) {\r\n                                    $(this).find('.status').text(error);\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                },\r\n                progress: function (e, data) {\r\n                    if (e.isDefaultPrevented()) {\r\n                        return false;\r\n                    }\r\n                    var progress = Math.floor(data.loaded / data.total * 100);\r\n                    if (data.context) {\r\n                        data.context.each(function () {\r\n                            $(this).find('.progress')\r\n                                .attr('aria-valuenow', progress)\r\n                                .children().first().css(\r\n                                    'width',\r\n                                    progress + '%'\r\n                                );\r\n                            $(this).find('.status > .percent').text(progress + '%');\r\n                        });\r\n                    }\r\n                },\r\n                fail: function (e, data) {\r\n                    if (e.isDefaultPrevented()) {\r\n                        return false;\r\n                    }\r\n                    var instance = that.inputInstance($(this));\r\n                    if (data.context) {\r\n                        data.context.each(function (index) {\r\n                            if (data.errorThrown !== 'abort') {\r\n                                var file = data.files[index];\r\n                                file.error = file.error || data.errorThrown;\r\n                                $(this).find('.folder').text(file.error);\r\n                            } else {\r\n                                $(this).remove();\r\n                                instance._trigger('failed', e, data);\r\n                                instance._trigger('finished', e, data);\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    that.updateBadge();\r\n                    that.updateDialogDisplay();\r\n\r\n                },\r\n                done: function (e, data) {\r\n                    data.context.remove();\r\n                    that.updateBadge();\r\n                    that.updateDialogDisplay();\r\n                    that.store().trigger('uploaded', data.result);\r\n                }\r\n            });\r\n\r\n            // TODO: 为什么在 fileupload add 方法内获取 that.$input 不正确\r\n            this.$input = $fileInput;\r\n        },\r\n        _cancelHandler: function (e) {\r\n            e.preventDefault();\r\n            var $file = $(e.currentTarget).closest('.file-upload,.file-download');\r\n            var data = $file.data('data') || {};\r\n            data.context = data.context || $file;\r\n            if (data.abort) {\r\n                data.abort();\r\n            } else {\r\n                data.errorThrown = 'abort';\r\n                this.trigger('fail', e, data);\r\n            }\r\n        }\r\n    });\r\n\r\n    docmana.ui.Uploader = Uploader;\r\n    docmana.ui.uploader = function (options) {\r\n        return new docmana.ui.Uploader(options);\r\n    }\r\n})();\r\n\r\n","(function () {\r\n    \"use strict\";\r\n\r\n    var Viewer = docmana.ViewBase.extend({\r\n        templateName: 'viewer',\r\n        defaults: {\r\n            autoAction: true,\r\n            autoRender: true,\r\n            fileType: [\r\n                '.txt', '.csv', '.pdf', '.jpg', '.gif', '.png', '.tiff', '.ppt', '.pptx',\r\n                '.doc', '.docx', '.xls', '.xlsx'\r\n            ]\r\n        },\r\n\r\n        init: function () {\r\n            var that = this;\r\n            this.parentDialog().on('shown.bs.modal', function () {\r\n                that.$body().css({\r\n                    top: that.$('.modal-header').outerHeight(),\r\n                    bottom: that.$('.modal-footer').outerHeight()\r\n                });\r\n                that.viewCurrent();\r\n            }).on('hidden.bs.modal', function () {\r\n                that.$body().html('');\r\n                that.main().$el.focus();  // 重设焦点\r\n            });\r\n        },\r\n        listen: function () {\r\n            this.listenTo(this.workzone(), 'selected', function () {\r\n                if (this.$el.is(':visible')) {\r\n                    this.viewCurrent();\r\n                }\r\n            });\r\n            this.listenTo(this, 'rendered', function () {\r\n                this.parentDialog().modal({\r\n                    show: false\r\n                });\r\n            });\r\n        },\r\n        parentDialog: function () {\r\n            return this.$element().closest('.modal');\r\n        },\r\n        callout: function () {\r\n            this.parentDialog().modal('show');\r\n        },\r\n        $body: function () {\r\n            return this.$el.find('.docmana-viewer-body');\r\n        },\r\n        viewCurrent: function () {\r\n            var that = this;\r\n            var selectIds = that.workzone().getIds();\r\n            if (selectIds.length > 0) {\r\n                var target = selectIds[0];\r\n                that.$body().html('');\r\n                var data = that.store().byId(target);\r\n                var ext = that.store().getFileExt(data);\r\n                that.parentDialog().find('.modal-title').text(data.name);\r\n\r\n                if (that.props.fileType.indexOf(ext) >= 0) {\r\n                    that.store().content(target).done(function (resp) {\r\n                        if (resp.view === 'path') {\r\n                            var url = that.store().fileUrl(resp.content);\r\n                            if (ext === '.pdf') {\r\n                                PDFObject.embed(url, that.$body());\r\n                            } else {\r\n                                that.$body().html('<iframe src=\"' + url + '\"></iframe>');\r\n                            }\r\n\r\n                        }\r\n                        if (resp.view === 'content') {\r\n                            that.$body().html(resp.content);\r\n                        }\r\n                    });\r\n                } else {\r\n                    var tpl = this.tpl('fileInfo');\r\n                    that.$body().html(tpl(data));\r\n                }\r\n\r\n            }\r\n        },\r\n        _previousHandler: function (e) {\r\n            this.workzone().selectTo('previous');\r\n        },\r\n        _nextHandler: function (e) {\r\n            this.workzone().selectTo('next');\r\n        },\r\n        _downloadHandler: function (e) {\r\n            this.main().exec('download');\r\n        }\r\n    });\r\n\r\n    docmana.ui.Viewer = Viewer;\r\n    docmana.ui.viewer = function (options) {\r\n        return new docmana.ui.Viewer(options);\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n    \"use strict\";\r\n\r\n    // 当前工作目录界面\r\n\r\n    var WorkZone = docmana.ViewBase.extend({\r\n        init: function () {\r\n            var that = this;\r\n            this._buffer = [];\r\n            this._selected = [];\r\n            this._cwd = null;\r\n            this._timer = [];\r\n            this.layout = this.props.layout;\r\n            this._moving = false;\r\n            this._renderListThrottle = _.throttle(_.bind(this._renderList, this), 100);\r\n\r\n            this._triggerSelectDebounce = _.debounce(_.bind(function () {\r\n                this.trigger('selected', this.select());\r\n            }, this), 200);\r\n\r\n            var originX = 0;\r\n            var originY = 0;\r\n            // 记录 moving\r\n            this.$el.on('mousedown', function (e) {\r\n                that._moving = false;\r\n                originX = e.clientX;\r\n                originY = e.clientY;\r\n            }).on('mousemove', function (e) {\r\n                if (e.clientX !== originX || e.clientY !== originY) {\r\n                    that._moving = true;\r\n                }\r\n            });\r\n\r\n            this._initHotKeys();\r\n            this._initSelectableInteractive();\r\n\r\n            this.render();\r\n        },\r\n        events: {\r\n            'scroll': '_scrollHandler',\r\n            'dblclick .file-list-item': '_itemDblClickHandler',\r\n            'mousedown .file-list-item .filename': '_editNameHandler',\r\n            'click': '_clickHandler'\r\n        },\r\n        defaults: {\r\n            bottomThreshold: 50,\r\n            itemCountPerScreen: 50\r\n        },\r\n\r\n        listen: function () {\r\n\r\n            this.listenTo(this.store(), 'update', function (data, request) {\r\n                if (request.cmd) {\r\n                    if (request.cmd === 'rename') {\r\n                        this._updateSelectedCache(request.target, request.name);\r\n                    }\r\n                    if (request.cmd === 'mkdir') {\r\n\r\n                    }\r\n                }\r\n\r\n                this.source(data);\r\n            });\r\n\r\n            this.listenTo(this, 'refresh', function (items) {\r\n                this._renderList(false);\r\n                this._restoreSelectUI();\r\n            });\r\n\r\n            //this.listenTo(this, 'layout', function() {\r\n            //    this.render();\r\n            //});\r\n\r\n            this.listenTo(this, 'selected', function ($select) {\r\n                this._selected = _.map($select, function (item) {\r\n                    return {\r\n                        name: $(item).data('name'),\r\n                        id: $(item).attr('id')\r\n                    };\r\n                });\r\n            });\r\n        },\r\n        changeLayout: function (layout) {\r\n            this.layout = layout;\r\n            this.render();\r\n            this.trigger('layout');\r\n            this.source(this.store()._data);\r\n        },\r\n        isListLayout: function () {\r\n            return this.layout === 'list';\r\n        },\r\n        source: function (items) {\r\n\r\n            this._buffer = this.store().cwdData();\r\n            if (this.store().cwd().hash !== this._cwd) {\r\n                this._cwd = this.store().cwd().hash;\r\n                this._selected = [];\r\n            }\r\n            this.trigger('refresh', this._buffer);\r\n        },\r\n        getIds: function ($items) {\r\n            if ($items == null) {\r\n                $items = this.select();\r\n            }\r\n            var ids = $.map($items, function (dom) {\r\n                return $(dom).attr('id');\r\n            });\r\n            return ids;\r\n        },\r\n        render: function () {\r\n            var tpl = this.isListLayout() ? this.tpl('workzoneListView') : this.tpl('workzoneIconsView');\r\n            this.$el.html(tpl(this.props));\r\n\r\n            this.$view = this.$('.docmana-workzone-view');\r\n\r\n            // 可拖拽\r\n\r\n            if (this._buffer.length > 0) {\r\n                this.trigger('refresh');\r\n            }\r\n        },\r\n        select: function (elements) {\r\n\r\n            if (elements != null) {\r\n                docmana.utils.selectSelectableElement(this.$el, elements);\r\n            }\r\n\r\n            // TODO: 这里在设置后马上获取选中项会不会不正确？？\r\n            return this.$('.file-list-item.ui-selected');\r\n\r\n        },\r\n\r\n        _updateSelectedCache: function (id, newName) {\r\n            var item = _.find(this._selected, function (value) {\r\n                return value.id === id;\r\n            });\r\n            if (item != null) {\r\n                item.name = newName;\r\n            }\r\n        },\r\n        _restoreSelectUI: function () {\r\n            var that = this;\r\n            var willSelect = _.compact(_.map(this._selected, function (value) {\r\n                return that.$('[data-name=\"' + value.name + '\"]')[0];\r\n            }));\r\n            that.select(willSelect);\r\n\r\n        },\r\n        _renderItem: function (item) {\r\n            var tplName = this.isListLayout() ? 'workzoneListViewItem' : 'workzoneIconsViewItem';\r\n            return this.tpl(tplName)(item);\r\n        },\r\n        _renderList: function (isAppend) {\r\n            if (isAppend == null) isAppend = true;\r\n            var that = this;\r\n            var $wrapper = this.$el;\r\n            var bottomThreshold = this.props.bottomThreshold;\r\n            var itemCountPerScreen = this.props.itemCountPerScreen;\r\n\r\n            var $last = this.$('[id]:last');\r\n\r\n            //var shouldRender = !$last.length\r\n            //    || ($last.position().top - ($wrapper.height() + $wrapper.scrollTop() + bottomThreshold)) <= 0;\r\n\r\n            //if (!shouldRender) return;\r\n\r\n            var items = this._buffer.splice(0, itemCountPerScreen);\r\n\r\n            var html = $.map(items, function (item) {\r\n                return that._renderItem(item);\r\n            });\r\n\r\n            this.$view[isAppend ? 'append' : 'html'](html.join(''));\r\n\r\n            // TODO: 设置选中项的显示状态\r\n            this._setItemInteractive();\r\n\r\n            // 刷新状态，否则mousedown时会报错\r\n            this.$el.selectable(\"refresh\");\r\n        },\r\n        $items: function () {\r\n            return this.$('.file-list-item');\r\n        },\r\n        _getShiftSelected: function ($el) {\r\n            var $items = this.$items();\r\n            var $fistSelected = $items.filter('.ui-selected').first();\r\n            var $lastSelected = $items.filter('.ui-selected').last();\r\n            var idx = $items.index($el);\r\n            var firstIdx = $items.index($fistSelected);\r\n            var lastIdx = $items.index($lastSelected);\r\n\r\n            firstIdx = Math.min(idx, firstIdx);\r\n            lastIdx = Math.max(idx, lastIdx);\r\n\r\n            return $items.slice(firstIdx, (lastIdx + 1));\r\n        },\r\n        _isNormalMouseEvent: function (e) {\r\n            return !e.shiftKey && !e.ctrlKey && !e.metaKey;\r\n        },\r\n        _initSelectableInteractive: function () {\r\n            var that = this;\r\n\r\n            // 设置可选择\r\n            this.$el\r\n                .on('mousedown', '.file-list-item', function (e) {\r\n                    var $target = $(e.currentTarget);\r\n                    if (!that._isNormalMouseEvent(e)) {\r\n                        e.preventDefault();\r\n                        if (e.ctrlKey) {\r\n                            var curr = that.select();\r\n                            $.merge($target, curr);\r\n                        }\r\n                        // shift 操作的行为与windows下不一致\r\n                        if (e.shiftKey) {\r\n                            $target = that._getShiftSelected($target);\r\n                        }\r\n                        that.select($target);\r\n                    } else {\r\n                        // 未选中时，mousedown 触发选中\r\n                        if (!$target.hasClass('ui-selected')) {\r\n                            that.select($target);\r\n                        }\r\n                    }\r\n\r\n                })\r\n                .on('click', '.file-list-item', function (e) {\r\n                    var $target = $(e.currentTarget);\r\n                    // 多选状态下，click 触发选中\r\n                    if (that.select().length > 1 && that._isNormalMouseEvent(e)) {\r\n                        that.select($target);\r\n                        //$target.focus();\r\n                    }\r\n                })\r\n                .selectable({\r\n                    //appendTo: this.$el,\r\n                    delay: 50,\r\n                    filter: \".file-list-item\",\r\n                    //cancel: '.ui-selected',\r\n                    start: function (event, ui) {\r\n                        that._clearTimer();\r\n                        that.$('.inline-edit').blur();\r\n                    },\r\n                    selected: function (e, ui) {\r\n                      //  $(ui.selected).addClass('bg-primary');\r\n                        that._triggerSelectDebounce();\r\n                    },\r\n                    unselected: function (e, ui) {\r\n                     //   $(ui.unselected).removeClass('bg-primary');\r\n                        that._triggerSelectDebounce();\r\n                    },\r\n                    stop: function (e, ui) {\r\n                        //   e.stopImmediatePropagation();\r\n                    }\r\n                });\r\n        },\r\n        _setItemInteractive: function () {\r\n            var that = this;\r\n            // 对每项设置为拖动\r\n            this.$('.drag-block:not(.ui-draggable)').draggable({\r\n                appendTo: that.$el,\r\n                //cancel: ':not(.drag-block), input,textarea,button,select,option',\r\n                delay: 100,\r\n                helper: function () {\r\n                    return '<div class=\"cwd-draggable-helper\"><span class=\"badge count\"></span></div>';\r\n                },\r\n                cursorAt: { top: 20, left: 20 },\r\n                start: function (e, ui) {\r\n                    that._clearTimer();\r\n\r\n                    var $selected = that.select();\r\n                    // 设置当前选中项为当前拖动元素\r\n                    $.ui.ddmanager.current.element = $selected;\r\n\r\n                    // 设置 helper\r\n                    var $thumbs = $($selected.find('.filetype').splice(0, 4)).clone();\r\n                    $.each($thumbs, function (i, el) {\r\n                        $(el).addClass('icon' + i);\r\n                    });\r\n                    ui.helper.append($thumbs).find('.count').html($selected.length);\r\n                }\r\n            });\r\n\r\n            // 设置文件夹可拖动放置\r\n            this.$('.file-list-item.type-directory:not(.ui-droppable)').droppable({\r\n                accept: \".file-list-item\",\r\n                hoverClass: \"drop-active\",\r\n                drop: function (e, ui) {\r\n                    // 注意：如果这里要直接取 ui.draggable，则需手动更改 ddmanager\r\n                    var targets = that.getIds(ui.draggable);\r\n                    var dest = $(e.target).attr('id');\r\n\r\n                    that.store().moveTo(dest, targets);\r\n                }\r\n            });\r\n        },\r\n        _unselectAll: function (e) {\r\n            if (!e.shiftKey && !e.ctrlKey && !e.metaKey) {\r\n                this.select([]);\r\n            }\r\n        },\r\n        _selectAll: function () {\r\n            this.select(this.$('.file-list-item'));\r\n        },\r\n        _clearTimer: function () {\r\n            while (this._timer.length > 0) {\r\n                var id = this._timer.shift();\r\n                clearTimeout(id);\r\n            }\r\n        },\r\n\r\n        // Hanlders\r\n        _scrollHandler: function () {\r\n            this._renderListThrottle();\r\n        },\r\n        _clickHandler: function (e) {\r\n            e.preventDefault();\r\n            if (!$(e.target).is(':input')) {\r\n                this.$('.inline-edit').blur();\r\n                // 由于点击子节点会造成父节点焦点丢失，这里的判断并没多大作用...\r\n               // if ($(document.activeElement).closest('.docmana').length === 0) {\r\n                    this._$focusEl().focus();\r\n               // }\r\n            }\r\n            // 如果单纯点击，则手动进行反选\r\n            if (!this._moving && $(e.target).closest('.file-list-item').length === 0) {\r\n                this._unselectAll(e);\r\n            }\r\n        },\r\n        _isSingleSelected: function ($el) {\r\n            return $el.closest('.file-list-item').hasClass('ui-selected') && this.select().length === 1;\r\n        },\r\n        _editNameHandler: function (e) {\r\n            if (e.button === 2) return;\r\n\r\n            var $el = $(e.currentTarget);\r\n\r\n            if (this._isSingleSelected($el)) {\r\n                var timer = _.delay(_.bind(function ($el) {\r\n                    if (this._isSingleSelected($el)) {\r\n\r\n                        this.main().exec('rename');\r\n                    }\r\n                }, this), 700, $el);\r\n\r\n                this._timer.push(timer);\r\n            }\r\n\r\n\r\n        },\r\n        _isSelecting: function () {\r\n            return $('.ui-selectable-helper').length > 0;\r\n        },\r\n        _isInput: function ($el) {\r\n            return $el.is('input, textarea, select, button');\r\n        },\r\n        _itemDblClickHandler: function (e) {\r\n            if (this._isInput($(e.target))) return;\r\n            this._clearTimer();\r\n            this.main().exec('open');\r\n        },\r\n        _getSingleSelect: function () {\r\n            var last = this.select().last();\r\n            if (last.length === 0) {\r\n                return this.$items().first();\r\n            }\r\n            return last;\r\n        },\r\n        editItemName: function (callback, isForce) {\r\n            var $item = this.select();\r\n            if ($item.length !== 1) return;\r\n            \r\n            var $filename = $item.find('.filename');\r\n            var mode = this.isListLayout() ? 0 : 1;\r\n            docmana.utils.inlineEdit($filename, function (name) {\r\n                callback(name);\r\n            }, mode, isForce);\r\n        },\r\n        selectTo: function (pos) {\r\n            var $items = this.$items();\r\n            var curr = this.select().last();\r\n            if (curr.length === 0) {\r\n                curr = $items.first();\r\n            }\r\n            if (curr.length === 0) return;\r\n\r\n            var to = curr;\r\n            var idx = $items.index(curr);\r\n            if (pos === 'next') {\r\n                if (idx + 1 < $items.length) {\r\n                    to = $($items[idx + 1]);\r\n                }\r\n            }\r\n            if (pos === 'previous') {\r\n                if (idx - 1 >= 0) {\r\n                    to = $($items[idx - 1]);\r\n                }\r\n            }\r\n            this.select(to);\r\n        },\r\n        _$focusEl: function () {\r\n            return this.main().$el;\r\n        },\r\n        _initHotKeys: function () {\r\n            var that = this;\r\n\r\n            // TODO: 添加图标布局下的 up down 处理\r\n\r\n            this._$focusEl().bind('keydown.docmana', 'left', function (e) {\r\n                if (!that.isListLayout()) {\r\n                    that.selectTo('previous');\r\n                }\r\n            }).bind('keydown.docmana', 'right', function (e) {\r\n                if (!that.isListLayout()) {\r\n                    that.selectTo('next');\r\n                }\r\n            }).bind('keydown.docmana', 'up', function (e) {\r\n                if (that.isListLayout()) {\r\n                    that.selectTo('previous');\r\n                }\r\n            }).bind('keydown.docmana', 'down', function (e) {\r\n                if (that.isListLayout()) {\r\n                    that.selectTo('next');\r\n                }\r\n            }).bind('keydown.docmana', 'ctrl+a', function (e) {\r\n                e.preventDefault();\r\n                that._selectAll();\r\n            });\r\n\r\n            var commands = this.main().commands;\r\n\r\n            _.forEach(commands, function (cmd) {\r\n                if (cmd.shortcuts) {\r\n                    that._$focusEl().bind('keydown.docmana', cmd.shortcuts, function (e) {\r\n                        e.preventDefault();\r\n                        cmd.shortcutExec();\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n    });\r\n\r\n    docmana.ui.Workzone = WorkZone;\r\n    docmana.ui.workzone = function (options) {\r\n        return new docmana.ui.Workzone(options);\r\n    }\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    docmana.resources['en'] = {\r\n\r\n        'cmdBack': 'Back',\r\n        'cmdForward': 'Forward',\r\n        'cmdOpen': 'Open',\r\n        'cmdUpload': 'Upload',\r\n        'cmdDownload': 'Download',\r\n        'cmdCut': 'Cut',\r\n        'cmdCopy': 'Copy',\r\n        'cmdPaste': 'Paste',\r\n        'cmdSort': 'Sort by',\r\n        'cmdMkdir': 'New folder',\r\n        'cmdDuplicate': 'Duplicate',\r\n        'cmdRename': 'Rename',\r\n        'cmdRm': 'Remove',\r\n        'sortByName': 'Name',\r\n        'sortBySize': 'Size',\r\n        'sortByType': 'Type',\r\n        'sortByDate': 'Date modified',\r\n        'sortAscending': 'Ascending',\r\n        'sortDescending': 'Descending',\r\n        'fileName': 'Name',\r\n        'fileDateModified': 'Date modified',\r\n        'fileType': 'Type',\r\n        'fileSize': 'Size',\r\n        'statusbarItems': 'items',\r\n        'statusbarSelectedItem': '{0} item selected',\r\n        'layoutList': 'List',\r\n        'layoutLargeIcons': 'Large Icons',\r\n        'textSearch': 'Search...',\r\n        'textPreviousItem': 'previous item',\r\n        'textNextItem': 'next item',\r\n        'textFileUpload': 'File uploader',\r\n        'textClose': 'Close',\r\n        'textOk': 'Ok',\r\n        'textCancel': 'Cancel',\r\n        'textConfirmOperate': 'Are you sure you want to do this operation?',\r\n\r\n        'labelLanguage': 'Language: ',\r\n        'labelTheme': 'Theme: ',\r\n\r\n        'kindUnknown': 'Unknown',\r\n        'kindFolder': 'Folder',\r\n        'kindAlias': 'Alias',\r\n        'kindAliasBroken': 'Broken alias',\r\n        // applications\r\n        'kindApp': 'Application',\r\n        'kindPostscript': 'Postscript document',\r\n        'kindMsOffice': 'Microsoft Office document',\r\n        'kindMsWord': 'Microsoft Word document',\r\n        'kindMsExcel': 'Microsoft Excel document',\r\n        'kindMsPP': 'Microsoft Powerpoint presentation',\r\n        'kindOO': 'Open Office document',\r\n        'kindAppFlash': 'Flash application',\r\n        'kindPDF': 'Portable Document Format (PDF)',\r\n        'kindTorrent': 'Bittorrent file',\r\n        'kind7z': '7z archive',\r\n        'kindTAR': 'TAR archive',\r\n        'kindGZIP': 'GZIP archive',\r\n        'kindBZIP': 'BZIP archive',\r\n        'kindXZ': 'XZ archive',\r\n        'kindZIP': 'ZIP archive',\r\n        'kindRAR': 'RAR archive',\r\n        'kindJAR': 'Java JAR file',\r\n        'kindTTF': 'True Type font',\r\n        'kindOTF': 'Open Type font',\r\n        'kindRPM': 'RPM package',\r\n        // texts\r\n        'kindText': 'Text document',\r\n        'kindTextPlain': 'Plain text',\r\n        'kindPHP': 'PHP source',\r\n        'kindCSS': 'Cascading style sheet',\r\n        'kindHTML': 'HTML document',\r\n        'kindJS': 'Javascript source',\r\n        'kindRTF': 'Rich Text Format',\r\n        'kindC': 'C source',\r\n        'kindCHeader': 'C header source',\r\n        'kindCPP': 'C++ source',\r\n        'kindCPPHeader': 'C++ header source',\r\n        'kindShell': 'Unix shell script',\r\n        'kindPython': 'Python source',\r\n        'kindJava': 'Java source',\r\n        'kindRuby': 'Ruby source',\r\n        'kindPerl': 'Perl script',\r\n        'kindSQL': 'SQL source',\r\n        'kindXML': 'XML document',\r\n        'kindAWK': 'AWK source',\r\n        'kindCSV': 'Comma separated values',\r\n        'kindDOCBOOK': 'Docbook XML document',\r\n        'kindMarkdown': 'Markdown text',\r\n        // images\r\n        'kindImage': 'Image',\r\n        'kindBMP': 'BMP image',\r\n        'kindJPEG': 'JPEG image',\r\n        'kindGIF': 'GIF Image',\r\n        'kindPNG': 'PNG Image',\r\n        'kindTIFF': 'TIFF image',\r\n        'kindTGA': 'TGA image',\r\n        'kindPSD': 'Adobe Photoshop image',\r\n        'kindXBITMAP': 'X bitmap image',\r\n        'kindPXM': 'Pixelmator image',\r\n        // media\r\n        'kindAudio': 'Audio media',\r\n        'kindAudioMPEG': 'MPEG audio',\r\n        'kindAudioMPEG4': 'MPEG-4 audio',\r\n        'kindAudioMIDI': 'MIDI audio',\r\n        'kindAudioOGG': 'Ogg Vorbis audio',\r\n        'kindAudioWAV': 'WAV audio',\r\n        'AudioPlaylist': 'MP3 playlist',\r\n        'kindVideo': 'Video media',\r\n        'kindVideoDV': 'DV movie',\r\n        'kindVideoMPEG': 'MPEG movie',\r\n        'kindVideoMPEG4': 'MPEG-4 movie',\r\n        'kindVideoAVI': 'AVI movie',\r\n        'kindVideoMOV': 'Quick Time movie',\r\n        'kindVideoWM': 'Windows Media movie',\r\n        'kindVideoFlash': 'Flash movie',\r\n        'kindVideoMKV': 'Matroska movie',\r\n        'kindVideoOGG': 'Ogg movie'\r\n    }\r\n\r\n})();\r\n\r\n","(function () {\r\n\r\n    \"use strict\";\r\n\r\n    docmana.resources['zh-CN'] = {\r\n\r\n        'cmdBack': '后退',\r\n        'cmdForward': '前进',\r\n        'cmdOpen': '打开',\r\n        'cmdUpload': '上传',\r\n        'cmdDownload': '下载',\r\n        'cmdCut': '剪切',\r\n        'cmdCopy': '复制',\r\n        'cmdPaste': '粘贴',\r\n        'cmdSort': '排序方式',\r\n        'cmdMkdir': '新建文件夹',\r\n        'cmdDuplicate': '副本',\r\n        'cmdRename': '重命名',\r\n        'cmdRm': '移除',\r\n        'sortByName': '名称',\r\n        'sortBySize': '大小',\r\n        'sortByType': '类型',\r\n        'sortByDate': '修改日期',\r\n        'sortAscending': '升序',\r\n        'sortDescending': '降序',\r\n        'fileName': '名称',\r\n        'fileDateModified': '修改日期',\r\n        'fileType': '类型',\r\n        'fileSize': '大小',\r\n        'statusbarItems': '个项目',\r\n        'statusbarSelectedItem': '选中 {0} 个项目',\r\n        'layoutList': '列表布局',\r\n        'layoutLargeIcons': '图标布局',\r\n        'textSearch': '搜索...',\r\n        'textPreviousItem': '前一项',\r\n        'textNextItem': '后一项',\r\n        'textFileUpload': '文件上传器',\r\n        'textClose': '关闭',\r\n        'textOk': '确定',\r\n        'textCancel': '取消',\r\n        'textConfirmOperate': '确定做此操作？',\r\n\r\n        'labelLanguage': '语言：',\r\n        'labelTheme': '主题：',\r\n\r\n\r\n        'kindUnknown': '未知',\r\n        'kindFolder': '文件夹',\r\n        'kindAlias': '别名',\r\n        'kindAliasBroken': '错误的别名',\r\n        // applications\r\n        'kindApp': '程序',\r\n        'kindPostscript': 'Postscript 文档',\r\n        'kindMsOffice': 'Microsoft Office 文档',\r\n        'kindMsWord': 'Microsoft Word 文档',\r\n        'kindMsExcel': 'Microsoft Excel 文档',\r\n        'kindMsPP': 'Microsoft Powerpoint 演示',\r\n        'kindOO': 'Open Office 文档',\r\n        'kindAppFlash': 'Flash 程序',\r\n        'kindPDF': 'Portable Document Format (PDF)',\r\n        'kindTorrent': 'Bittorrent 文件',\r\n        'kind7z': '7z 压缩包',\r\n        'kindTAR': 'TAR 压缩包',\r\n        'kindGZIP': 'GZIP 压缩包',\r\n        'kindBZIP': 'BZIP 压缩包',\r\n        'kindXZ': 'XZ 压缩包',\r\n        'kindZIP': 'ZIP 压缩包',\r\n        'kindRAR': 'RAR 压缩包',\r\n        'kindJAR': 'Java JAR 文件',\r\n        'kindTTF': 'True Type 字体',\r\n        'kindOTF': 'Open Type 字体',\r\n        'kindRPM': 'RPM 包',\r\n        // texts\r\n        'kindText': '文本文件',\r\n        'kindTextPlain': '纯文本',\r\n        'kindPHP': 'PHP 源代码',\r\n        'kindCSS': '层叠样式表(CSS)',\r\n        'kindHTML': 'HTML 文档',\r\n        'kindJS': 'Javascript 源代码',\r\n        'kindRTF': '富文本格式(RTF)',\r\n        'kindC': 'C 源代码',\r\n        'kindCHeader': 'C 头文件',\r\n        'kindCPP': 'C++ 源代码',\r\n        'kindCPPHeader': 'C++ 头文件',\r\n        'kindShell': 'Unix 外壳脚本',\r\n        'kindPython': 'Python 源代码',\r\n        'kindJava': 'Java 源代码',\r\n        'kindRuby': 'Ruby 源代码',\r\n        'kindPerl': 'Perl 源代码',\r\n        'kindSQL': 'SQL 脚本',\r\n        'kindXML': 'XML 文档',\r\n        'kindAWK': 'AWK 源代码',\r\n        'kindCSV': '逗号分隔值文件(CSV)',\r\n        'kindDOCBOOK': 'Docbook XML 文档',\r\n        // images\r\n        'kindImage': '图片',\r\n        'kindBMP': 'BMP 图片',\r\n        'kindJPEG': 'JPEG 图片',\r\n        'kindGIF': 'GIF 图片',\r\n        'kindPNG': 'PNG 图片',\r\n        'kindTIFF': 'TIFF 图片',\r\n        'kindTGA': 'TGA 图片',\r\n        'kindPSD': 'Adobe Photoshop 图片',\r\n        'kindXBITMAP': 'X bitmap 图片',\r\n        'kindPXM': 'Pixelmator 图片',\r\n        // media\r\n        'kindAudio': '音频',\r\n        'kindAudioMPEG': 'MPEG 音频',\r\n        'kindAudioMPEG4': 'MPEG-4 音频',\r\n        'kindAudioMIDI': 'MIDI 音频',\r\n        'kindAudioOGG': 'Ogg Vorbis 音频',\r\n        'kindAudioWAV': 'WAV 音频',\r\n        'AudioPlaylist': 'MP3 播放列表',\r\n        'kindVideo': '视频',\r\n        'kindVideoDV': 'DV 视频',\r\n        'kindVideoMPEG': 'MPEG 视频',\r\n        'kindVideoMPEG4': 'MPEG-4 视频',\r\n        'kindVideoAVI': 'AVI 视频',\r\n        'kindVideoMOV': 'Quick Time 视频',\r\n        'kindVideoWM': 'Windows Media 视频',\r\n        'kindVideoFlash': 'Flash 视频',\r\n        'kindVideoMKV': 'Matroska 视频',\r\n        'kindVideoOGG': 'Ogg 视频'\r\n    }\r\n\r\n})();\r\n\r\n"],"sourceRoot":"/source/"}