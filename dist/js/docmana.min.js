var dateFormat=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,i=/[^-+\dA-Z]/g,n=function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t};return function(o,a,s){var r=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(o)||/\d/.test(o)||(a=o,o=void 0),o=o?new Date(o):new Date,isNaN(o))throw SyntaxError("invalid date");a=String(r.masks[a]||a||r.masks["default"]),"UTC:"==a.slice(0,4)&&(a=a.slice(4),s=!0);var l=s?"getUTC":"get",c=o[l+"Date"](),d=o[l+"Day"](),u=o[l+"Month"](),h=o[l+"FullYear"](),p=o[l+"Hours"](),m=o[l+"Minutes"](),f=o[l+"Seconds"](),g=o[l+"Milliseconds"](),v=s?0:o.getTimezoneOffset(),b={d:c,dd:n(c),ddd:r.i18n.dayNames[d],dddd:r.i18n.dayNames[d+7],m:u+1,mm:n(u+1),mmm:r.i18n.monthNames[u],mmmm:r.i18n.monthNames[u+12],yy:String(h).slice(2),yyyy:h,h:p%12||12,hh:n(p%12||12),H:p,HH:n(p),M:m,MM:n(m),s:f,ss:n(f),l:n(g,3),L:n(g>99?Math.round(g/10):g),t:12>p?"a":"p",tt:12>p?"am":"pm",T:12>p?"A":"P",TT:12>p?"AM":"PM",Z:s?"UTC":(String(o).match(e)||[""]).pop().replace(i,""),o:(v>0?"-":"+")+n(100*Math.floor(Math.abs(v)/60)+Math.abs(v)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]};return a.replace(t,function(t){return t in b?b[t]:t.slice(1,t.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(t,e){return dateFormat(this,t,e)},function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(e,n){var o,a,s,r=e.nodeName.toLowerCase();return"area"===r?(o=e.parentNode,a=o.name,e.href&&a&&"map"===o.nodeName.toLowerCase()?(s=t("img[usemap='#"+a+"']")[0],!!s&&i(s)):!1):(/^(input|select|textarea|button|object)$/.test(r)?!e.disabled:"a"===r?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var i=this.css("position"),n="absolute"===i,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var e=t(this);return n&&"static"===e.css("position")?!1:o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(i){return e(i,!isNaN(t.attr(i,"tabindex")))},tabbable:function(i){var n=t.attr(i,"tabindex"),o=isNaN(n);return(o||n>=0)&&e(i,!o)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){function n(e,i,n,a){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),a&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),s={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?s["inner"+i].call(this):this.each(function(){t(this).css(a,n(this,e)+"px")})},t.fn["outer"+i]=function(e,o){return"number"!=typeof e?s["outer"+i].call(this,e):this.each(function(){t(this).css(a,n(this,e,!0,o)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var i,n,o=t(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0}}),t.ui.plugin={add:function(e,i,n){var o,a=t.ui[e].prototype;for(o in n)a.plugins[o]=a.plugins[o]||[],a.plugins[o].push([i,n[o]])},call:function(t,e,i,n){var o,a=t.plugins[e];if(a&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<a.length;o++)t.options[a[o][0]]&&a[o][1].apply(t.element,i)}};var n=0,o=Array.prototype.slice;t.cleanData=function(e){return function(i){var n,o,a;for(a=0;null!=(o=i[a]);a++)try{n=t._data(o,"events"),n&&n.remove&&t(o).triggerHandler("remove")}catch(s){}e(i)}}(t.cleanData),t.widget=function(e,i,n){var o,a,s,r,l={},c=e.split(".")[0];return e=e.split(".")[1],o=c+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},a=t[c][e],s=t[c][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new s(t,e)},t.extend(s,a,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),r=new i,r.options=t.widget.extend({},r.options),t.each(n,function(e,n){return t.isFunction(n)?void(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},o=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,a=this._superApply;return this._super=t,this._superApply=o,e=n.apply(this,arguments),this._super=i,this._superApply=a,e}}()):void(l[e]=n)}),s.prototype=t.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||e:e},l,{constructor:s,namespace:c,widgetName:e,widgetFullName:o}),a?(t.each(a._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete a._childConstructors):i._childConstructors.push(s),t.widget.bridge(e,s),s},t.widget.extend=function(e){for(var i,n,a=o.call(arguments,1),s=0,r=a.length;r>s;s++)for(i in a[s])n=a[s][i],a[s].hasOwnProperty(i)&&void 0!==n&&(t.isPlainObject(n)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],n):t.widget.extend({},n):e[i]=n);return e},t.widget.bridge=function(e,i){var n=i.prototype.widgetFullName||e;t.fn[e]=function(a){var s="string"==typeof a,r=o.call(arguments,1),l=this;return s?this.each(function(){var i,o=t.data(this,n);return"instance"===a?(l=o,!1):o?t.isFunction(o[a])&&"_"!==a.charAt(0)?(i=o[a].apply(o,r),i!==o&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+a+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+a+"'")}):(r.length&&(a=t.widget.extend.apply(null,[a].concat(r))),this.each(function(){var e=t.data(this,n);e?(e.option(a||{}),e._init&&e._init()):t.data(this,n,new i(a,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,o,a,s=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(s={},n=e.split("."),e=n.shift(),n.length){for(o=s[e]=t.widget.extend({},this.options[e]),a=0;a<n.length-1;a++)o[n[a]]=o[n[a]]||{},o=o[n[a]];if(e=n.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];s[e]=i}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,n){var o,a=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=o=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),t.each(n,function(n,s){function r(){return e||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof s?a[s]:s).apply(a,arguments):void 0}"string"!=typeof s&&(r.guid=s.guid=s.guid||r.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+a.eventNamespace,d=l[2];d?o.delegate(d,c,r):i.bind(c,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(i).undelegate(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var o,a,s=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(o in a)o in i||(i[o]=a[o]);return this.element.trigger(i,n),!(t.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,o,a){"string"==typeof o&&(o={effect:o});var s,r=o?o===!0||"number"==typeof o?i:o.effect||i:e;o=o||{},"number"==typeof o&&(o={duration:o}),s=!t.isEmptyObject(o),o.complete=a,o.delay&&n.delay(o.delay),s&&t.effects&&t.effects.effect[r]?n[e](o):r!==e&&n[r]?n[r](o.duration,o.easing,a):n.queue(function(i){t(this)[e](),a&&a.call(n[0]),i()})}});var a=(t.widget,!1);t(document).mouseup(function(){a=!1});t.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!a){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,o="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return n&&!o&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),a=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),a=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});!function(){function e(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,a,s=Math.max,r=Math.abs,l=Math.round,c=/left|center|right/,d=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,m=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==o)return o;var e,i,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=n.children()[0];return t("body").append(n),e=a.offsetWidth,n.css("overflow","scroll"),i=a.offsetWidth,e===i&&(i=n[0].clientWidth),n.remove(),o=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),o="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,a="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:a?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n||o?i.width():i.outerWidth(),height:n||o?i.height():i.outerHeight()}}},t.fn.position=function(o){if(!o||!o.of)return m.apply(this,arguments);o=t.extend({},o);var p,f,g,v,b,y,w=t(o.of),x=t.position.getWithinInfo(o.within),_=t.position.getScrollInfo(x),k=(o.collision||"flip").split(" "),T={};return y=n(w),w[0].preventDefault&&(o.at="left top"),f=y.width,g=y.height,v=y.offset,b=t.extend({},v),t.each(["my","at"],function(){var t,e,i=(o[this]||"").split(" ");1===i.length&&(i=c.test(i[0])?i.concat(["center"]):d.test(i[0])?["center"].concat(i):["center","center"]),i[0]=c.test(i[0])?i[0]:"center",i[1]=d.test(i[1])?i[1]:"center",t=u.exec(i[0]),e=u.exec(i[1]),T[this]=[t?t[0]:0,e?e[0]:0],o[this]=[h.exec(i[0])[0],h.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===o.at[0]?b.left+=f:"center"===o.at[0]&&(b.left+=f/2),"bottom"===o.at[1]?b.top+=g:"center"===o.at[1]&&(b.top+=g/2),p=e(T.at,f,g),b.left+=p[0],b.top+=p[1],this.each(function(){var n,c,d=t(this),u=d.outerWidth(),h=d.outerHeight(),m=i(this,"marginLeft"),y=i(this,"marginTop"),P=u+m+i(this,"marginRight")+_.width,C=h+y+i(this,"marginBottom")+_.height,I=t.extend({},b),M=e(T.my,d.outerWidth(),d.outerHeight());"right"===o.my[0]?I.left-=u:"center"===o.my[0]&&(I.left-=u/2),"bottom"===o.my[1]?I.top-=h:"center"===o.my[1]&&(I.top-=h/2),I.left+=M[0],I.top+=M[1],a||(I.left=l(I.left),I.top=l(I.top)),n={marginLeft:m,marginTop:y},t.each(["left","top"],function(e,i){t.ui.position[k[e]]&&t.ui.position[k[e]][i](I,{targetWidth:f,targetHeight:g,elemWidth:u,elemHeight:h,collisionPosition:n,collisionWidth:P,collisionHeight:C,offset:[p[0]+M[0],p[1]+M[1]],my:o.my,at:o.at,within:x,elem:d})}),o.using&&(c=function(t){var e=v.left-I.left,i=e+f-u,n=v.top-I.top,a=n+g-h,l={target:{element:w,left:v.left,top:v.top,width:f,height:g},element:{element:d,left:I.left,top:I.top,width:u,height:h},horizontal:0>i?"left":e>0?"right":"center",vertical:0>a?"top":n>0?"bottom":"middle"};u>f&&r(e+i)<f&&(l.horizontal="center"),h>g&&r(n+a)<g&&(l.vertical="middle"),s(r(e),r(i))>s(r(n),r(a))?l.important="horizontal":l.important="vertical",o.using.call(this,t,l)}),d.offset(t.extend(I,{using:c}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollLeft:n.offset.left,a=n.width,r=t.left-e.collisionPosition.marginLeft,l=o-r,c=r+e.collisionWidth-a-o;e.collisionWidth>a?l>0&&0>=c?(i=t.left+l+e.collisionWidth-a-o,t.left+=l-i):c>0&&0>=l?t.left=o:l>c?t.left=o+a-e.collisionWidth:t.left=o:l>0?t.left+=l:c>0?t.left-=c:t.left=s(t.left-r,t.left)},top:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollTop:n.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,l=o-r,c=r+e.collisionHeight-a-o;e.collisionHeight>a?l>0&&0>=c?(i=t.top+l+e.collisionHeight-a-o,t.top+=l-i):c>0&&0>=l?t.top=o:l>c?t.top=o+a-e.collisionHeight:t.top=o:l>0?t.top+=l:c>0?t.top-=c:t.top=s(t.top-r,t.top)}},flip:{left:function(t,e){var i,n,o=e.within,a=o.offset.left+o.scrollLeft,s=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=t.left-e.collisionPosition.marginLeft,d=c-l,u=c+e.collisionWidth-s-l,h="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,m=-2*e.offset[0];0>d?(i=t.left+h+p+m+e.collisionWidth-s-a,(0>i||i<r(d))&&(t.left+=h+p+m)):u>0&&(n=t.left-e.collisionPosition.marginLeft+h+p+m-l,(n>0||r(n)<u)&&(t.left+=h+p+m))},top:function(t,e){var i,n,o=e.within,a=o.offset.top+o.scrollTop,s=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=t.top-e.collisionPosition.marginTop,d=c-l,u=c+e.collisionHeight-s-l,h="top"===e.my[1],p=h?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,m="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];0>d?(n=t.top+p+m+f+e.collisionHeight-s-a,(0>n||n<r(d))&&(t.top+=p+m+f)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+m+f-l,(i>0||r(i)<u)&&(t.top+=p+m+f))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,o,s,r=document.getElementsByTagName("body")[0],l=document.createElement("div");e=document.createElement(r?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in n)e.style[s]=n[s];e.appendChild(l),i=r||document.documentElement,i.insertBefore(e,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",o=t(l).offset().left,a=o>10&&11>o,e.innerHTML="",i.removeChild(e)}()}();t.ui.position;t.widget("ui.draggable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return this._blurActiveElement(e),this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=this.document[0];if(this.handleElement.is(e.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&t(i.activeElement).blur()}catch(n){}},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._normalizeRightBottom(),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",e,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.focus(),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper),o=n?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,o=this.options,a=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,t(a).width()-this.helperProportions.width-this.margins.left,(t(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),i=t(o.containment),n=i[0],void(n&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,o,a,s=this.options,r=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-s.grid[1]:o+s.grid[1]:o,a=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-s.grid[0]:a+s.grid[0]:a),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),
left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,n){var o=t.extend({},i,{item:n.element});n.sortables=[],t(n.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i,n){var o=t.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,t.each(n.sortables,function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,o))})},drag:function(e,i,n){t.each(n.sortables,function(){var o=!1,a=this;a.positionAbs=n.positionAbs,a.helperProportions=n.helperProportions,a.offset.click=n.offset.click,a._intersectsWith(a.containerCache)&&(o=!0,t.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&t.contains(a.element[0],this.element[0])&&(o=!1),o})),o?(a.isOver||(a.isOver=1,n._parent=i.helper.parent(),a.currentItem=i.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return i.helper[0]},e.target=a.currentItem[0],a._mouseCapture(e,!0),a._mouseStart(e,!0,!0),a.offset.click.top=n.offset.click.top,a.offset.click.left=n.offset.click.left,a.offset.parent.left-=n.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=n.offset.parent.top-a.offset.parent.top,n._trigger("toSortable",e),n.dropped=a.element,t.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,a.fromOutside=n),a.currentItem&&(a._mouseDrag(e),i.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",e,a._uiHash(a)),a._mouseStop(e,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(e),i.position=n._generatePosition(e,!0),n._trigger("fromSortable",e),n.dropped=!1,t.each(n.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,n){var o=t("body"),a=n.options;o.css("cursor")&&(a._cursor=o.css("cursor")),o.css("cursor",a.cursor)},stop:function(e,i,n){var o=n.options;o._cursor&&t("body").css("cursor",o._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,n){var o=t(i.helper),a=n.options;o.css("opacity")&&(a._opacity=o.css("opacity")),o.css("opacity",a.opacity)},stop:function(e,i,n){var o=n.options;o._opacity&&t(i.helper).css("opacity",o._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,n){var o=n.options,a=!1,s=n.scrollParentNotHidden[0],r=n.document[0];s!==r&&"HTML"!==s.tagName?(o.axis&&"x"===o.axis||(n.overflowOffset.top+s.offsetHeight-e.pageY<o.scrollSensitivity?s.scrollTop=a=s.scrollTop+o.scrollSpeed:e.pageY-n.overflowOffset.top<o.scrollSensitivity&&(s.scrollTop=a=s.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(n.overflowOffset.left+s.offsetWidth-e.pageX<o.scrollSensitivity?s.scrollLeft=a=s.scrollLeft+o.scrollSpeed:e.pageX-n.overflowOffset.left<o.scrollSensitivity&&(s.scrollLeft=a=s.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(e.pageY-t(r).scrollTop()<o.scrollSensitivity?a=t(r).scrollTop(t(r).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(r).scrollTop())<o.scrollSensitivity&&(a=t(r).scrollTop(t(r).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(e.pageX-t(r).scrollLeft()<o.scrollSensitivity?a=t(r).scrollLeft(t(r).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(r).scrollLeft())<o.scrollSensitivity&&(a=t(r).scrollLeft(t(r).scrollLeft()+o.scrollSpeed)))),a!==!1&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,n){var o=n.options;n.snapElements=[],t(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var e=t(this),i=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,n){var o,a,s,r,l,c,d,u,h,p,m=n.options,f=m.snapTolerance,g=i.offset.left,v=g+n.helperProportions.width,b=i.offset.top,y=b+n.helperProportions.height;for(h=n.snapElements.length-1;h>=0;h--)l=n.snapElements[h].left-n.margins.left,c=l+n.snapElements[h].width,d=n.snapElements[h].top-n.margins.top,u=d+n.snapElements[h].height,l-f>v||g>c+f||d-f>y||b>u+f||!t.contains(n.snapElements[h].item.ownerDocument,n.snapElements[h].item)?(n.snapElements[h].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=!1):("inner"!==m.snapMode&&(o=Math.abs(d-y)<=f,a=Math.abs(u-b)<=f,s=Math.abs(l-v)<=f,r=Math.abs(c-g)<=f,o&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),a&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),p=o||a||s||r,"outer"!==m.snapMode&&(o=Math.abs(d-b)<=f,a=Math.abs(u-y)<=f,s=Math.abs(l-g)<=f,r=Math.abs(c-v)<=f,o&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),a&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[h].snapping&&(o||a||s||r||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=o||a||s||r||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,n){var o,a=n.options,s=t.makeArray(t(a.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});s.length&&(o=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each(function(e){t(this).css("zIndex",o+e)}),this.css("zIndex",o+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,n){var o=t(i.helper),a=n.options;o.css("zIndex")&&(a._zIndex=o.css("zIndex")),o.css("zIndex",a.zIndex)},stop:function(e,i,n){var o=n.options;o._zIndex&&t(i.helper).css("zIndex",o._zIndex)}});t.ui.draggable;t.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(n)?n:function(t){return t.is(n)},this.proportions=function(){return arguments.length?void(e=arguments[0]):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var n=t.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var n=i||t.ui.ddmanager.current,o=!1;return n&&(n.currentItem||n.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=t(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===n.options.scope&&i.accept.call(i.element[0],n.currentItem||n.element)&&t.ui.intersect(n,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e)?(o=!0,!1):void 0}),o?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(){function t(t,e,i){return t>=e&&e+i>t}return function(e,i,n,o){if(!i.offset)return!1;var a=(e.positionAbs||e.position.absolute).left+e.margins.left,s=(e.positionAbs||e.position.absolute).top+e.margins.top,r=a+e.helperProportions.width,l=s+e.helperProportions.height,c=i.offset.left,d=i.offset.top,u=c+i.proportions().width,h=d+i.proportions().height;switch(n){case"fit":return a>=c&&u>=r&&s>=d&&h>=l;case"intersect":return c<a+e.helperProportions.width/2&&r-e.helperProportions.width/2<u&&d<s+e.helperProportions.height/2&&l-e.helperProportions.height/2<h;case"pointer":return t(o.pageY,d,i.proportions().height)&&t(o.pageX,c,i.proportions().width);case"touch":return(s>=d&&h>=s||l>=d&&h>=l||d>s&&l>h)&&(a>=c&&u>=a||r>=c&&u>=r||c>a&&r>u);default:return!1}}}(),t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var n,o,a=t.ui.ddmanager.droppables[e.options.scope]||[],s=i?i.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(n=0;n<a.length;n++)if(!(a[n].options.disabled||e&&!a[n].accept.call(a[n].element[0],e.currentItem||e.element))){for(o=0;o<r.length;o++)if(r[o]===a[n].element[0]){a[n].proportions().height=0;continue t}a[n].visible="none"!==a[n].element.css("display"),a[n].visible&&("mousedown"===s&&a[n]._activate.call(a[n],i),a[n].offset=a[n].element.offset(),a[n].proportions({width:a[n].element[0].offsetWidth,height:a[n].element[0].offsetHeight}))}},drop:function(e,i){var n=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance,i)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,o,a,s=t.ui.intersect(e,this,this.options.tolerance,i),r=!s&&this.isover?"isout":s&&!this.isover?"isover":null;r&&(this.options.greedy&&(o=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===o}),a.length&&(n=t(a[0]).droppable("instance"),n.greedyChild="isover"===r)),n&&"isover"===r&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),n&&"isout"===r&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}};t.ui.droppable,t.widget("ui.selectable",t.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e=t(i.options.filter,i.element[0]),e.addClass("ui-selectee"),e.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this,n=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(n.filter,this.element[0]),this._trigger("start",e),t(n.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=t.data(this,"selectable-item");n.startselected=!0,e.metaKey||e.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element}))}),t(e.target).parents().addBack().each(function(){var n,o=t.data(this,"selectable-item");return o?(n=!e.metaKey&&!e.ctrlKey||!o.$element.hasClass("ui-selected"),o.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),o.unselecting=!n,o.selecting=n,o.selected=n,n?i._trigger("selecting",e,{selecting:o.element}):i._trigger("unselecting",e,{unselecting:o.element}),!1):void 0}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,n=this,o=this.options,a=this.opos[0],s=this.opos[1],r=e.pageX,l=e.pageY;return a>r&&(i=r,r=a,a=i),s>l&&(i=l,l=s,s=i),this.helper.css({left:a,top:s,width:r-a,height:l-s}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),c=!1;i&&i.element!==n.element[0]&&("touch"===o.tolerance?c=!(i.left>r||i.right<a||i.top>l||i.bottom<s):"fit"===o.tolerance&&(c=i.left>a&&i.right<r&&i.top>s&&i.bottom<l),c?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",e,{unselected:n.element})}),t(".ui-selecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",e,{selected:n.element})}),this._trigger("stop",e),this.helper.remove(),!1}})});var Plugins;!function(t){var e=function(){function t(t){"undefined"==typeof t&&(t=30),this.space=t}return t}();t.AutosizeInputOptions=e;var i=function(){function t(e,i){var n=this;this._input=$(e),this._options=$.extend({},t.getDefaultOptions(),i),this._mirror=$('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>'),$.each(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(t,e){n._mirror[0].style[e]=n._input.css(e)}),$("body").append(this._mirror),this._input.on("keydown keyup input propertychange change",function(t){n.update()}),function(){n.update()}()}return t.prototype.getOptions=function(){return this._options},t.prototype.update=function(){var t=this._input.val()||"";if(t!==this._mirror.text()){this._mirror.text(t);var e=this._mirror.width()+this._options.space;this._input.width(e)}},t.getDefaultOptions=function(){return this._defaultOptions},t.getInstanceKey=function(){return"autosizeInputInstance"},t._defaultOptions=new e,t}();t.AutosizeInput=i,function(e){var i="autosize-input",n=["text","password","search","url","tel","email","number"];e.fn.autosizeInput=function(o){return this.each(function(){if("INPUT"==this.tagName&&e.inArray(this.type,n)>-1){var a=e(this);a.data(t.AutosizeInput.getInstanceKey())||(void 0==o&&(o=a.data(i)),a.data(t.AutosizeInput.getInstanceKey(),new t.AutosizeInput(this,o)))}})},e(function(){e("input[data-"+i+"]").autosizeInput()})}(jQuery)}(Plugins||(Plugins={})),function(t,e){var i=/[<>&\r\n"']/gm,n={"<":"lt;",">":"gt;","&":"amp;","\r":"#13;","\n":"#10;",'"':"quot;","'":"#39;"};t.extend({fileDownload:function(o,a){function s(){var e=p.cookieValue;"string"==typeof e&&(e=e.toLowerCase());var i=p.cookieName.toLowerCase()+"="+e;if(document.cookie.toLowerCase().indexOf(i)>-1){b.onSuccess(o);var n=p.cookieName+"=; path="+p.cookiePath+"; expires="+new Date(0).toUTCString()+";";return p.cookieDomain&&(n+=" domain="+p.cookieDomain+";"),document.cookie=n,void l(!1)}if(w||y)try{var a=w?w.document:r(y);if(a&&null!==a.body&&a.body.innerHTML.length){var c=!0;if(_&&_.length){var d=t(a.body).contents().first();try{d.length&&d[0]===_[0]&&(c=!1)}catch(u){if(!u||-2146828218!=u.number)throw u;c=!0}}if(c)return void setTimeout(function(){b.onFail(a.body.innerHTML,o),l(!0)},100)}}catch(h){return b.onFail("",o,h),void l(!0)}setTimeout(s,p.checkInterval)}function r(t){var e=t[0].contentWindow||t[0].contentDocument;return e.document&&(e=e.document),e}function l(t){setTimeout(function(){w&&(u&&w.close(),d&&w.focus&&(w.focus(),t&&w.close()))},0)}function c(t){return t.replace(i,function(t){return"&"+n[t]})}var d,u,h,p=t.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:!0},prepareCallback:function(t){},successCallback:function(t){},failCallback:function(t,e,i){},httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",cookieDomain:null,popupWindowTitle:"Initiating file download...",encodeHTMLEntities:!0},a),m=new t.Deferred,f=(navigator.userAgent||navigator.vendor||e.opera).toLowerCase();/ip(ad|hone|od)/.test(f)?d=!0:-1!==f.indexOf("android")?u=!0:h=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(f)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(f.substr(0,4));var g=p.httpMethod.toUpperCase();if(u&&"GET"!==g&&p.androidPostUnsupportedMessageHtml)return t().dialog?t("<div>").html(p.androidPostUnsupportedMessageHtml).dialog(p.dialogOptions):alert(p.androidPostUnsupportedMessageHtml),m.reject();var v=null,b={onPrepare:function(e){p.preparingMessageHtml?v=t("<div>").html(p.preparingMessageHtml).dialog(p.dialogOptions):p.prepareCallback&&p.prepareCallback(e)},onSuccess:function(t){v&&v.dialog("close"),p.successCallback(t),m.resolve(t)},onFail:function(e,i,n){v&&v.dialog("close"),p.failMessageHtml&&t("<div>").html(p.failMessageHtml).dialog(p.dialogOptions),p.failCallback(e,i,n),m.reject(e,i)}};b.onPrepare(o),null!==p.data&&"string"!=typeof p.data&&(p.data=t.param(p.data));var y,w,x,_;if("GET"===g){if(null!==p.data){var k=o.indexOf("?");-1!==k?"&"!==o.substring(o.length-1)&&(o+="&"):o+="?",o+=p.data}d||u?(w=e.open(o),w.document.title=p.popupWindowTitle,e.focus()):h?e.location(o):y=t("<iframe>").hide().prop("src",o).appendTo("body")}else{var T="";null!==p.data&&t.each(p.data.replace(/\+/g," ").split("&"),function(){var t=this.split("="),e=t[0];t.shift();var i=t.join("=");t=[e,i];var n=p.encodeHTMLEntities?c(decodeURIComponent(t[0])):decodeURIComponent(t[0]);if(n){var o=p.encodeHTMLEntities?c(decodeURIComponent(t[1])):decodeURIComponent(t[1]);T+='<input type="hidden" name="'+n+'" value="'+o+'" />'}}),h?(_=t("<form>").appendTo("body"),_.hide().prop("method",p.httpMethod).prop("action",o).html(T)):(d?(w=e.open("about:blank"),w.document.title=p.popupWindowTitle,x=w.document,e.focus()):(y=t("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body"),x=r(y)),x.write("<html><head></head><body><form method='"+p.httpMethod+"' action='"+o+"'>"+T+"</form>"+p.popupWindowTitle+"</body></html>"),_=t(x).find("form")),_.submit()}setTimeout(s,p.checkInterval);var P=m.promise();return P.abort=function(){l(),y.remove()},P}})}(jQuery,this),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(t){"use strict";function e(e){var i=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(i))}function i(e){var i=e.target,n=t(i);if(!n.is("[type=submit],[type=image]")){var o=n.closest("[type=submit]");if(0===o.length)return;i=o[0]}var a=this;if(a.clk=i,"image"==i.type)if(void 0!==e.offsetX)a.clk_x=e.offsetX,a.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var s=n.offset();a.clk_x=e.pageX-s.left,a.clk_y=e.pageY-s.top}else a.clk_x=e.pageX-i.offsetLeft,a.clk_y=e.pageY-i.offsetTop;setTimeout(function(){a.clk=a.clk_x=a.clk_y=null},100)}function n(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var o={};o.fileapi=void 0!==t("<input type='file'/>").get(0).files,o.formdata=void 0!==window.FormData;var a=!!t.fn.prop;t.fn.attr2=function(){if(!a)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e){function i(i){var n,o,a=t.param(i,e.traditional).split("&"),s=a.length,r=[];for(n=0;s>n;n++)a[n]=a[n].replace(/\+/g," "),o=a[n].split("="),r.push([decodeURIComponent(o[0]),decodeURIComponent(o[1])]);return r}function s(n){for(var o=new FormData,a=0;a<n.length;a++)o.append(n[a].name,n[a].value);if(e.extraData){var s=i(e.extraData);for(a=0;a<s.length;a++)s[a]&&o.append(s[a][0],s[a][1])}e.data=null;var r=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});e.uploadProgress&&(r.xhr=function(){var i=t.ajaxSettings.xhr();return i.upload&&i.upload.addEventListener("progress",function(t){var i=0,n=t.loaded||t.position,o=t.total;t.lengthComputable&&(i=Math.ceil(n/o*100)),e.uploadProgress(t,n,o,i)},!1),i}),r.data=null;var c=r.beforeSend;return r.beforeSend=function(t,i){e.formData?i.data=e.formData:i.data=o,c&&c.call(this,t,i)},t.ajax(r)}function r(i){function o(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(i){n("cannot get iframe.contentWindow document: "+i)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(i){n("cannot get iframe.contentDocument: "+i),e=t.document}return e}function s(){function e(){try{var t=o(v).readyState;n("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(i){n("Server abort: ",i," (",i.name,")"),r(C),_&&clearTimeout(_),_=void 0}}var i=u.attr2("target"),a=u.attr2("action"),s="multipart/form-data",c=u.attr("enctype")||u.attr("encoding")||s;k.setAttribute("target",m),l&&!/post/i.test(l)||k.setAttribute("method","POST"),a!=h.url&&k.setAttribute("action",h.url),h.skipEncodingOverride||l&&!/post/i.test(l)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),h.timeout&&(_=setTimeout(function(){x=!0,r(P)},h.timeout));var d=[];try{if(h.extraData)for(var p in h.extraData)h.extraData.hasOwnProperty(p)&&(t.isPlainObject(h.extraData[p])&&h.extraData[p].hasOwnProperty("name")&&h.extraData[p].hasOwnProperty("value")?d.push(t('<input type="hidden" name="'+h.extraData[p].name+'">').val(h.extraData[p].value).appendTo(k)[0]):d.push(t('<input type="hidden" name="'+p+'">').val(h.extraData[p]).appendTo(k)[0]));h.iframeTarget||g.appendTo("body"),v.attachEvent?v.attachEvent("onload",r):v.addEventListener("load",r,!1),setTimeout(e,15);try{k.submit()}catch(f){var b=document.createElement("form").submit;b.apply(k)}}finally{k.setAttribute("action",a),k.setAttribute("enctype",c),i?k.setAttribute("target",i):u.removeAttr("target"),t(d).remove()}}function r(e){if(!b.aborted&&!$){if(D=o(v),D||(n("cannot access response document"),e=C),e===P&&b)return b.abort("timeout"),void T.reject(b,"timeout");if(e==C&&b)return b.abort("server abort"),void T.reject(b,"error","server abort");if(D&&D.location.href!=h.iframeSrc||x){v.detachEvent?v.detachEvent("onload",r):v.removeEventListener("load",r,!1);var i,a="success";try{if(x)throw"timeout";var s="xml"==h.dataType||D.XMLDocument||t.isXMLDoc(D);if(n("isXml="+s),!s&&window.opera&&(null===D.body||!D.body.innerHTML)&&--E)return n("requeing onLoad callback, DOM not available"),void setTimeout(r,250);var l=D.body?D.body:D.documentElement;b.responseText=l?l.innerHTML:null,b.responseXML=D.XMLDocument?D.XMLDocument:D,s&&(h.dataType="xml"),b.getResponseHeader=function(t){var e={"content-type":h.dataType};return e[t.toLowerCase()]},l&&(b.status=Number(l.getAttribute("status"))||b.status,b.statusText=l.getAttribute("statusText")||b.statusText);var c=(h.dataType||"").toLowerCase(),d=/(json|script|text)/.test(c);if(d||h.textarea){var u=D.getElementsByTagName("textarea")[0];if(u)b.responseText=u.value,b.status=Number(u.getAttribute("status"))||b.status,b.statusText=u.getAttribute("statusText")||b.statusText;else if(d){var m=D.getElementsByTagName("pre")[0],f=D.getElementsByTagName("body")[0];m?b.responseText=m.textContent?m.textContent:m.innerText:f&&(b.responseText=f.textContent?f.textContent:f.innerText)}}else"xml"==c&&!b.responseXML&&b.responseText&&(b.responseXML=A(b.responseText));try{S=L(b,c,h)}catch(y){a="parsererror",b.error=i=y||a}}catch(y){n("error caught: ",y),a="error",b.error=i=y||a}b.aborted&&(n("upload aborted"),a=null),b.status&&(a=b.status>=200&&b.status<300||304===b.status?"success":"error"),"success"===a?(h.success&&h.success.call(h.context,S,"success",b),T.resolve(b.responseText,"success",b),p&&t.event.trigger("ajaxSuccess",[b,h])):a&&(void 0===i&&(i=b.statusText),h.error&&h.error.call(h.context,b,a,i),T.reject(b,"error",i),p&&t.event.trigger("ajaxError",[b,h,i])),p&&t.event.trigger("ajaxComplete",[b,h]),p&&!--t.active&&t.event.trigger("ajaxStop"),h.complete&&h.complete.call(h.context,b,a),$=!0,h.timeout&&clearTimeout(_),setTimeout(function(){h.iframeTarget?g.attr("src",h.iframeSrc):g.remove(),b.responseXML=null},100)}}}var c,d,h,p,m,g,v,b,y,w,x,_,k=u[0],T=t.Deferred();if(T.abort=function(t){b.abort(t)},i)for(d=0;d<f.length;d++)c=t(f[d]),a?c.prop("disabled",!1):c.removeAttr("disabled");if(h=t.extend(!0,{},t.ajaxSettings,e),h.context=h.context||h,m="jqFormIO"+(new Date).getTime(),h.iframeTarget?(g=t(h.iframeTarget),w=g.attr2("name"),w?m=w:g.attr2("name",m)):(g=t('<iframe name="'+m+'" src="'+h.iframeSrc+'" />'),g.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=g[0],b={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var i="timeout"===e?"timeout":"aborted";n("aborting upload... "+i),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(o){}g.attr("src",h.iframeSrc),b.error=i,h.error&&h.error.call(h.context,b,i,e),p&&t.event.trigger("ajaxError",[b,h,i]),h.complete&&h.complete.call(h.context,b,i)}},p=h.global,p&&0===t.active++&&t.event.trigger("ajaxStart"),
p&&t.event.trigger("ajaxSend",[b,h]),h.beforeSend&&h.beforeSend.call(h.context,b,h)===!1)return h.global&&t.active--,T.reject(),T;if(b.aborted)return T.reject(),T;y=k.clk,y&&(w=y.name,w&&!y.disabled&&(h.extraData=h.extraData||{},h.extraData[w]=y.value,"image"==y.type&&(h.extraData[w+".x"]=k.clk_x,h.extraData[w+".y"]=k.clk_y)));var P=1,C=2,I=t("meta[name=csrf-token]").attr("content"),M=t("meta[name=csrf-param]").attr("content");M&&I&&(h.extraData=h.extraData||{},h.extraData[M]=I),h.forceSync?s():setTimeout(s,10);var S,D,$,E=50,A=t.parseXML||function(t,e){return window.ActiveXObject?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},O=t.parseJSON||function(t){return window.eval("("+t+")")},L=function(e,i,n){var o=e.getResponseHeader("content-type")||"",a="xml"===i||!i&&o.indexOf("xml")>=0,s=a?e.responseXML:e.responseText;return a&&"parsererror"===s.documentElement.nodeName&&t.error&&t.error("parsererror"),n&&n.dataFilter&&(s=n.dataFilter(s,i)),"string"==typeof s&&("json"===i||!i&&o.indexOf("json")>=0?s=O(s):("script"===i||!i&&o.indexOf("javascript")>=0)&&t.globalEval(s)),s};return T}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;var l,c,d,u=this;"function"==typeof e?e={success:e}:void 0===e&&(e={}),l=e.type||this.attr2("method"),c=e.url||this.attr2("action"),d="string"==typeof c?t.trim(c):"",d=d||window.location.href||"",d&&(d=(d.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:d,success:t.ajaxSettings.success,type:l||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var h={};if(this.trigger("form-pre-serialize",[this,e,h]),h.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&e.beforeSerialize(this,e)===!1)return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var p=e.traditional;void 0===p&&(p=t.ajaxSettings.traditional);var m,f=[],g=this.formToArray(e.semantic,f);if(e.data&&(e.extraData=e.data,m=t.param(e.data,p)),e.beforeSubmit&&e.beforeSubmit(g,this,e)===!1)return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[g,this,e,h]),h.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var v=t.param(g,p);m&&(v=v?v+"&"+m:m),"GET"==e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+v,e.data=null):e.data=v;var b=[];if(e.resetForm&&b.push(function(){u.resetForm()}),e.clearForm&&b.push(function(){u.clearForm(e.includeHidden)}),!e.dataType&&e.target){var y=e.success||function(){};b.push(function(i){var n=e.replaceTarget?"replaceWith":"html";t(e.target)[n](i).each(y,arguments)})}else e.success&&b.push(e.success);if(e.success=function(t,i,n){for(var o=e.context||this,a=0,s=b.length;s>a;a++)b[a].apply(o,[t,i,n||u,u])},e.error){var w=e.error;e.error=function(t,i,n){var o=e.context||this;w.apply(o,[t,i,n,u])}}if(e.complete){var x=e.complete;e.complete=function(t,i){var n=e.context||this;x.apply(n,[t,i,u])}}var _=t("input[type=file]:enabled",this).filter(function(){return""!==t(this).val()}),k=_.length>0,T="multipart/form-data",P=u.attr("enctype")==T||u.attr("encoding")==T,C=o.fileapi&&o.formdata;n("fileAPI :"+C);var I,M=(k||P)&&!C;e.iframe!==!1&&(e.iframe||M)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){I=r(g)}):I=r(g):I=(k||P)&&C?s(g):t.ajax(e),u.removeData("jqxhr").data("jqxhr",I);for(var S=0;S<f.length;S++)f[S]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(o){if(o=o||{},o.delegation=o.delegation&&t.isFunction(t.fn.on),!o.delegation&&0===this.length){var a={s:this.selector,c:this.context};return!t.isReady&&a.s?(n("DOM not ready, queuing ajaxForm"),t(function(){t(a.s,a.c).ajaxForm(o)}),this):(n("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return o.delegation?(t(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,o,e).on("click.form-plugin",this.selector,o,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",o,e).bind("click.form-plugin",o,i)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,i){var n=[];if(0===this.length)return n;var a,s=this[0],r=this.attr("id"),l=e?s.getElementsByTagName("*"):s.elements;if(l&&!/MSIE [678]/.test(navigator.userAgent)&&(l=t(l).get()),r&&(a=t(":input[form="+r+"]").get(),a.length&&(l=(l||[]).concat(a))),!l||!l.length)return n;var c,d,u,h,p,m,f;for(c=0,m=l.length;m>c;c++)if(p=l[c],u=p.name,u&&!p.disabled)if(e&&s.clk&&"image"==p.type)s.clk==p&&(n.push({name:u,value:t(p).val(),type:p.type}),n.push({name:u+".x",value:s.clk_x},{name:u+".y",value:s.clk_y}));else if(h=t.fieldValue(p,!0),h&&h.constructor==Array)for(i&&i.push(p),d=0,f=h.length;f>d;d++)n.push({name:u,value:h[d]});else if(o.fileapi&&"file"==p.type){i&&i.push(p);var g=p.files;if(g.length)for(d=0;d<g.length;d++)n.push({name:u,value:g[d],type:p.type});else n.push({name:u,value:"",type:p.type})}else null!==h&&"undefined"!=typeof h&&(i&&i.push(p),n.push({name:u,value:h,type:p.type,required:p.required}));if(!e&&s.clk){var v=t(s.clk),b=v[0];u=b.name,u&&!b.disabled&&"image"==b.type&&(n.push({name:u,value:v.val()}),n.push({name:u+".x",value:s.clk_x},{name:u+".y",value:s.clk_y}))}return n},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var i=[];return this.each(function(){var n=this.name;if(n){var o=t.fieldValue(this,e);if(o&&o.constructor==Array)for(var a=0,s=o.length;s>a;a++)i.push({name:n,value:o[a]});else null!==o&&"undefined"!=typeof o&&i.push({name:this.name,value:o})}}),t.param(i)},t.fn.fieldValue=function(e){for(var i=[],n=0,o=this.length;o>n;n++){var a=this[n],s=t.fieldValue(a,e);null===s||"undefined"==typeof s||s.constructor==Array&&!s.length||(s.constructor==Array?t.merge(i,s):i.push(s))}return i},t.fieldValue=function(e,i){var n=e.name,o=e.type,a=e.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!n||e.disabled||"reset"==o||"button"==o||("checkbox"==o||"radio"==o)&&!e.checked||("submit"==o||"image"==o)&&e.form&&e.form.clk!=e||"select"==a&&-1==e.selectedIndex))return null;if("select"==a){var s=e.selectedIndex;if(0>s)return null;for(var r=[],l=e.options,c="select-one"==o,d=c?s+1:l.length,u=c?s:0;d>u;u++){var h=l[u];if(h.selected){var p=h.value;if(p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),c)return p;r.push(p)}}return r}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,o=this.tagName.toLowerCase();i.test(n)||"textarea"==o?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==o?this.selectedIndex=-1:"file"==n?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(e===!0&&/hidden/.test(n)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=e;else if("option"==this.tagName.toLowerCase()){var n=t(this).parent("select");e&&n[0]&&"select-one"==n[0].type&&n.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1}),function(t){function e(e){if("string"==typeof e.data&&(e.data={keys:e.data}),e.data&&e.data.keys&&"string"==typeof e.data.keys){var i=e.handler,n=e.data.keys.toLowerCase().split(" ");e.handler=function(e){if(this===e.target||!(t.hotkeys.options.filterInputAcceptingElements&&t.hotkeys.textInputTypes.test(e.target.nodeName)||t.hotkeys.options.filterContentEditable&&t(e.target).attr("contenteditable")||t.hotkeys.options.filterTextInputs&&t.inArray(e.target.type,t.hotkeys.textAcceptingInputTypes)>-1)){var o="keypress"!==e.type&&t.hotkeys.specialKeys[e.which],a=String.fromCharCode(e.which).toLowerCase(),s="",r={};t.each(["alt","ctrl","shift"],function(t,i){e[i+"Key"]&&o!==i&&(s+=i+"+")}),e.metaKey&&!e.ctrlKey&&"meta"!==o&&(s+="meta+"),e.metaKey&&"meta"!==o&&s.indexOf("alt+ctrl+shift+")>-1&&(s=s.replace("alt+ctrl+shift+","hyper+")),o?r[s+o]=!0:(r[s+a]=!0,r[s+t.hotkeys.shiftNums[a]]=!0,"shift+"===s&&(r[t.hotkeys.shiftNums[a]]=!0));for(var l=0,c=n.length;c>l;l++)if(r[n[l]])return i.apply(this,arguments)}}}}t.hotkeys={version:"0.2.0",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"],textInputTypes:/textarea|input|select/i,options:{filterInputAcceptingElements:!0,filterTextInputs:!0,filterContentEditable:!0}},t.each(["keydown","keyup","keypress"],function(){t.event.special[this]={add:e}})}(jQuery||this.jQuery||window.jQuery),function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.PDFObject=e()}(this,function(){"use strict";if("undefined"==typeof window||"undefined"==typeof navigator)return!1;var t,e,i,n,o,a,s,r,l,c,d,u="2.0.201604172",h="undefined"!=typeof navigator.mimeTypes["application/pdf"],p=function(){return/iphone|ipad|ipod/i.test(navigator.userAgent.toLowerCase())}();return e=function(t){var e;try{e=new ActiveXObject(t)}catch(i){e=null}return e},i=function(){return!!(window.ActiveXObject||"ActiveXObject"in window)},n=function(){return!(!e("AcroPDF.PDF")&&!e("PDF.PdfCtrl"))},t=h||i()&&n(),o=function(t){var e,i="";if(t){for(e in t)t.hasOwnProperty(e)&&(i+=encodeURIComponent(e)+"="+encodeURIComponent(t[e])+"&");i&&(i="#"+i,i=i.slice(0,i.length-1))}return i},a=function(t){"undefined"!=typeof console&&console.log&&console.log("[PDFObject] "+t)},s=function(t){return a(t),!1},l=function(t){var e=document.body;return"string"==typeof t?e=document.querySelector(t):"undefined"!=typeof jQuery&&t instanceof jQuery&&t.length?e=t.get(0):"undefined"!=typeof t.nodeType&&1===t.nodeType&&(e=t),e},c=function(t,e,i,n,o){var a=n+"?file="+encodeURIComponent(e)+i,s=p?"-webkit-overflow-scrolling: touch; overflow-y: scroll; ":"overflow: hidden; ",r="<div style='"+s+"position: absolute; top: 0; right: 0; bottom: 0; left: 0;'><iframe  "+o+" src='"+a+"' style='border: none; width: 100%; height: 100%;' frameborder='0'></iframe></div>";return t.className+=" pdfobject-container",t.style.position="relative",t.style.overflow="auto",t.innerHTML=r,t.getElementsByTagName("iframe")[0]},d=function(t,e,i,n,o,a,s){var r="";return r=e&&e!==document.body?"width: "+o+"; height: "+a+";":"position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100%;",t.className+=" pdfobject-container",t.innerHTML="<embed "+s+" class='pdfobject' src='"+i+n+"' type='application/pdf' style='overflow: auto; "+r+"'/>",t.getElementsByTagName("embed")[0]},r=function(e,i,n){if("string"!=typeof e)return s("URL is not valid");i="undefined"!=typeof i?i:!1,n="undefined"!=typeof n?n:{};var a=n.id&&"string"==typeof n.id?"id='"+n.id+"'":"",r=n.page?n.page:!1,u=n.pdfOpenParams?n.pdfOpenParams:{},h="undefined"!=typeof n.fallbackLink?n.fallbackLink:!0,p=n.width?n.width:"100%",m=n.height?n.height:"100%",f="boolean"==typeof n.forcePDFJS?n.forcePDFJS:!1,g=n.PDFJS_URL?n.PDFJS_URL:!1,v=l(i),b="",y="",w="<p>This browser does not support inline PDFs. Please download the PDF to view it: <a href='[url]'>Download PDF</a></p>";return v?(r&&(u.page=r),y=o(u),f&&g?c(v,e,y,g,a):t?d(v,i,e,y,p,m,a):g?c(v,e,y,g,a):(h&&(b="string"==typeof h?h:w,v.innerHTML=b.replace(/\[url\]/g,e)),s("This browser does not support embedded PDFs"))):s("Target element cannot be determined")},{embed:function(t,e,i){return r(t,e,i)},pdfobjectversion:function(){return u}(),supportsPDFs:function(){return t}()}}),function(){"use strict";window.docmana={},docmana.VERSION="0.1.0",docmana.lang="zh-CN",docmana.DEFAULTS={store:{url:null,requestData:{folder:null,subFolder:null}},commands:[["navigation",["back","forward"]],["new",["mkdir","upload"]],["open",["open","download"]],["clipboard",["cut","copy","paste"]],["organize",["duplicate","rename","rm"]],["layout",["layout"]],["view",["sort"]],["search",["search"]],["util",["full"]]],workzone:{layout:"list"},ui:["workzone","toolbar","navigation","statusbar","viewer","uploader"],kernel:["store","history","clipboard"]},docmana.commands={},docmana.ui={}}(),window.docmana.templates=Object.create(null),window.docmana.templates["breadcrumb.html"]='<% _.forEach(data, function(item, i){ %>\n    <% if(i === data.length - 1){ %>\n    <li class="active">\n        <span>\n            <%- item.name %>\n        </span>\n    </li>\n    <% }else{ %>\n    <li>\n        <a href="#" data-hash="<%- item.hash %>">\n            <%- item.name %>\n        </a>\n    </li>\n    <% } %>\n<% }); %>',window.docmana.templates["fileInfo.html"]='<div class="docmana-file-info">\n    <div class="media center-block">\n        <div class="media-left file-type-large">\n            <span class="filetype <%- T.name2IconClass(data.name, data.mime) %>"></span>\n        </div>\n        <div class="media-body">\n            <h4 class="media-heading">\n                <%- data.name%>\n            </h4>\n            <p>\n            <p>\n                <%- L(\'fileType\') %>:\n                <%- L(\'kind\' + T.mime2Type(data.mime)) %>\n            </p>\n            <p>\n                <%- L(\'fileDateModified\') %>:\n                <%- T.formatDate(data.ts) %>\n            </p>\n            <p>\n                <%- L(\'fileSize\') %>:\n                <%- T.formatFileSize(data.size) %>\n            </p>\n            </p>\n        </div>\n    </div>\n</div>\n',window.docmana.templates["main.html"]='<div class="docmana-panel">\n    <div class="docmana-heading panel-heading">\n        <div class="docmana-toolbar btn-toolbar"></div>\n    </div>\n    <div class="docmana-body panel-body no-padding">\n        <div class="docmana-navigation clearfix"></div>\n        <div class="docmana-workzone"></div>\n    </div>\n    <div class="docmana-footer panel-footer">\n        <div class="docmana-statusbar clearfix"></div>\n    </div>\n</div>\n\n<div class="modal fade" id="modal-file" tabindex="-1" role="dialog">\n    <div class="modal-dialog modal-lg static" role="document">\n        <div class="modal-content docmana-viewer"></div>\n    </div>\n</div>\n<div class="modal fade" tabindex="-1" role="dialog">\n    <div class="modal-dialog" role="document">\n        <div class="modal-content docmana-uploader"></div>\n    </div>\n</div>',window.docmana.templates["navigation.html"]='<div class="nav-group pull-left"></div>\n<div class="search-group btn-toolbar pull-right"></div>\n<div class="refresh-group pull-right"></div>\n<div class="breadcrumb-group form-control input-sm">\n    <ul class="docmana-breadcrumb breadcrumb no-margin"></ul>\n</div>\n',window.docmana.templates["statusbar.html"]='<div class="status-text pull-left"></div>\n<div class="pull-right btn-toolbar">\n    <div class="uploader btn-group"></div>\n    <div class="layout btn-group"></div>\n</div>',window.docmana.templates["statusbarText.html"]='<span class="text-total">\n    <%- data.count %>\n    <%- L(\'statusbarItems\') %>\n</span>\n<span class="text-selected">\n    <% if(data.selectedCount > 0){ %>\n    <%- L(\'statusbarSelectedItem\', data.selectedCount) %>\n\n    <span class="size">\n        <%- data.selectedSize %>\n    </span>\n    <% } %>\n</span>',window.docmana.templates["toolbar.html"]='<div class="right pull-right btn-toolbar">\n    \n</div>',window.docmana.templates["toolbarBtn.html"]='<button type="button" class="btn btn-default <%- data.name %>"\n        data-command="<%- data.name %>"\n        title="<%- L(\'cmd\' + _.upperFirst(data.name)) %> <%- data.shortcuts %>">\n    <i class="<%- data.icon %>"></i>\n</button>\n',window.docmana.templates["toolbarBtnGroup.html"]='<div class="btn-group btn-group-sm docmana-group-<%- data.name %>" role="group"></div>',window.docmana.templates["toolbarBtnLayout.html"]='<div class="btn-group btn-group-sm" data-toggle="buttons">\n    <label class="btn btn-default" title="<%- L(\'layoutList\') %>">\n        <input type="radio" name="layout" autocomplete="off" data-layout="list">\n        <i class="docmana-icon docmana-icon-listview"></i>\n    </label>\n    <label class="btn btn-default" title="<%- L(\'layoutLargeIcons\') %>">\n        <input type="radio" name="layout" autocomplete="off" data-layout="icons">\n        <i class="docmana-icon docmana-icon-iconsview"></i>\n    </label>\n</div>\n',window.docmana.templates["toolbarBtnSort.html"]='<div class="btn-group btn-group-sm <%- data.name %>">\n    <button type="button" class="btn btn-default dropdown-toggle"\n            data-toggle="dropdown" aria-haspopup="true"\n            aria-expanded="false"\n             title="<%- L(\'cmdSort\') %>">\n        <i class="<%- data.icon %>"></i>\n        <span class="caret"></span>\n    </button>\n    <ul class="dropdown-menu">\n        <li>\n            <a href="#" data-command="sort" data-field="name">\n                <i class=""></i>\n                <%- L(\'sortByName\') %>\n            </a>\n        </li>\n        <li>\n            <a href="#" data-command="sort" data-field="size">\n                <%- L(\'sortBySize\') %>\n            </a>\n        </li>\n        <li>\n            <a href="#" data-command="sort" data-field="mime">\n                <%- L(\'sortByType\') %>\n            </a>\n        </li>\n        <li>\n            <a href="#" data-command="sort" data-field="ts">\n                <%- L(\'sortByDate\') %>\n            </a>\n        </li>\n        <li role="separator" class="divider"></li>\n        <li>\n            <a href="#" data-command="sort" data-order="asc">\n                <%- L(\'sortAscending\') %>\n            </a>\n        </li>\n        <li>\n            <a href="#" data-command="sort" data-order="desc">\n                <%- L(\'sortDescending\') %>\n            </a>\n        </li>\n    </ul>\n</div>\n',window.docmana.templates["toolbarBtnUpload.html"]='<a class="btn btn-default <%- data.name %>" data-command="<%- data.name %>"\n    title="<%- L(\'cmd\' + _.upperFirst(data.name)) %>">\n    <i class="<%- data.icon %>"></i>\n    <form enctype="multipart/form-data" method="POST">\n        <input type="file" name="upload[]" multiple value="" />\n    </form>\n</a>',window.docmana.templates["toolbarSearch.html"]='<div class="form-inline">\n    <div class="form-group has-feedback">\n        <input type="text" class="form-control input-sm" \n               placeholder="<%- L(\'textSearch\') %>">\n        <span class="form-control-feedback" aria-hidden="true">\n            <i class="fa fa-search"></i>\n        </span>\n    </div>\n</div>',window.docmana.templates["uploader.html"]='<div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n        <span aria-hidden="true">&times;</span>\n    </button>\n    <h4 class="modal-title"><%- L(\'textFileUpload\') %></h4>\n</div>\n<div class="modal-body no-padding">\n    <div class="files list-group"></div>\n</div>\n<div class="modal-footer clearfix">\n    <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">\n        <%- L(\'textClose\') %>\n    </button>\n</div>',window.docmana.templates["uploaderFiles.html"]='        <% for (var i=0, file; file= data.files[i]; i++) { %>\n<div class="file-upload file">\n    <span class="list-group-item holder">.</span>\n    <div class="progress">\n        <div class="progress-bar progress-bar-info" style="width: 0"></div>\n    </div>\n    <div class="info list-group-item clearfix">\n        <div class="table-row">\n            <div class="name table-column">\n                <%- file.name %>\n            </div>\n            <div class="size table-column">\n                Processing...\n            </div>\n            <!--<div class="folder pull-left">\n        我的文件\n    </div>-->\n            <div class="status table-column">\n                <!--<i class="fa fa-check-circle text-success"></i>-->\n                <span class="percent"></span>\n                <span class="error"></span>\n            </div>\n            <div class="operator table-column">\n                <% if (!i && !data.options.autoUpload) { %>\n                <button class="btn btn-primary btn-sm start" disabled>\n                    <i class="fa fa-upload"></i>\n                </button>\n                <% } %>\n                <% if (!i) { %>\n                <button class="btn btn-link btn-warning btn-xs cancel">\n                    <i class="fa fa-ban"></i>\n                </button>\n                <% } %>\n            </div>\n        </div>\n    </div>\n</div>\n        <% } %>\n',window.docmana.templates["uploaderTrigger.html"]='<div class="btn-uploader" style="position:relative;"  title="<%- L(\'textFileUpload\') %>">\n    <button class="btn btn-default btn-sm">\n        <i class="fa fa-tasks"></i>\n    </button>\n    <span class="badge badge-notify"></span>\n</div>',window.docmana.templates["viewer.html"]='<div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n        <span aria-hidden="true">&times;</span>\n    </button>\n    <h4 class="modal-title">�ļ�</h4>\n</div>\n<div class="modal-body no-padding docmana-viewer-body">\n\n</div>\n<div class="modal-footer clearfix">\n    <button type="button" class="btn btn-default"\n            title="<%- L(\'cmdDownload\') %>"\n            data-action="download">\n        <i class="docmana-icon docmana-icon-download"></i>\n    </button>\n    <button type="button" class="btn btn-default"\n            title="<%- L(\'textPreviousItem\') %>"\n            data-action="previous">\n        <i class="docmana-icon docmana-icon-back"></i>\n    </button>\n    <button type="button"\n            class="btn btn-default"\n            data-action="next"\n            title="<%- L(\'textNextItem\') %>">\n        <i class="docmana-icon docmana-icon-forward"></i>\n    </button>\n</div>',window.docmana.templates["workzoneIconsView.html"]='<div class="icons-view docmana-workzone-view clearfix">\n</div>\n',window.docmana.templates["workzoneIconsViewItem.html"]='<div id="<%- data.hash %>"\n     title="<%= T.fileMetadata(data) %>"\n     class="drag-block file-list-item <%- T.mime2Class(data.mime) %>"\n     data-name="<%- data.name %>">\n    <div class="filetype <%- T.name2IconClass(data.name, data.mime)%> drag-block"></div>\n    <div class="filename drag-block" title="<%- data.name %>">\n        <%- data.name %>\n    </div>\n</div>\n',window.docmana.templates["workzoneListView.html"]='<div class="list-view">\n    <div class="datatable-header panel panel-default">\n        <table class="table table-bordered table-condensed no-margin">\n            <colgroup>\n                <col />\n                <col style="width:135px;" />\n                <col style="width:135px;" />\n                <col style="width:90px;" />\n            </colgroup>\n            <thead>\n                <tr>\n                    <th><%- L(\'fileName\') %></th>\n                    <th><%- L(\'fileDateModified\') %></th>\n                    <th><%- L(\'fileType\') %></th>\n                    <th><%- L(\'fileSize\') %></th>\n                </tr>\n            </thead>\n        </table>\n    </div>\n    <div class="datatable-content">\n        <table class="table table-hover table-condensed no-margin">\n            <colgroup>\n                <col />\n                <col style="width:135px;" />\n                <col style="width:135px;" />\n                <col style="width:90px;" />\n            </colgroup>\n            <tbody class="docmana-workzone-view"></tbody>\n        </table>\n    </div>\n</div>\n',window.docmana.templates["workzoneListViewItem.html"]='<tr id="<%- data.hash %>"\n    class="file-list-item <%- T.mime2Class(data.mime) %>"\n    data-name="<%- data.name %>">\n    <td class="name">\n        <span title="<%= T.fileMetadata(data) %>">\n            <span class="filetype <%- T.name2IconClass(data.name, data.mime) %> drag-block"></span>\n            <span class="filename drag-block">\n                <%- data.name %>\n            </span>\n        </span>\n\n    </td>\n    <td class="metadata date">\n        <span class="drag-block">\n            <%- T.formatDate(data.ts) %>\n        </span>\n    </td>\n    <td class="metadata type">\n        <span class="drag-block">\n            <%- L(\'kind\' + T.mime2Type(data.mime)) %>\n        </span>\n    </td>\n    <td class="metadata size">\n        <span class="drag-block">\n            <%- data.mime === \'directory\' ? \'\' : T.formatFileSize(data.size, true) %>\n        </span>\n    </td>\n</tr>\n',function(){"use strict";function t(t){this.initProps(t),this.listen(),this.init.apply(this,arguments)}var e=function(t,e){var i,n=this;return i=t&&_.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},_.extend(i,n,e),i.prototype=_.create(n.prototype,t),i.prototype.constructor=i,i.__super__=n.prototype,i},i=_.extend({main:function(){return this.props.parent?this.props.parent.main:this.props.main},store:function(){return this.main().store},clipboard:function(){return this.main().clipboard},history:function(){return this.main().history},toolbar:function(){return this.main().ui.toolbar},statusbar:function(){return this.main().ui.statusbar},workzone:function(){return this.main().ui.workzone},initProps:function(t){this.props=_.extend({},_.result(this,"defaults"),t)},getState:function(){return{}},defaults:{},tpl:function(t){return docmana.template.get(t)},$element:function(){return this.$el},init:function(){},listen:function(){return this},render:function(){var t=this.tpl(_.result(this,"templateName"));t&&this.$el.html(t(this.getState())),this.trigger("rendered")}});t.prototype=_.extend({constructor:t},i,Backbone.Events),t.extend=e,docmana.ComponentBase=t,docmana.CommandBase=t.extend({setState:function(t){t=t||this.$element(),t&&(this.canExec()?this.enable():this.disable())},enable:function(){this.$element().removeClass("disabled").removeAttr("disabled")},disable:function(){this.$element().addClass("disabled").attr("disabled","disabeld")},canExec:function(){if(this.enabledWhen){var t=this.workzone().select();if("selected"===this.enabledWhen&&t.length<=0)return!1;if("single"===this.enabledWhen&&1!==t.length)return!1;if("multiple"===this.enabledWhen&&t.length<1)return!1}return!0},exec:function(){},listenUI:function(){this.enabledWhen&&this.listenTo(this.workzone(),"selected refresh",function(){this.setState()})},shortcutExec:function(){this.canExec()&&this.exec()},render:function(){var t={name:this.name,icon:this.icon||"docmana-icon docmana-icon-"+this.name,shortcuts:null==this.shortcuts?"":"("+this.shortcuts+")"},e=this.tpl(this.templateName),i=e(t);return this.$el=$(i),this.trigger("rendered"),this.listenUI(),this.setState(),this.$el}}),docmana.ViewBase=Backbone.View.extend(_.extend({initialize:function(t){this.initProps(t),this.listen(),this.props.autoAction&&(this.events||(this.events={}),_.extend(this.events,{"click [data-action]":"_actionHandler","click [data-command]":"_commandHandler"}),this.delegateEvents()),this.init.apply(this,arguments),this.props.autoRender&&this.render()},_commandHandler:function(t){var e=$(t.currentTarget),i=e.attr("data-command"),n=this.main().command(i);n&&n.canExec()&&n.exec(e.data())},_actionHandler:function(t,e){t.preventDefault(),e||(e=this);var i=$(t.currentTarget);if(!(i.closest("script").length>0)){var n="_"+i.data().action;n.indexOf("Handler")<0&&(n+="Handler"),e[n]&&e[n](t)}}},i)),docmana.CommandContainer=docmana.ViewBase.extend({_getCommandOptions:function(){var t=this.props.commands||[];return _.filter(this.main().props.commands,function(e){var i=e[0];return null!=_.find(t,function(t){var e=_.isString(t)?t:t.name;return e===i})})},_getCommandGroups:function(){var t=this,e={};return _.forEach(this._getCommandOptions(),function(i){var n=i[0],o=i[1];e[n]=_.compact(_.map(o,function(e){var i=t.main().command(e);return i}))}),e},_getCommandGroupDom:function(t,e){if(t.length>0){var i=$(this.tpl("toolbarBtnGroup")({name:e}));return _.forEach(t,function(t){i.append(t.render())}),i}return""},_getCommandAppendTo:function(t){var e=_.find(this.props.commands,function(e){return e.name===t});return null==e?this.$el:this.$(e.to)},_renderCommands:function(){var t=this._getCommandGroups(),e=this;_.forEach(t,function(t,i){e._getCommandAppendTo(i).append(e._getCommandGroupDom(t,i))})}})}(),function(){"use strict";docmana.utils={formatString:function(){for(var t=arguments[0],e=0;e<arguments.length-1;e++){var i=new RegExp("\\{"+e+"\\}","gm");t=t.replace(i,arguments[e+1])}return t},formatFileSize:function(t,e,i){null==i&&(i=!0),null==e&&(e=!1);var n=i?1e3:1024,o=i?["KB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],a=-1,s=1;if(e)t/=n,a=0,s=0,1>t&&t>0&&(t=1);else{if(Math.abs(t)<n)return t+" B";do t/=n,++a;while(Math.abs(t)>=n&&a<o.length-1)}return t.toFixed(s)+" "+o[a]},fileNameExtension:function(t){return"."+t.split(".").pop()},unixTimestamp:function(){return Math.round((new Date).getTime()/1e3)},selectSelectableElement:function(t,e){$(".ui-selected",t).not(e).removeClass("ui-selected ui-selectee").addClass("ui-unselecting"),$(e).addClass("ui-selecting ui-selectee");var i=t.data("ui-selectable");i._mouseStop(null)},setInputSelection:function(t,e,i){if(t.focus(),"undefined"!=typeof t.selectionStart)t.selectionStart=e,t.selectionEnd=i;else if(document.selection&&document.selection.createRange){t.select();var n=document.selection.createRange();n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",e),n.select()}},setInputSelectionWithoutExtension:function(t){var e=t.val(),i=e.lastIndexOf(".");i=i>0?i:e.length,docmana.utils.setInputSelection(t[0],0,i)},inlineEdit:function(t,e,i,n){null==i&&(i=0),null==n&&(n=!1);var o,a=_.trim(t.text());o=0===i?$('<input name="temp" type="text" class="inline-edit" />').autosizeInput():$('<textarea name="temp" class="inline-edit" tabindex="2"></textarea>'),o.val(a).on("keydown",function(t){13===t.keyCode&&(t.preventDefault(),$(this).blur())}),0===i?o.width(t.outerWidth()+30):o.height(t.outerHeight()),docmana.utils.setInputSelectionWithoutExtension(o),t.hide(),t.after(o),o.focus(),o.on("blur",function(){var i=$(this).val();(n||""!==i&&a!==i)&&(t.text(i),e(i)),$(this).remove(),t.show()})}}}(),function(){"use strict";function t(t){return this.each(function(){var e=$(this),i=e.data("docmana"),n=$.extend({el:this},docmana.DEFAULTS,e.data(),"object"==typeof t&&t);i||e.data("docmana",i=new docmana.App(n)),"string"==typeof t&&i[t]()})}docmana.App=docmana.ViewBase.extend({init:function(){this.ui={},this.commands={},this._initKernel(),this._initCommands();
},templateName:"main",defaults:{autoRender:!0,className:"static",panelClassName:"panel no-margin panel-default"},listen:function(){this.listenTo(this,"rendered",function(){this.$el.attr("tabindex",1).addClass("docmana").addClass(this.props.className).find(".docmana-panel").addClass(this.props.panelClassName),this._initUI(),this.startup();var t=this;setTimeout(function(){t.relayout()},1)}),this.listenTo(this,"started",function(){this.listenTo(this.store,"syncFail",function(t){docmana.ui.notify.error(t)})})},$panel:function(){return this.$(".docmana-panel")},relayout:function(){(this.$el.hasClass("static")||this.$el.hasClass("fixed"))&&(this.$(".docmana-body").css({top:this.$(".docmana-heading").outerHeight(),bottom:this.$(".docmana-footer").outerHeight()}),this.$(".docmana-workzone").css({top:this.$(".docmana-navigation").outerHeight()}),this.$(".docmana-navigation .breadcrumb-group").css({"margin-left":this.$(".docmana-navigation .nav-group").outerWidth()+5,"margin-right":this.$(".docmana-navigation .search-group").outerWidth()+5}))},_initKernel:function(){var t=this;_.forEach(this.props.kernel,function(e){t[e]=docmana[e](_.extend({main:t},t.props[e]))})},_initUI:function(){var t=this;_.forEach(this.props.ui,function(e){t.ui[e]=docmana.ui[e](_.extend({el:t.$(".docmana-"+e),main:t},t.props[e]))}),this.$el.on("focus",function(){})},_initCommands:function(){var t=this;_.forEach(_.flatten(this.props.commands),function(e){_.isArray(e)&&_.forEach(e,function(e){var i=docmana.commands[e](_.extend({main:t},t.props[e]));t.commands[e]=i})})},command:function(t){return this.commands[t]},exec:function(){var t=_.toArray(arguments),e=t.shift(),i=this.command(e);i&&i.exec.apply(i,t)},focus:function(){this.$el.focus()},startup:function(){this.$el[0].outerWidth;this.trigger("started"),this.store.open(null,1)}}),$.fn.docmana=t,$.fn.docmana.Constructor=docmana}(),function(){"use strict";var t=docmana.ComponentBase.extend({init:function(t){this._data=[],this.isCut=0},listen:function(){},data:function(t,e){return null!=t&&(e||t.length>0)&&(this._data=t,this.trigger("change",this._data)),this._data},cut:function(t){this.isCut=1,this.data(t)},copy:function(t){this.isCut=0,this.data(t)},paste:function(){if(!this.isEmpty()){var t=this,e=this.getIds(),i=this.store().cwd().hash,n=this.getSrcDir();this.isCut?this.store().moveTo(i,e,n).done(function(){t.empty()}):this.store().copyTo(n,i,e)}},empty:function(){this.data([],!0)},getSrcDir:function(){return this._data[0].phash},getIds:function(){return _.map(this.data(),function(t){return t.hash})},isEmpty:function(){return 0===this.data().length}});docmana.clipboard=function(e){return new t(e)}}(),function(){"use strict";var t=docmana.ComponentBase.extend({init:function(t){this.position=null,this._data=[]},listen:function(){this.listenTo(this.main().store,"cwdChange",function(){var t=this.main().store.cwd(),e=_.findIndex(this._data,function(e){return e.hash===t.hash});0>e?(this.add(t),this.position=this._data.length-1):this.position=e,this.trigger("change",this._data)})},byId:function(t){return _.find(this._data,function(e){return e.hash===t})},getPath:function(){return this._data.slice(0,this.position+1)},add:function(t){this.position<this._data.length-1&&this._data.splice(this.position+1,this._data.length-1-this.position),this._data.push(t)},forward:function(){this.canForward()&&(this.position=this.position+1,this.triggerOpen())},getCurrHash:function(){var t=this._data[this.position];return null!=t?t.hash:t},back:function(){this.canBack()&&(this.position=this.position-1,this.triggerOpen())},triggerOpen:function(){this.main().store.open(this.getCurrHash())},canForward:function(){return this.position+1<this._data.length},canBack:function(){return this._data.length>=2&&0!==this.position},storeHistory:function(){},restoreHistory:function(){}});docmana.history=function(e){return new t(e)}}(),function(){"use strict";docmana.mimeTypes={unknown:"Unknown",directory:"Folder",symlink:"Alias","symlink-broken":"AliasBroken","application/x-empty":"TextPlain","application/postscript":"Postscript","application/vnd.ms-office":"MsOffice","application/msword":"MsWord","application/vnd.ms-word":"MsWord","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"MsWord","application/vnd.ms-word.document.macroEnabled.12":"MsWord","application/vnd.openxmlformats-officedocument.wordprocessingml.template":"MsWord","application/vnd.ms-word.template.macroEnabled.12":"MsWord","application/vnd.ms-excel":"MsExcel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"MsExcel","application/vnd.ms-excel.sheet.macroEnabled.12":"MsExcel","application/vnd.openxmlformats-officedocument.spreadsheetml.template":"MsExcel","application/vnd.ms-excel.template.macroEnabled.12":"MsExcel","application/vnd.ms-excel.sheet.binary.macroEnabled.12":"MsExcel","application/vnd.ms-excel.addin.macroEnabled.12":"MsExcel","application/vnd.ms-powerpoint":"MsPP","application/vnd.openxmlformats-officedocument.presentationml.presentation":"MsPP","application/vnd.ms-powerpoint.presentation.macroEnabled.12":"MsPP","application/vnd.openxmlformats-officedocument.presentationml.slideshow":"MsPP","application/vnd.ms-powerpoint.slideshow.macroEnabled.12":"MsPP","application/vnd.openxmlformats-officedocument.presentationml.template":"MsPP","application/vnd.ms-powerpoint.template.macroEnabled.12":"MsPP","application/vnd.ms-powerpoint.addin.macroEnabled.12":"MsPP","application/vnd.openxmlformats-officedocument.presentationml.slide":"MsPP","application/vnd.ms-powerpoint.slide.macroEnabled.12":"MsPP","application/pdf":"PDF","application/xml":"XML","application/vnd.oasis.opendocument.text":"OO","application/vnd.oasis.opendocument.text-template":"OO","application/vnd.oasis.opendocument.text-web":"OO","application/vnd.oasis.opendocument.text-master":"OO","application/vnd.oasis.opendocument.graphics":"OO","application/vnd.oasis.opendocument.graphics-template":"OO","application/vnd.oasis.opendocument.presentation":"OO","application/vnd.oasis.opendocument.presentation-template":"OO","application/vnd.oasis.opendocument.spreadsheet":"OO","application/vnd.oasis.opendocument.spreadsheet-template":"OO","application/vnd.oasis.opendocument.chart":"OO","application/vnd.oasis.opendocument.formula":"OO","application/vnd.oasis.opendocument.database":"OO","application/vnd.oasis.opendocument.image":"OO","application/vnd.openofficeorg.extension":"OO","application/x-shockwave-flash":"AppFlash","application/flash-video":"Flash video","application/x-bittorrent":"Torrent","application/javascript":"JS","application/rtf":"RTF","application/rtfd":"RTF","application/x-font-ttf":"TTF","application/x-font-otf":"OTF","application/x-rpm":"RPM","application/x-web-config":"TextPlain","application/xhtml+xml":"HTML","application/docbook+xml":"DOCBOOK","application/x-awk":"AWK","application/x-gzip":"GZIP","application/x-bzip2":"BZIP","application/x-xz":"XZ","application/zip":"ZIP","application/x-zip":"ZIP","application/x-rar":"RAR","application/x-tar":"TAR","application/x-7z-compressed":"7z","application/x-jar":"JAR","text/plain":"TextPlain","text/x-php":"PHP","text/html":"HTML","text/javascript":"JS","text/css":"CSS","text/rtf":"RTF","text/rtfd":"RTF","text/x-c":"C","text/x-csrc":"C","text/x-chdr":"CHeader","text/x-c++":"CPP","text/x-c++src":"CPP","text/x-c++hdr":"CPPHeader","text/x-shellscript":"Shell","application/x-csh":"Shell","text/x-python":"Python","text/x-java":"Java","text/x-java-source":"Java","text/x-ruby":"Ruby","text/x-perl":"Perl","text/x-sql":"SQL","text/xml":"XML","text/x-comma-separated-values":"CSV","text/x-markdown":"Markdown","image/x-ms-bmp":"BMP","image/jpeg":"JPEG","image/gif":"GIF","image/png":"PNG","image/tiff":"TIFF","image/x-targa":"TGA","image/vnd.adobe.photoshop":"PSD","image/xbm":"XBITMAP","image/pxm":"PXM","audio/mpeg":"AudioMPEG","audio/midi":"AudioMIDI","audio/ogg":"AudioOGG","audio/mp4":"AudioMPEG4","audio/x-m4a":"AudioMPEG4","audio/wav":"AudioWAV","audio/x-mp3-playlist":"AudioPlaylist","video/x-dv":"VideoDV","video/mp4":"VideoMPEG4","video/mpeg":"VideoMPEG","video/x-msvideo":"VideoAVI","video/quicktime":"VideoMOV","video/x-ms-wmv":"VideoWM","video/x-flv":"VideoFlash","video/x-matroska":"VideoMKV","video/ogg":"VideoOGG"}}(),function(){"use strict";docmana.resources={},docmana.resource=function(){var t=docmana.resources[docmana.lang],e=_.toArray(arguments),i=e.shift(),n=t[i];return null==n?i:(e.unshift(n),docmana.utils.formatString.apply(docmana.utils,e))}}(),function(){"use strict";var t=docmana.ComponentBase.extend({init:function(t){this._data=[],this._sortBy={field:"name",order:"asc"},this._cwd=null},data:function(t){return null!=t&&(this._data=t),this._data},cwdData:function(){var t=this.cwd().hash;return _.filter(this._data,function(e){return e.phash===t})},url:function(t){return this.props.url},cwd:function(){return this._cwd},byId:function(t){return _.find(this._data,function(e){return e.hash===t})},byName:function(t){return _.find(this._data,function(e){return e.name===t})},byIds:function(t){var e=this;return _.compact(_.map(t,function(t){return e.byId(t)}))},listen:function(){this.listenTo(this,"sync",function(t,e){t.added&&(this._data=this._data.concat(t.added)),t.removed&&_.remove(this._data,function(e){return _.findIndex(t.removed,function(t){return e.hash===t})>=0}),t.files&&(this._data=t.files),t.cwd&&(null!=this._cwd&&this._cwd.hash===t.cwd.hash||(this._cwd=t.cwd,this.trigger("cwdChange",this.cwd()))),this.cleanData(),this.sortBy(),this.update(e)})},cleanData:function(){_.remove(this._data,function(t){return t.isNew})},sortBy:function(t,e,i){if(null!=t&&(this._sortBy.field=t),null!=e&&(this._sortBy.order=e),null==i&&(i=!0),i){var n=_.groupBy(this._data,function(t){return"directory"===t.mime});n["true"]=this._baseSortBy(n["true"]),n["false"]=this._baseSortBy(n["false"]),this._data=n["true"].concat(n["false"])}else this._data=this._baseSortBy(this._data);return this.trigger("sort",this._sortBy),this},update:function(t){t||(t={}),this.trigger("update",this._data,t)},_baseSortBy:function(t){var e=this._sortBy.field,i=this._sortBy.order;return"name"===e&&(e=function(t){return t.name.toLowerCase()}),_.orderBy(t,[e],[i])},mkdir:function(t,e){return this.post({cmd:"mkdir",target:e,name:t})},rename:function(t,e){return this.post({cmd:"rename",name:t,target:e})},moveTo:function(t,e,i){return i||(i=this.cwd().hash),this.paste(i,t,e,1)},copyTo:function(t,e,i){return this.paste(t,e,i,0)},open:function(t,e){return this.fetch({cmd:"open",target:t,init:e})},search:function(t,e){return this.fetch({cmd:"search",target:t,q:e})},content:function(t){return this.getJSON({cmd:"get",target:t})},paste:function(t,e,i,n){return t===e?this.duplicate(i):this.post({cmd:"paste",cut:n,dst:e,src:t,targets:i})},duplicate:function(t){return this.post({cmd:"duplicate",targets:t})},upload:function(t){var e=this;return t.ajaxSubmit({url:this.url(),dataType:"json",data:this.uploadParams(),success:function(t){e.trigger("sync",t)}})},uploadParams:function(){return this._getRequestParams({cmd:"upload",target:this.cwd().hash})},rm:function(t){return this.post({cmd:"rm",targets:t})},_getRequestParams:function(t){return $.extend({},this.props.requestData,t)},request:function(t,e,i){var n=this,o=this._getRequestParams(e);return null==i&&(i=!0),$.ajax({url:this.url(),type:t,data:o,dataType:"json"}).fail(function(t,e,i,o){n.trigger("syncFail",e)}).done(function(t){i&&n.trigger("sync",t,o)}).always(function(t){})},getJSON:function(t){return this.request("get",t,!1)},fileUrl:function(t,e){null==e&&(e=0);var i=this._getRequestParams({cmd:"file",target:t,download:e});return this.url()+"?"+$.param(i)},fetch:function(t){return this.request("get",t)},get:function(t){return this.request("get",t)},post:function(t){return this.request("post",t)}});docmana.store=function(e){return new t(e)}}(),function(){"use strict";var t=_.extend({formatDate:function(t,e){var i=new Date(1e3*t);return e||(e="yyyy/mm/dd HH:MM"),i.format(e)},_mime2ClassDep:function(t){var e="ico-";return t=t.split("/"),e+t[0]+("image"!==t[0]&&t[1]?" "+e+t[1].replace(/(\.|\+)/g,"-"):"")},name2IconClass:function(t,e){if("directory"===e)return"icon-folder";var i=t.split("."),n="icon-";return n+i[i.length-1]},mime2Class:function(t){return"directory"===t?"type-directory":"type-file"},mime2Type:function(t){return docmana.mimeTypes[t]},fileMetadata:function(t){var e=docmana.resource,i=[];return i.push(t.name),i.push(e("Type")+": "+e("kind"+this.mime2Type(t.mime))),"directory"!==t.mime&&i.push(e("Size")+": "+this.formatFileSize(t.size)),i.push(e("Date modified")+": "+this.formatDate(t.ts)),i.join(" &#13; ")}},docmana.utils);docmana.templateHelper=t,docmana.template={_cache:{}},docmana.template.load=function(t){var e=this;_.forEach(t,function(t,i){e._cache[i]=e.compile(t)})},docmana.template.get=function(t){return this._cache[t+".html"]},docmana.template.compile=function(t){return _.template(t,{imports:{$:jQuery,T:docmana.templateHelper,L:docmana.resource},variable:"data"})},docmana.template.load(docmana.templates)}(),function(t){"use strict";function e(e,o){this.element=e,this.$element=t(e),this.settings=t.extend({},n,o),this._defaults=n,this._name=i,this.init()}var i="clearIt",n={clearClass:"clear_input",focusAfterClear:!0,linkText:"&times;",callback:null};t.extend(e.prototype,{init:function(){var t=this,e=this.$element,i=e.parent(),n=this.settings.clearClass+"_div";i.hasClass(n)||i.addClass(n).append('<a style="position: absolute; cursor: pointer;" class="'+this.settings.clearClass+'">'+this.settings.linkText+"</a>"),this.$btn().on("click",function(e){t.clear()}),e.on("keyup keydown change focus",function(){t.toggleBtn(),t.hasText()||t.callback()}),this.toggleBtn()},$btn:function(){return this.$element.parent().find("."+this.settings.clearClass)},toggleBtn:function(){var t=this.$btn(),e=this.hasText()?"show":"hide";t[e](),this.layout()},layout:function(){var t=this.$element.outerWidth(),e=this.$element.outerHeight(),i=this.$btn();i.css({top:e/2-i.height()/2,left:t-e/2-i.height()/2-10})},callback:function(){"function"==typeof this.settings.callback&&this.settings.callback()},clear:function(){this.$element.val("").change(),this.toggleBtn(),this.settings.focusAfterClear&&this.$element.focus(),this.callback()},hasText:function(){return this.$element.val().replace(/^\s+|\s+$/g,"").length>0}}),t.fn[i]=function(n){return this.each(function(){t.data(this,"plugin_"+i)||t.data(this,"plugin_"+i,new e(this,n))})}}(jQuery);var Plugins;!function(t){var e=function(){function t(t){"undefined"==typeof t&&(t=30),this.space=t}return t}();t.AutosizeInputOptions=e;var i=function(){function t(e,i){var n=this;this._input=$(e),this._options=$.extend({},t.getDefaultOptions(),i),this._mirror=$('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>'),$.each(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(t,e){n._mirror[0].style[e]=n._input.css(e)}),$("body").append(this._mirror),this._input.on("keydown keyup input propertychange change",function(t){n.update()}),function(){n.update()}()}return t.prototype.getOptions=function(){return this._options},t.prototype.update=function(){var t=this._input.val()||"";if(t!==this._mirror.text()){this._mirror.text(t);var e=this._mirror.width()+this._options.space;this._input.width(e)}},t.getDefaultOptions=function(){return this._defaultOptions},t.getInstanceKey=function(){return"autosizeInputInstance"},t._defaultOptions=new e,t}();t.AutosizeInput=i,function(e){var i="autosize-input",n=["text","password","search","url","tel","email","number"];e.fn.autosizeInput=function(o){return this.each(function(){if("INPUT"==this.tagName&&e.inArray(this.type,n)>-1){var a=e(this);a.data(t.AutosizeInput.getInstanceKey())||(void 0==o&&(o=a.data(i)),a.data(t.AutosizeInput.getInstanceKey(),new t.AutosizeInput(this,o)))}})},e(function(){e("input[data-"+i+"]").autosizeInput()})}(jQuery)}(Plugins||(Plugins={})),function(){"use strict";var t=docmana.CommandBase.extend({init:function(t){this.name="back",this.templateName="toolbarBtn",this.shortcuts="Alt+Left"},listen:function(){this.listenTo(this.main().store,"update",function(){this.setState()})},canExec:function(){return this.main().history.canBack()},exec:function(){return this.main().history.back()}});docmana.commands.back=function(e){return new t(e)}}(),function(){"use strict";var t="copy",e=docmana.CommandBase.extend({init:function(e){this.name=t,this.templateName="toolbarBtn",this.enabledWhen="selected",this.shortcuts="Ctrl+C"},exec:function(){var t=this.store().byIds(this.workzone().getIds());this.main().clipboard.copy(t)}});docmana.commands[t]=function(t){return new e(t)}}(),function(){"use strict";var t="cut",e=docmana.CommandBase.extend({init:function(e){this.name=t,this.templateName="toolbarBtn",this.enabledWhen="selected",this.shortcuts="Ctrl+X"},exec:function(){var t=this.workzone();t.$(".file-list-item.cut").removeClass("cut"),t.select().addClass("cut");var e=this.store().byIds(t.getIds());this.main().clipboard.cut(e)}});docmana.commands[t]=function(t){return new e(t)}}(),function(){"use strict";var t="download",e=docmana.CommandBase.extend({init:function(e){this.name=t,this.templateName="toolbarBtn",this.enabledWhen="selectedFiles"},_filteredIds:function(){var t=this.workzone().getIds(),e=this,i=_.filter(t,function(t){return"directory"!==e.store().byId(t).mime});return i},canExec:function(){var t=this.workzone().getIds();if(0===t.length)return!1;var e=this;return _.every(t,function(t){return"directory"!==e.store().byId(t).mime})},exec:function(){var t=this._filteredIds(),e=this;_.forEach(t,function(t){var i=e.store().fileUrl(t,1);$.fileDownload(i)})}});docmana.commands[t]=function(t){return new e(t)}}(),function(){"use strict";var t="duplicate",e=docmana.CommandBase.extend({init:function(e){this.name=t,this.templateName="toolbarBtn",this.enabledWhen="selected"},exec:function(){var t=this.workzone().getIds();this.store().duplicate(t)}});docmana.commands[t]=function(t){return new e(t)}}(),function(){"use strict";var t=docmana.CommandBase.extend({init:function(t){this.name="forward",this.templateName="toolbarBtn",this.shortcuts="Alt+Right"},listen:function(){this.listenTo(this.main().store,"update",function(){this.setState()})},canExec:function(){return this.main().history.canForward()},exec:function(){return this.main().history.forward()}});docmana.commands.forward=function(e){return new t(e)}}(),function(){"use strict";var t="full",e=docmana.CommandBase.extend({init:function(e){this.name=t,this.templateName="toolbarBtn",this.enabledWhen=null,this.viewLayout=this.props.viewLayout},defaults:{viewLayout:"normal"},listen:function(){this.listenTo(this,"rendered",function(){this._setDisplay()})},_getReverse:function(){var t=this.viewLayout;return"normal"===t?"fullscreen":"normal"},_setDisplay:function(){var t=this.viewLayout;this.$el.find(".docmana-icon").removeClass("docmana-icon-"+this._getReverse()).addClass("docmana-icon-"+t)},toggle:function(t){this.viewLayout=this._getReverse(),this._setDisplay(),"fullscreen"===this.viewLayout?(this.main().$el.addClass("fixed"),$("body").addClass("overflow-hidden")):(this.main().$el.removeClass("fixed"),$("body").removeClass("overflow-hidden"))},exec:function(t){this.toggle()}});docmana.commands[t]=function(t){return new e(t)}}(),function(){"use strict";var t="layout",e=docmana.CommandBase.extend({init:function(e){this.name=t,this.templateName="toolbarBtnLayout",this.enabledWhen=null},exec:function(){var t=this.$element().find("input[type=radio]:checked").data("layout");this.workzone().changeLayout(t)},listenUI:function(){var t=this.workzone().layout;this.$element().find("[data-layout="+t+"]").closest(".btn").button("toggle");var e=this;this.$el.on("change",function(t){e.exec()})}});docmana.commands[t]=function(t){return new e(t)}}(),function(){"use strict";var t="mkdir",e=0,i=docmana.CommandBase.extend({init:function(e){this.name=t,this.templateName="toolbarBtn",this.shortcuts="Alt+N",this.exec=_.debounce(_.bind(this.exec,this),500)},_generateName:function(){var t=" "+docmana.resource("new folder");return 0===e?t:t+" "+e},_generateUsableName:function(){for(var t=null,i=!0;i;)t=this._generateName(),i=null!=this.store().byName(t),e++;return t},shortcutExec:function(){this.canExec()&&this._exec()},_exec:function(){var t=this,e=this.store().cwd();if(e){var i=e.hash,n=this._generateUsableName();t.store().mkdir(n,i).done(function(){t.workzone().select(t.workzone().$items().first()),t.main().exec("rename")})}},exec:function(){this._exec()}});docmana.commands[t]=function(t){return new i(t)}}(),function(){"use strict";var t="mkfile",e=docmana.CommandBase.extend({init:function(e){this.name=t,this.templateName="toolbarBtn"}});docmana.commands[t]=function(t){return new e(t)}}(),function(){var t="open",e=docmana.CommandBase.extend({init:function(e){this.name=t,this.templateName="toolbarBtn",this.enabledWhen="single",this.shortcuts="Return"},exec:function(t){if(null==t){var e=this.workzone().select().attr("id");t=this.store().byId(e)}if(null!=t)if("directory"===t.mime)this.store().open(t.hash);else{var i=this.main().ui.viewer;i&&i.callout()}}});docmana.commands[t]=function(t){return new e(t)}}(),function(){"use strict";var t="paste",e=docmana.CommandBase.extend({init:function(e){this.name=t,this.templateName="toolbarBtn",this.shortcuts="Ctrl+V"},exec:function(){this.clipboard().paste()},listenUI:function(){this.listenTo(this.main().clipboard,"change",function(){this.setState()})},canExec:function(){return!this.main().clipboard.isEmpty()}});docmana.commands[t]=function(t){return new e(t)}}(),function(){"use strict";var t="refresh",e=docmana.CommandBase.extend({init:function(e){this.name=t,this.templateName="toolbarBtn",this.shortcuts="F5"},exec:function(){var t=this.store().cwd().hash;this.store().open(t,0)}});docmana.commands[t]=function(t){return new e(t)}}(),function(){"use strict";var t="rename",e=docmana.CommandBase.extend({init:function(e){this.name=t,this.templateName="toolbarBtn",this.enabledWhen="single",this.shortcuts="F2"},exec:function(){var t=this;this.workzone().editItemName(function(e){var i=t.workzone().getIds()[0];t.store().rename(e,i).done(function(){t.main().focus()})})}});docmana.commands[t]=function(t){return new e(t)}}(),function(){"use strict";var t="rm",e=docmana.CommandBase.extend({init:function(e){this.name=t,this.templateName="toolbarBtn",this.enabledWhen="selected",this.shortcuts="Del"},exec:function(){var t=this.workzone().getIds();if(t.length>0){var e=this;docmana.ui.notify.confirm(function(){e.store().rm(t)})}}});docmana.commands[t]=function(t){return new e(t)}}(),function(){"use strict";var t="search",e=docmana.CommandBase.extend({init:function(e){this.name=t,this.templateName="toolbarSearch"},exec:function(){var t=_.trim(this.$input().val());if(""!==t&&null!=t){var e=this.store().cwd().hash;this.store().search(e,t)}},$input:function(){return this.$element().find("input")},listen:function(){this.listenTo(this,"rendered",function(){var t=this;this.$el.on("keydown",function(e){13===e.which&&(e.preventDefault(),t.exec())}),this.$input().clearIt({callback:function(){var e=t.store().cwd().hash;t.store().open(e)}})})}});docmana.commands[t]=function(t){return new e(t)}}(),function(){"use strict";var t="sort",e=docmana.CommandBase.extend({init:function(e){this.name=t,this.templateName="toolbarBtnSort",this.enabledWhen=null},setState:function(){var t=this.$element(),e=this.store()._sortBy;t.find(".active").removeClass("active"),t.find("[data-field="+e.field+"]").addClass("active"),t.find("[data-order="+e.order+"]").addClass("active")},listenUI:function(){this.listenTo(this.store(),"sort",function(t){this.setState()})},exec:function(t){t||(t={}),this.store().sortBy(t.field,t.order),this.store().update()}});docmana.commands[t]=function(t){return new e(t)}}(),function(){"use strict";var t="upload",e=docmana.CommandBase.extend({init:function(e){this.name=t,this.templateName="toolbarBtnUpload"},listen:function(){this.listenTo(this.main(),"started",function(){var t=this,e=this.$el.find(":file"),i=this.main().ui.uploader;$.fn.fileupload&&i?i.build(e):e.on("change",function(){var e=$(this).val();""!==e&&null!=e&&t.store().upload($(this).closest("form"))})}),this.listenTo(this,"rendered",function(){})},enable:function(){docmana.CommandBase.prototype.enable.apply(this,arguments),this.$element().find(":file").removeAttr("disabled")},disable:function(){docmana.CommandBase.prototype.disable.apply(this,arguments),this.$element().find(":file").attr("disabled","disabled")}});docmana.commands[t]=function(t){return new e(t)}}(),function(){"use strict";var t=docmana.ViewBase.extend({listen:function(){this.listenTo(this.history(),"change",function(){this.render()})},events:{"click li > a":"_linkHandler"},$breadcrumb:function(){return this.$(".breadcrumb")},render:function(){var t=this.tpl("breadcrumbs"),e=this.history().getPath();this.$el.html(t(e)),this._interactive()},_interactive:function(){var t=this;this.$("li > a:not(.ui-droppable)").droppable({accept:".file-list-item",hoverClass:"drop-active",drop:function(e,i){var n=t.workzone().getIds(i.draggable),o=$(e.target).attr("data-hash");t.store().moveTo(o,n)}})},_linkHandler:function(t){t.preventDefault();var e=$(t.currentTarget).attr("data-hash");this.main().exec("open",this.history().byId(e))}});docmana.ui.breadcrumbs=function(e){return new t(e)}}(),function(){"use strict";var t=docmana.CommandContainer.extend({templateName:"navigation",breadcrumbTemplateName:"breadcrumb",defaults:{autoAction:!0,autoRender:!0,commands:[{name:"navigation",to:".nav-group"},{name:"search",to:".search-group"},{name:"refresh",to:".search-group"}]},listen:function(){this.listenTo(this.history(),"change",function(){this._renderBreadcrumb()}),this.listenTo(this,"rendered",function(){this._renderBreadcrumb(),this._renderCommands()})},events:{"click .docmana-breadcrumb li > a":"_linkHandler"},$breadcrumb:function(){return this.$(".docmana-breadcrumb")},_renderBreadcrumb:function(){var t=this.tpl(this.breadcrumbTemplateName),e=this.history().getPath();this.$breadcrumb().html(t(e)),this._initBreadcrumbInteractive()},_initBreadcrumbInteractive:function(){var t=this;this.$("li > a:not(.ui-droppable)").droppable({accept:".file-list-item",hoverClass:"drop-active",drop:function(e,i){var n=t.workzone().getIds(i.draggable),o=$(e.target).attr("data-hash");t.store().moveTo(o,n)}})},_linkHandler:function(t){t.preventDefault();var e=$(t.currentTarget).attr("data-hash");this.main().exec("open",this.history().byId(e))}});docmana.ui.navigation=function(e){return new t(e)}}(),function(){"use strict";var t={_core:$.noop,warn:$.noop,success:$.noop,error:$.noop,confirm:$.noop};docmana.ui.notify=t,window.console&&(null==window.noty?(t._core=function(t){console[t.type](t.text)},t.warn=function(t){console.warn(t)},t.success=function(t){console.log(t)},t.error=function(t){console.error(t)},t.confirm=function(t,e,i){i||(i=docmana.resource("textConfirmOperate"));var n=window.confirm(i);n?t():e()}):(t._core=function(t){noty($.extend({type:"warning",dismissQueue:!0,force:!0,layout:"topCenter",theme:"relax",closeWith:["click"],maxVisible:1,animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:100},timeout:!1,killer:!0,modal:!1},t))},t.warn=function(e){t._core({text:e,type:"warning",timeout:4e3})},t.success=function(e){t._core({text:e,timeout:2e3,type:"success"})},t.error=function(e){t._core({text:e,type:"error",timeout:!1})},t.confirm=function(e,i,n){n||(n=docmana.resource("textConfirmOperate")),t._core({text:n,type:"confirm",modal:!0,buttons:[{addClass:"btn btn-primary btn-xs",text:docmana.resource("textOk"),onClick:function(t){t.close(),e()}},{addClass:"btn btn-danger btn-xs",text:docmana.resource("textCancel"),onClick:function(t){t.close(),i()}}]})}))}(),function(){"use strict";var t=docmana.CommandContainer.extend({templateName:"statusbar",defaults:{autoRender:!0,commands:[{name:"layout",to:".layout"}]},listen:function(){this.listenTo(this.store(),"update",function(){this.updateStatus()}),this.listenTo(this.workzone(),"selected",function(){this.updateStatus()}),this.listenTo(this,"rendered",function(){this._renderCommands()})},updateStatus:function(){this.$(".status-text").html(this.tpl("statusbarText")(this.getStatus()))},getStatus:function(){var t=this.store().cwdData(),e=this.workzone().getIds(),i=_.reduce(_.map(this.store().byIds(e),function(t){return"directory"===t.mime?NaN:t.size}),function(t,e){return t+e},0);return{count:t.length,selectedCount:e.length,selectedSize:isNaN(i)?"":docmana.templateHelper.formatFileSize(i)}}});docmana.ui.statusbar=function(e){return new t(e)}}(),function(){"use strict";docmana.ui.templates={toolbarBtn:$("#tpl-toolbar-btn").html(),toolbarBtnUpload:$("#tpl-toolbar-btn-upload").html(),toolbarBtnGroup:$("#tpl-toolbar-btn-group").html(),toolbarSearch:$("#toolbarSearch").html(),workzoneIconsView:$("#tpl-icons-view").html(),workzoneListView:$("#tpl-list-view").html(),workzoneIconsViewItem:$("#tpl-icons-view-item").html(),workzoneListViewItem:$("#tpl-list-view-item").html(),toolbarBtnSort:$("#tpl-toolbar-btn-sort").html(),toolbarBtnLayout:$("#toolbarBtnLayout").html(),tplNavigation:$("#tplNavigation").html(),tplBreadcrumb:$("#tplBreadcrumb").html(),tplStatusbar:$("#tplStatusbar").html(),tplViewer:$("#tplViewer").html(),tplMain:$("#tplMain").html(),tplFileInfo:$("#tplFileInfo").html()},docmana.template.load(docmana.ui.templates)}(),function(){"use strict";var t=docmana.CommandContainer.extend({className:"docmana-toolbar",templateName:"toolbar",defaults:{autoRender:!0,autoAction:!0,commands:["new","open","clipboard","organize",{name:"view",to:".right"},{name:"util",to:".right"}]},listen:function(){this.listenTo(this,"rendered",function(){this._renderCommands()})}});docmana.ui.toolbar=function(e){return new t(e)}}(),function(){"use strict";var t=docmana.ViewBase.extend({templateName:"uploader",init:function(){var t=this;this.parentDialog().on("shown.bs.modal",function(){}).on("hidden.bs.modal",function(){t.main().$el.focus()})},defaults:{autoRender:!0},events:{"click .cancel":"_cancelHandler"},listen:function(){this.listenTo(this.main(),"started",function(){var t=this,e=this.statusbar(),i=$(this.tpl("uploaderTrigger")());e&&(i.on("click",function(){t.parentDialog().modal("show")}).appendTo(e.$(".uploader")),t.$trigger=i)}),this.listenTo(this,"rendered",function(){this.parentDialog().modal({show:!1})})},parentDialog:function(){return this.$element().closest(".modal")},inputInstance:function(t){return t=t||this.$input,t.data("blueimp-fileupload")||t.data("fileupload")},$body:function(){return this.$(".files")},updateBadge:function(){var t=this.count(),e=this.$trigger.find(".badge");e.text(t),0===t?e.hide():e.show()},count:function(){var t=this.$(".file").length;return t},updateDialogDisplay:function(){0===this.count()?this.parentDialog().modal("hide"):this.parentDialog().modal("show")},build:function(t){var e=this,i=this.tpl("uploaderFiles"),n=docmana.utils.formatFileSize;t.fileupload({url:this.store().url(),formData:function(){return _.map(e.store().uploadParams(),function(t,e){return{name:e,value:t}})},dataType:"json",add:function(t,o){if(t.isDefaultPrevented())return!1;var a=$(this),s=e.inputInstance(a),r=s.options;o.context=$(i({files:o.files,options:r})).data("data",o).addClass("processing"),e.$body().append(o.context),e.updateBadge(),e.updateDialogDisplay(),o.process().always(function(){o.context.each(function(t){$(this).find(".size").text(n(o.files[t].size))}).removeClass("processing")}).done(function(){o.context.find(".start").prop("disabled",!1),s._trigger("added",t,o)!==!1&&(r.autoUpload||o.autoUpload)&&o.autoUpload!==!1&&o.submit()}).fail(function(){o.files.error&&o.context.each(function(t){var e=o.files[t].error;e&&$(this).find(".status").text(e)})})},progress:function(t,e){if(t.isDefaultPrevented())return!1;var i=Math.floor(e.loaded/e.total*100);e.context&&e.context.each(function(){
$(this).find(".progress").attr("aria-valuenow",i).children().first().css("width",i+"%"),$(this).find(".status > .percent").text(i+"%")})},fail:function(t,i){if(t.isDefaultPrevented())return!1;var n=e.inputInstance($(this));i.context&&i.context.each(function(e){if("abort"!==i.errorThrown){var o=i.files[e];o.error=o.error||i.errorThrown,$(this).find(".folder").text(o.error)}else $(this).remove(),n._trigger("failed",t,i),n._trigger("finished",t,i)}),e.updateBadge(),e.updateDialogDisplay()},done:function(t,i){i.context.remove(),e.updateBadge(),e.updateDialogDisplay(),e.store().trigger("sync",i.result)}}),this.$input=t},_cancelHandler:function(t){t.preventDefault();var e=$(t.currentTarget).closest(".file-upload,.file-download"),i=e.data("data")||{};i.context=i.context||e,i.abort?i.abort():(i.errorThrown="abort",this.trigger("fail",t,i))}});docmana.ui.uploader=function(e){return new t(e)}}(),function(){"use strict";var t=docmana.ViewBase.extend({templateName:"viewer",defaults:{autoAction:!0,autoRender:!0,fileType:[".txt",".csv",".pdf",".jpg",".gif",".png",".tiff",".ppt",".pptx",".doc",".docx",".xls",".xlsx"]},init:function(){var t=this;this.parentDialog().on("shown.bs.modal",function(){t.$body().css({top:t.$(".modal-header").outerHeight(),bottom:t.$(".modal-footer").outerHeight()}),t.viewCurrent()}).on("hidden.bs.modal",function(){t.$body().html(""),t.main().$el.focus()})},listen:function(){this.listenTo(this.workzone(),"selected",function(){this.$el.is(":visible")&&this.viewCurrent()}),this.listenTo(this,"rendered",function(){this.parentDialog().modal({show:!1})})},parentDialog:function(){return this.$element().closest(".modal")},callout:function(){this.parentDialog().modal("show")},$body:function(){return this.$el.find(".docmana-viewer-body")},viewCurrent:function(){var t=this,e=t.workzone().getIds();if(e.length>0){var i=e[0];t.$body().html("");var n=t.store().byId(i),o=docmana.utils.fileNameExtension(n.name);if(t.parentDialog().find(".modal-title").text(n.name),t.props.fileType.indexOf(o)>=0)t.store().content(i).done(function(e){if("path"===e.view){var i=t.store().fileUrl(e.content);".pdf"===o?PDFObject.embed(i,t.$body()):t.$body().html('<iframe src="'+i+'"></iframe>')}"content"===e.view&&t.$body().html(e.content)});else{var a=this.tpl("fileInfo");t.$body().html(a(n))}}},_previousHandler:function(t){this.workzone().selectTo("previous")},_nextHandler:function(t){this.workzone().selectTo("next")},_downloadHandler:function(t){this.main().exec("download")}});docmana.ui.viewer=function(e){return new t(e)}}(),function(){"use strict";var t=docmana.ViewBase.extend({init:function(){var t=this;this._buffer=[],this._selected=[],this._cwd=null,this._timer=[],this.layout=this.props.layout,this._moving=!1,this._renderListThrottle=_.throttle(_.bind(this._renderList,this),100),this._triggerSelectDebounce=_.debounce(_.bind(function(){this.trigger("selected",this.select())},this),200);var e=0,i=0;this.$el.on("mousedown",function(n){t._moving=!1,e=n.clientX,i=n.clientY}).on("mousemove",function(n){n.clientX===e&&n.clientY===i||(t._moving=!0)}),this._initHotKeys(),this._initSelectableInteractive(),this.render()},events:{scroll:"_scrollHandler","dblclick .file-list-item":"_itemDblClickHandler","mousedown .file-list-item .filename":"_editNameHandler",click:"_clickHandler"},defaults:{bottomThreshold:50,itemCountPerScreen:50},listen:function(){this.listenTo(this.store(),"update",function(t,e){e.cmd&&("rename"===e.cmd&&this._updateSelectedCache(e.target,e.name),"mkdir"===e.cmd),this.source(t)}),this.listenTo(this,"refresh",function(t){this._renderList(!1),this._restoreSelectUI()}),this.listenTo(this,"selected",function(t){this._selected=_.map(t,function(t){return{name:$(t).data("name"),id:$(t).attr("id")}})})},changeLayout:function(t){this.layout=t,this.render(),this.trigger("layout"),this.source(this.store()._data)},isListLayout:function(){return"list"===this.layout},source:function(t){this._buffer=this.store().cwdData(),this.store().cwd().hash!==this._cwd&&(this._cwd=this.store().cwd().hash,this._selected=[]),this.trigger("refresh",this._buffer)},getIds:function(t){null==t&&(t=this.select());var e=$.map(t,function(t){return $(t).attr("id")});return e},render:function(){var t=this.isListLayout()?this.tpl("workzoneListView"):this.tpl("workzoneIconsView");this.$el.html(t(this.props)),this.$view=this.$(".docmana-workzone-view"),this._buffer.length>0&&this.trigger("refresh")},select:function(t){return null!=t&&docmana.utils.selectSelectableElement(this.$el,t),this.$(".file-list-item.ui-selected")},_updateSelectedCache:function(t,e){var i=_.find(this._selected,function(e){return e.id===t});null!=i&&(i.name=e)},_restoreSelectUI:function(){var t=this,e=_.compact(_.map(this._selected,function(e){return t.$('[data-name="'+e.name+'"]')[0]}));t.select(e)},_renderItem:function(t){var e=this.isListLayout()?"workzoneListViewItem":"workzoneIconsViewItem";return this.tpl(e)(t)},_renderList:function(t){null==t&&(t=!0);var e=this,i=(this.$el,this.props.bottomThreshold,this.props.itemCountPerScreen),n=(this.$("[id]:last"),this._buffer.splice(0,i)),o=$.map(n,function(t){return e._renderItem(t)});this.$view[t?"append":"html"](o.join("")),this._setItemInteractive(),this.$el.selectable("refresh")},$items:function(){return this.$(".file-list-item")},_getShiftSelected:function(t){var e=this.$items(),i=e.filter(".ui-selected").first(),n=e.filter(".ui-selected").last(),o=e.index(t),a=e.index(i),s=e.index(n);return a=Math.min(o,a),s=Math.max(o,s),e.slice(a,s+1)},_isNormalMouseEvent:function(t){return!t.shiftKey&&!t.ctrlKey&&!t.metaKey},_initSelectableInteractive:function(){var t=this;this.$el.on("mousedown",".file-list-item",function(e){var i=$(e.currentTarget);if(t._isNormalMouseEvent(e))i.hasClass("ui-selected")||t.select(i);else{if(e.preventDefault(),e.ctrlKey){var n=t.select();$.merge(i,n)}e.shiftKey&&(i=t._getShiftSelected(i)),t.select(i)}}).on("click",".file-list-item",function(e){var i=$(e.currentTarget);t.select().length>1&&t._isNormalMouseEvent(e)&&t.select(i)}).selectable({delay:50,filter:".file-list-item",start:function(e,i){t._clearTimer(),t.$(".inline-edit").blur()},selected:function(e,i){t._triggerSelectDebounce()},unselected:function(e,i){t._triggerSelectDebounce()},stop:function(t,e){}})},_setItemInteractive:function(){var t=this;this.$(".drag-block:not(.ui-draggable)").draggable({appendTo:t.$el,delay:100,helper:function(){return'<div class="cwd-draggable-helper"><span class="badge count"></span></div>'},cursorAt:{top:20,left:20},start:function(e,i){t._clearTimer();var n=t.select();$.ui.ddmanager.current.element=n;var o=$(n.find(".filetype").splice(0,4)).clone();$.each(o,function(t,e){$(e).addClass("icon"+t)}),i.helper.append(o).find(".count").html(n.length)}}),this.$(".file-list-item.type-directory:not(.ui-droppable)").droppable({accept:".file-list-item",hoverClass:"drop-active",drop:function(e,i){var n=t.getIds(i.draggable),o=$(e.target).attr("id");t.store().moveTo(o,n)}})},_unselectAll:function(t){t.shiftKey||t.ctrlKey||t.metaKey||this.select([])},_selectAll:function(){this.select(this.$(".file-list-item"))},_clearTimer:function(){for(;this._timer.length>0;){var t=this._timer.shift();clearTimeout(t)}},_scrollHandler:function(){this._renderListThrottle()},_clickHandler:function(t){t.preventDefault(),$(t.target).is(":input")||(this.$(".inline-edit").blur(),this._$focusEl().focus()),this._moving||0!==$(t.target).closest(".file-list-item").length||this._unselectAll(t)},_isSingleSelected:function(t){return t.closest(".file-list-item").hasClass("ui-selected")&&1===this.select().length},_editNameHandler:function(t){if(2!==t.button){var e=$(t.currentTarget);if(this._isSingleSelected(e)){var i=_.delay(_.bind(function(t){this._isSingleSelected(t)&&this.main().exec("rename")},this),700,e);this._timer.push(i)}}},_isSelecting:function(){return $(".ui-selectable-helper").length>0},_isInput:function(t){return t.is("input, textarea, select, button")},_itemDblClickHandler:function(t){this._isInput($(t.target))||(this._clearTimer(),this.main().exec("open"))},_getSingleSelect:function(){var t=this.select().last();return 0===t.length?this.$items().first():t},editItemName:function(t,e){var i=this.select();if(1===i.length){var n=i.find(".filename"),o=this.isListLayout()?0:1;docmana.utils.inlineEdit(n,function(e){t(e)},o,e)}},selectTo:function(t){var e=this.$items(),i=this.select().last();if(0===i.length&&(i=e.first()),0!==i.length){var n=i,o=e.index(i);"next"===t&&o+1<e.length&&(n=$(e[o+1])),"previous"===t&&o-1>=0&&(n=$(e[o-1])),this.select(n)}},_$focusEl:function(){return this.main().$el},_initHotKeys:function(){var t=this;this._$focusEl().bind("keydown.docmana","left",function(e){t.isListLayout()||t.selectTo("previous")}).bind("keydown.docmana","right",function(e){t.isListLayout()||t.selectTo("next")}).bind("keydown.docmana","up",function(e){t.isListLayout()&&t.selectTo("previous")}).bind("keydown.docmana","down",function(e){t.isListLayout()&&t.selectTo("next")}).bind("keydown.docmana","ctrl+a",function(e){e.preventDefault(),t._selectAll()});var e=this.main().commands;_.forEach(e,function(e){e.shortcuts&&t._$focusEl().bind("keydown.docmana",e.shortcuts,function(t){t.preventDefault(),e.shortcutExec()})})}});docmana.ui.workzone=function(e){return new t(e)}}(),function(){"use strict";docmana.resources.en={cmdBack:"Back",cmdForward:"Forward",cmdOpen:"Open",cmdUpload:"Upload",cmdDownload:"Download",cmdCut:"Cut",cmdCopy:"Copy",cmdPaste:"Paste",cmdSort:"Sort by",cmdMkdir:"New folder",cmdDuplicate:"Duplicate",cmdRename:"Rename",cmdRm:"Remove",sortByName:"Name",sortBySize:"Size",sortByType:"Type",sortByDate:"Date modified",sortAscending:"Ascending",sortDescending:"Descending",fileName:"Name",fileDateModified:"Date modified",fileType:"Type",fileSize:"Size",statusbarItems:"items",statusbarSelectedItem:"{0} item selected",layoutList:"List",layoutLargeIcons:"Large Icons",textSearch:"Search...",textPreviousItem:"previous item",textNextItem:"next item",textFileUpload:"File uploader",textClose:"Close",textOk:"Ok",textCancel:"Cancel",textConfirmOperate:"Are you sure you want to do this operation?",labelLanguage:"Language: ",labelTheme:"Theme: ",kindUnknown:"Unknown",kindFolder:"Folder",kindAlias:"Alias",kindAliasBroken:"Broken alias",kindApp:"Application",kindPostscript:"Postscript document",kindMsOffice:"Microsoft Office document",kindMsWord:"Microsoft Word document",kindMsExcel:"Microsoft Excel document",kindMsPP:"Microsoft Powerpoint presentation",kindOO:"Open Office document",kindAppFlash:"Flash application",kindPDF:"Portable Document Format (PDF)",kindTorrent:"Bittorrent file",kind7z:"7z archive",kindTAR:"TAR archive",kindGZIP:"GZIP archive",kindBZIP:"BZIP archive",kindXZ:"XZ archive",kindZIP:"ZIP archive",kindRAR:"RAR archive",kindJAR:"Java JAR file",kindTTF:"True Type font",kindOTF:"Open Type font",kindRPM:"RPM package",kindText:"Text document",kindTextPlain:"Plain text",kindPHP:"PHP source",kindCSS:"Cascading style sheet",kindHTML:"HTML document",kindJS:"Javascript source",kindRTF:"Rich Text Format",kindC:"C source",kindCHeader:"C header source",kindCPP:"C++ source",kindCPPHeader:"C++ header source",kindShell:"Unix shell script",kindPython:"Python source",kindJava:"Java source",kindRuby:"Ruby source",kindPerl:"Perl script",kindSQL:"SQL source",kindXML:"XML document",kindAWK:"AWK source",kindCSV:"Comma separated values",kindDOCBOOK:"Docbook XML document",kindMarkdown:"Markdown text",kindImage:"Image",kindBMP:"BMP image",kindJPEG:"JPEG image",kindGIF:"GIF Image",kindPNG:"PNG Image",kindTIFF:"TIFF image",kindTGA:"TGA image",kindPSD:"Adobe Photoshop image",kindXBITMAP:"X bitmap image",kindPXM:"Pixelmator image",kindAudio:"Audio media",kindAudioMPEG:"MPEG audio",kindAudioMPEG4:"MPEG-4 audio",kindAudioMIDI:"MIDI audio",kindAudioOGG:"Ogg Vorbis audio",kindAudioWAV:"WAV audio",AudioPlaylist:"MP3 playlist",kindVideo:"Video media",kindVideoDV:"DV movie",kindVideoMPEG:"MPEG movie",kindVideoMPEG4:"MPEG-4 movie",kindVideoAVI:"AVI movie",kindVideoMOV:"Quick Time movie",kindVideoWM:"Windows Media movie",kindVideoFlash:"Flash movie",kindVideoMKV:"Matroska movie",kindVideoOGG:"Ogg movie"}}(),function(){"use strict";docmana.resources["zh-CN"]={cmdBack:"后退",cmdForward:"前进",cmdOpen:"打开",cmdUpload:"上传",cmdDownload:"下载",cmdCut:"剪切",cmdCopy:"复制",cmdPaste:"粘贴",cmdSort:"排序方式",cmdMkdir:"新建文件夹",cmdDuplicate:"副本",cmdRename:"重命名",cmdRm:"移除",sortByName:"名称",sortBySize:"大小",sortByType:"类型",sortByDate:"修改日期",sortAscending:"升序",sortDescending:"降序",fileName:"名称",fileDateModified:"修改日期",fileType:"类型",fileSize:"大小",statusbarItems:"个项目",statusbarSelectedItem:"选中 {0} 个项目",layoutList:"列表布局",layoutLargeIcons:"图标布局",textSearch:"搜索...",textPreviousItem:"前一项",textNextItem:"后一项",textFileUpload:"文件上传器",textClose:"关闭",textOk:"确定",textCancel:"取消",textConfirmOperate:"确定做此操作？",labelLanguage:"语言：",labelTheme:"主题：",kindUnknown:"未知",kindFolder:"文件夹",kindAlias:"别名",kindAliasBroken:"错误的别名",kindApp:"程序",kindPostscript:"Postscript 文档",kindMsOffice:"Microsoft Office 文档",kindMsWord:"Microsoft Word 文档",kindMsExcel:"Microsoft Excel 文档",kindMsPP:"Microsoft Powerpoint 演示",kindOO:"Open Office 文档",kindAppFlash:"Flash 程序",kindPDF:"Portable Document Format (PDF)",kindTorrent:"Bittorrent 文件",kind7z:"7z 压缩包",kindTAR:"TAR 压缩包",kindGZIP:"GZIP 压缩包",kindBZIP:"BZIP 压缩包",kindXZ:"XZ 压缩包",kindZIP:"ZIP 压缩包",kindRAR:"RAR 压缩包",kindJAR:"Java JAR 文件",kindTTF:"True Type 字体",kindOTF:"Open Type 字体",kindRPM:"RPM 包",kindText:"文本文件",kindTextPlain:"纯文本",kindPHP:"PHP 源代码",kindCSS:"层叠样式表(CSS)",kindHTML:"HTML 文档",kindJS:"Javascript 源代码",kindRTF:"富文本格式(RTF)",kindC:"C 源代码",kindCHeader:"C 头文件",kindCPP:"C++ 源代码",kindCPPHeader:"C++ 头文件",kindShell:"Unix 外壳脚本",kindPython:"Python 源代码",kindJava:"Java 源代码",kindRuby:"Ruby 源代码",kindPerl:"Perl 源代码",kindSQL:"SQL 脚本",kindXML:"XML 文档",kindAWK:"AWK 源代码",kindCSV:"逗号分隔值文件(CSV)",kindDOCBOOK:"Docbook XML 文档",kindImage:"图片",kindBMP:"BMP 图片",kindJPEG:"JPEG 图片",kindGIF:"GIF 图片",kindPNG:"PNG 图片",kindTIFF:"TIFF 图片",kindTGA:"TGA 图片",kindPSD:"Adobe Photoshop 图片",kindXBITMAP:"X bitmap 图片",kindPXM:"Pixelmator 图片",kindAudio:"音频",kindAudioMPEG:"MPEG 音频",kindAudioMPEG4:"MPEG-4 音频",kindAudioMIDI:"MIDI 音频",kindAudioOGG:"Ogg Vorbis 音频",kindAudioWAV:"WAV 音频",AudioPlaylist:"MP3 播放列表",kindVideo:"视频",kindVideoDV:"DV 视频",kindVideoMPEG:"MPEG 视频",kindVideoMPEG4:"MPEG-4 视频",kindVideoAVI:"AVI 视频",kindVideoMOV:"Quick Time 视频",kindVideoWM:"Windows Media 视频",kindVideoFlash:"Flash 视频",kindVideoMKV:"Matroska 视频",kindVideoOGG:"Ogg 视频"}}();
//# sourceMappingURL=docmana.min.js.map
